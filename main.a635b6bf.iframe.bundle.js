(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),esm=__webpack_require__("./node_modules/@storybook/client-logger/dist/esm/index.js"),parameters={actions:{argTypesRegex:"^on.*"}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(ClientApi.d)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.e)(loader,!1)}));case"parameters":return Object(ClientApi.f)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.b)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"render":return Object(ClientApi.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.f)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx|js|jsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src/classes/Coordinate.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Coordinate}));__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Coordinate=function(){function Coordinate(x,y,z){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Coordinate),this.x=void 0,this.y=void 0,this.z=void 0,this.x=x,this.y=y,this.z=z}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Coordinate,[{key:"equals",value:function equals(coord){return this===coord||coord&&this.x===coord.x&&this.y===coord.y&&this.z===coord.z}},{key:"transform",value:function transform(){var dx=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,dy=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,dz=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.x+=dx,this.y+=dy,this.z+=dz,this}},{key:"hasNaN",value:function hasNaN(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)}},{key:"manhattanDistanceTo",value:function manhattanDistanceTo(coord){return Math.abs(this.x-coord.x)+Math.abs(this.y-coord.y)+Math.abs(this.z-coord.z)}},{key:"euclideanDistanceTo",value:function euclideanDistanceTo(coord){var xy=Math.sqrt(Math.pow(this.x-coord.x,2)+Math.pow(this.y-coord.y,2));return Math.sqrt(Math.pow(xy,2)+Math.pow(this.z-coord.z,2))}},{key:"toString",value:function toString(){return[this.x,this.y,this.z].join(",")}}],[{key:"clone",value:function clone(coord){return new Coordinate(coord.x,coord.y,coord.z)}}]),Coordinate}()},"./src/classes/Event.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Event}));__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _Logger__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/classes/Logger.ts");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Event=function(){function Event(debugName){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Event),this.callbacks=[],this.name=void 0,this.name=debugName}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Event,[{key:"on",value:function on(callback){var _this=this;return this.callbacks.push(callback),function cancel(){_this.callbacks.splice(_this.callbacks.indexOf(callback),1)}}},{key:"once",value:function once(callback){var _this2=this,run=function run(){callback.apply(void 0,arguments),cancel()},cancel=function cancel(){_this2.callbacks.splice(_this2.callbacks.indexOf(run),1)};return this.callbacks.push(run),cancel}},{key:"emit",value:function emit(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.name&&_Logger__WEBPACK_IMPORTED_MODULE_7__.a.group('Event "'+this.name+'"'),this.callbacks.forEach((function(cb){return cb.apply(void 0,args)})),this.name&&_Logger__WEBPACK_IMPORTED_MODULE_7__.a.groupEnd()}},{key:"clear",value:function clear(){this.callbacks=[]}}],[{key:"onAny",value:function onAny(callback,events){var destroyers=events.map((function(event){return event.on(callback)}));return function destroy(){destroyers.forEach((function(destroy){return destroy()}))}}},{key:"onceFirst",value:function onceFirst(callback,events){var destroyers=[],cb=function cb(){callback(),destroyers.forEach((function(destroy){return destroy()}))};return events.forEach((function(event){destroyers.push(event.once(cb))})),function destroy(){destroyers.forEach((function(destroy){return destroy()}))}}}]),Event}()},"./src/classes/Logger.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}__webpack_exports__.a=function(){function LoggerDisabled(){_classCallCheck(this,LoggerDisabled)}return _createClass(LoggerDisabled,null,[{key:"log",value:function(_log2){function log(){return _log2.apply(this,arguments)}return log.toString=function(){return _log2.toString()},log}((function(){}))},{key:"warn",value:function(_warn2){function warn(){return _warn2.apply(this,arguments)}return warn.toString=function(){return _warn2.toString()},warn}((function(){}))},{key:"error",value:function(_error2){function error(){return _error2.apply(this,arguments)}return error.toString=function(){return _error2.toString()},error}((function(){}))},{key:"time",value:function(_time2){function time(){return _time2.apply(this,arguments)}return time.toString=function(){return _time2.toString()},time}((function(){}))},{key:"timeEnd",value:function(_timeEnd2){function timeEnd(){return _timeEnd2.apply(this,arguments)}return timeEnd.toString=function(){return _timeEnd2.toString()},timeEnd}((function(){}))},{key:"group",value:function(_group2){function group(){return _group2.apply(this,arguments)}return group.toString=function(){return _group2.toString()},group}((function(){}))},{key:"groupCollapsed",value:function(_groupCollapsed2){function groupCollapsed(){return _groupCollapsed2.apply(this,arguments)}return groupCollapsed.toString=function(){return _groupCollapsed2.toString()},groupCollapsed}((function(){}))},{key:"groupEnd",value:function(_groupEnd2){function groupEnd(){return _groupEnd2.apply(this,arguments)}return groupEnd.toString=function(){return _groupEnd2.toString()},groupEnd}((function(){}))}]),LoggerDisabled}()},"./src/entities/CivilianPersonEntity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CivilianEntity}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var CivilianEntity=function(_PersonEntity){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(CivilianEntity,_PersonEntity);var _super=_createSuper(CivilianEntity);function CivilianEntity(){return _classCallCheck(this,CivilianEntity),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CivilianEntity,[{key:"label",get:function get(){return""+this.passport.firstName}}]),CivilianEntity}(__webpack_require__("./src/entities/PersonEntity.tsx").a)},"./src/entities/GuardPersonEntity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GuardEntity}));__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var color__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/color/index.js"),color__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_7__),_classes_Coordinate__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/classes/Coordinate.ts")),_space_Anchor__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/space/Anchor.tsx"),_space_SimpleCube__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/space/SimpleCube.tsx"),_PersonEntity__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/entities/PersonEntity.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var offset=new _classes_Coordinate__WEBPACK_IMPORTED_MODULE_9__.a(-.125,-.125,-.0625),GuardEntity=function(_PersonEntity){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(GuardEntity,_PersonEntity);var _super=_createSuper(GuardEntity);function GuardEntity(){var _this;_classCallCheck(this,GuardEntity);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).Component=function(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_space_Anchor__WEBPACK_IMPORTED_MODULE_10__.a,Object.assign({},offset,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_space_SimpleCube__WEBPACK_IMPORTED_MODULE_11__.a,{size:.25,fill:color__WEBPACK_IMPORTED_MODULE_7___default()("#227d5e"),stroke:color__WEBPACK_IMPORTED_MODULE_7___default()("#227d5e").mix(color__WEBPACK_IMPORTED_MODULE_7___default()("#000"),.3),innerStroke:color__WEBPACK_IMPORTED_MODULE_7___default()("#227d5e").mix(color__WEBPACK_IMPORTED_MODULE_7___default()("#fff"),.3)})}))},_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(GuardEntity,[{key:"label",get:function get(){return"Guardsman "+this.passport.firstName}}]),GuardEntity}(_PersonEntity__WEBPACK_IMPORTED_MODULE_12__.a)},"./src/entities/PersonEntity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonEntity_PersonEntity}));__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var BinaryHeap=function(){function BinaryHeap(scoreFunction){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BinaryHeap),this.scoreFunction=void 0,this.content=[],this.content=[],this.scoreFunction=scoreFunction}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BinaryHeap,[{key:"push",value:function push(element){this.content.push(element),this.sinkDown(this.content.length-1)}},{key:"pop",value:function pop(){var result=this.content[0],end=this.content.pop();return end?(this.content.length>0&&(this.content[0]=end,this.bubbleUp(0)),result):result}},{key:"remove",value:function remove(node){var i=this.content.indexOf(node),end=this.content.pop();end&&i!==this.content.length-1&&(this.content[i]=end,this.scoreFunction(end)<this.scoreFunction(node)?this.sinkDown(i):this.bubbleUp(i))}},{key:"size",value:function size(){return this.content.length}},{key:"rescoreElement",value:function rescoreElement(node){this.sinkDown(this.content.indexOf(node))}},{key:"sinkDown",value:function sinkDown(n){for(var element=this.content[n];n>0;){var parentN=(n+1>>1)-1,parent=this.content[parentN];if(!(this.scoreFunction(element)<this.scoreFunction(parent)))break;this.content[parentN]=element,this.content[n]=parent,n=parentN}}},{key:"bubbleUp",value:function bubbleUp(n){for(var length=this.content.length,element=this.content[n],elemScore=this.scoreFunction(element);;){var child2N=n+1<<1,child1N=child2N-1,swap=null,child1Score=void 0;if(child1N<length){var child1=this.content[child1N];(child1Score=this.scoreFunction(child1))<elemScore&&(swap=child1N)}if(child2N<length){var child2=this.content[child2N];this.scoreFunction(child2)<(null===swap?elemScore:child1Score)&&(swap=child2N)}if(null===swap)break;this.content[n]=this.content[swap],this.content[swap]=element,n=swap}}}]),BinaryHeap}(),Logger=__webpack_require__("./src/classes/Logger.ts");function Path_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Path_Path=function(){function Path(graph,options){var _this=this;!function Path_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Path),this.terrain=void 0,this.options=void 0,this.cache=void 0,this.heap=void 0,this.heuristic=void 0,this.terrain=graph,this.options=options,this.cache=new Map,this.heap=new BinaryHeap((function(node){var heuristic=_this.cache.get(node);if(!heuristic)throw new Error("This is weird");return heuristic.f})),this.heuristic=function(pos0,pos1){return pos0.euclideanDistanceTo(pos1)}}return function Path_createClass(Constructor,protoProps,staticProps){return protoProps&&Path_defineProperties(Constructor.prototype,protoProps),staticProps&&Path_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Path,[{key:"find",value:function find(start,end){var closestNode=start,closestNodeHeuristics={coordinate:closestNode,h:this.heuristic(start,end),g:0,f:0,parent:null,closed:!0,visited:!0};for(this.cache.set(start,closestNodeHeuristics),this.heap.push(start);this.heap.size()>0;){var currentNode=this.heap.pop(),currentNodeHeuristics=this.cache.get(currentNode);if(!currentNodeHeuristics)throw new Error("Somehow opening a node that has no heuristic data");if(currentNode.equals(end))return this.tracePath(currentNodeHeuristics);currentNodeHeuristics.closed=!0;for(var neighbors=this.terrain.getNeighborTiles(currentNode),i=0,il=neighbors.length;i<il;++i){var _neighborHeuristics,neighbor=neighbors[i],neighborHeuristics=this.cache.get(neighbor);if((null===(_neighborHeuristics=neighborHeuristics)||void 0===_neighborHeuristics||!_neighborHeuristics.closed)&&neighbor.isLand()){var gScore=currentNodeHeuristics.g+(this.terrain,1),beenVisited=!!neighborHeuristics;if(!beenVisited||neighborHeuristics&&gScore<neighborHeuristics.g){var hScore=this.heuristic(neighbor,end);neighborHeuristics={coordinate:neighbor,h:hScore,g:gScore,f:gScore+hScore,parent:currentNodeHeuristics,closed:!0,visited:!0},this.cache.set(neighbor,neighborHeuristics),this.options.closest&&(neighborHeuristics.h<closestNodeHeuristics.h||neighborHeuristics.h===closestNodeHeuristics.h&&neighborHeuristics.g<closestNodeHeuristics.g)&&(closestNode=neighbor,closestNodeHeuristics=neighborHeuristics),beenVisited?this.heap.rescoreElement(neighbor):this.heap.push(neighbor)}}}}return this.options.closest?this.tracePath(closestNodeHeuristics):(Logger.a.warn("-- No path --"),[])}},{key:"tracePath",value:function tracePath(heuristicReport){for(var curr=heuristicReport,path=[];curr.parent;)path.unshift(curr),curr=curr.parent;return path.map((function(heuristicReport){return heuristicReport.coordinate}))}}]),Path}(),FIRST_NAMES_M=(__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),"\n\tPaul, Paolo, Pablo, Pavel, Pasha, Pau, Paulo, Pol, Pavlo, Paavo, Pali, Pal, Paulin, Pava, Påvel, Paulino, Pawel,\n\tPaavali, Pauel, Pavlos, Pavlusha, Poul, Pusha, Pashenka, Pavlík, Poll, Pól, Pavlousek, Pawelek, Pål, Pavilcek, Pál\n".replace(/\t|\n/g,"").split(",").map((function(name){return name.trim()}))),FIRST_NAMES_F="\n\tMia, Mare, Miriam, Mary, Mara, Molly, Maren, Mariah, Marisol, Maria, Moira, Polly, Marie, Mariana, Marilyn, Malia,\n\tMari, Manon, Marissa, Mariam, Marion, Ria, Mariella, Milou, Mitzi, Marielle, Maribel, Maura, Mamie, Maureen, Mariel,\n\tMarisa, Maryam, Mairi, Malou, Marietta, Maija, Maire, Maritza, Maricela, Marya, Marika, Isamar, My, Mariska, Maryse,\n\tMariela, Maira, Marita, Mariette,\n".replace(/\t|\n/g,"").split(",").map((function(name){return name.trim()}));function getRandomMaleFirstName(){return FIRST_NAMES_M[Math.floor(Math.random()*FIRST_NAMES_M.length)]}function getRandomFemaleFirstName(){return FIRST_NAMES_F[Math.floor(Math.random()*FIRST_NAMES_F.length)]}var Event=__webpack_require__("./src/classes/Event.ts");__webpack_require__("./node_modules/core-js/modules/es.function.name.js");function Entity_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var noop=function noop(){},Entity_Entity=function(){function Entity(id,location){!function Entity_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Entity),this.id=void 0,this.Component=function(){return null},this.location=void 0,this.job=void 0,this.id=id,this.location=location}return function Entity_createClass(Constructor,protoProps,staticProps){return protoProps&&Entity_defineProperties(Constructor.prototype,protoProps),staticProps&&Entity_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Entity,[{key:"label",get:function get(){throw new Error(this.constructor.name+" "+this.id)}},{key:"play",value:function play(){var _this$job;return(null===(_this$job=this.job)||void 0===_this$job?void 0:_this$job.start())||noop}},{key:"doJob",value:function doJob(job){this.job=job}},{key:"destroy",value:function destroy(){var _this$job2;Logger.a.group("Destroy "+this.constructor.name+" "+this.id),null===(_this$job2=this.job)||void 0===_this$job2||_this$job2.destroy(),Logger.a.groupEnd()}}]),Entity}(),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function PersonEntity_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PersonEntity_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var PersonEntity_PersonEntity=function(_Entity){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(PersonEntity,_Entity);var _super=_createSuper(PersonEntity);function PersonEntity(id,location){var _this,passport=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{firstName:Math.random()<.5?getRandomFemaleFirstName():getRandomMaleFirstName()};return PersonEntity_classCallCheck(this,PersonEntity),(_this=_super.call(this,id,location)).$stoppedWalking=new Event.a,_this.$startedWalkStep=new Event.a,_this.$stoppedWalkStep=new Event.a,_this.passport=void 0,_this.Component=function(){return Object(jsx_runtime.jsx)("circle",{cx:0,cy:0,r:"5",fill:"white",stroke:"black"})},_this.passport=passport,_this.$stoppedWalkStep.on((function(loc){_this.location=loc})),_this}return function PersonEntity_createClass(Constructor,protoProps,staticProps){return protoProps&&PersonEntity_defineProperties(Constructor.prototype,protoProps),staticProps&&PersonEntity_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PersonEntity,[{key:"walkTo",value:function walkTo(destination){var _this2=this;if(!this.location.terrain)throw new Error('Entity "'+this.id+'" is trying to path in a detached coordinate');var path=new Path_Path(this.location.terrain,{closest:!0}).find(this.location,destination);if(Logger.a.log(this.location+"--\x3e"+destination+": "+path.length),!path.length)throw new Error("Path was zero steps long, finishing early.");var unlisten=this.$stoppedWalkStep.on((function(){var nextStep=path.shift();nextStep?_this2.doPathStep(nextStep):(_this2.$stoppedWalking.emit(),unlisten())}));this.doPathStep(path.shift())}},{key:"doPathStep",value:function doPathStep(coordinate){coordinate.hasNaN(),this.$startedWalkStep.emit(coordinate)}},{key:"label",get:function get(){return this.passport.firstName}}]),PersonEntity}(Entity_Entity)},"./src/entities/PersonEntityC.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonEntityC_PersonEntityC}));__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var react=__webpack_require__("./node_modules/react/index.js");__webpack_require__("./node_modules/core-js/modules/es.array.concat.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Anchor=__webpack_require__("./src/space/Anchor.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function PersonEntityC_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PersonEntityC_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PersonEntityC_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PersonEntityC_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PersonEntityC_PersonEntityC=function PersonEntityC(_ref){var entity=_ref.entity,onClick=_ref.onClick,_useState2=_slicedToArray(Object(react.useState)({destination:entity.location,duration:0}),2),_useState2$=_useState2[0],destination=_useState2$.destination,duration=_useState2$.duration,animatePosition=_useState2[1];!function useEventCallback(event,callback,dependencies){Object(react.useEffect)((function(){return event.on(callback)}),[event,callback].concat(_toConsumableArray(dependencies)))}(entity.$startedWalkStep,Object(react.useCallback)((function(destination){return animatePosition({destination:destination,duration:500*entity.location.euclideanDistanceTo(destination)})}),[entity.location]),[entity.$startedWalkStep,entity.location]);var onRest=Object(react.useCallback)((function(){return entity.$stoppedWalkStep.emit(destination)}),[entity.$stoppedWalkStep,destination]);return Object(jsx_runtime.jsx)(Anchor.b,{moveTo:destination,moveSpeed:duration,onRest:onRest,onClick:onClick,children:Object(jsx_runtime.jsx)(entity.Component,{})})};PersonEntityC_PersonEntityC.displayName="PersonEntityC";try{PersonEntityC_PersonEntityC.displayName="PersonEntityC",PersonEntityC_PersonEntityC.__docgenInfo={description:"A component that automatically transitions the entity component as per its move instructions",displayName:"PersonEntityC",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"PersonEntity"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"OnEntityClick"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/entities/PersonEntityC.tsx#PersonEntityC"]={docgenInfo:PersonEntityC_PersonEntityC.__docgenInfo,name:"PersonEntityC",path:"src/entities/PersonEntityC.tsx#PersonEntityC"})}catch(__react_docgen_typescript_loader_error){}},"./src/scenarios/util.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Backdrop}));var _templateObject;__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var Backdrop=__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js").a.div(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\tposition: relative;\n\theight: ",";\n\tbackground-image: linear-gradient(\n\t\t45deg,\n\t\trgba(255, 255, 255, 0.02) 25%,\n\t\trgba(0, 0, 0, 0.02) 25%,\n\t\trgba(0, 0, 0, 0.02) 50%,\n\t\trgba(255, 255, 255, 0.02) 50%,\n\t\trgba(255, 255, 255, 0.02) 75%,\n\t\trgba(0, 0, 0, 0.02) 75%,\n\t\trgba(0, 0, 0, 0.02) 100%\n\t);\n\tbackground-size: 56.57px 56.57px;\n\tmargin-bottom: 1em;\n"])),(function(_ref){var _ref$height=_ref.height;return(void 0===_ref$height?180:_ref$height)+"px"}));try{Backdrop.displayName="Backdrop",Backdrop.__docgenInfo={description:"",displayName:"Backdrop",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/scenarios/util.tsx#Backdrop"]={docgenInfo:Backdrop.__docgenInfo,name:"Backdrop",path:"src/scenarios/util.tsx#Backdrop"})}catch(__react_docgen_typescript_loader_error){}},"./src/space/Anchor.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Anchor_Anchor})),__webpack_require__.d(__webpack_exports__,"b",(function(){return Anchor_MovingAnchor}));__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var react_spring_core_esm=__webpack_require__("./node_modules/@react-spring/core/dist/react-spring-core.esm.js"),react_spring_web_esm=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),PERSPECTIVE=(__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./src/space/PERSPECTIVE.ts")),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var LinePath_LinePath=function LinePath(_ref){var path=_ref.path,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"black":_ref$stroke,_ref$strokeWidth=_ref.strokeWidth,strokeWidth=void 0===_ref$strokeWidth?0:_ref$strokeWidth,spatialCoordinates=path.map((function(coordinate){return PERSPECTIVE.a.toPixels.apply(PERSPECTIVE.a,_toConsumableArray(coordinate))})).map((function(cc){return cc.map((function(c){return c+0}))}));return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:spatialCoordinates.reduce((function(lines,start,i,all){return i?lines.concat([Object(jsx_runtime.jsx)("line",{x1:start[0],y1:start[1],x2:all[i-1][0],y2:all[i-1][1],stroke:stroke,strokeWidth:String(strokeWidth)},i)]):lines}),[])})};try{LinePath_LinePath.displayName="LinePath",LinePath_LinePath.__docgenInfo={description:"",displayName:"LinePath",props:{path:{defaultValue:null,description:"",name:"path",required:!0,type:{name:"CoordinateArray[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/LinePath.tsx#LinePath"]={docgenInfo:LinePath_LinePath.__docgenInfo,name:"LinePath",path:"src/space/LinePath.tsx#LinePath"})}catch(__react_docgen_typescript_loader_error){}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Anchor_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Anchor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Anchor_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Anchor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Anchor_Crosshair=function Crosshair(_ref){var _ref$size=_ref.size,size=void 0===_ref$size?4:_ref$size,lines=[[[-1*size,0,0],[size,0,0]],[[0,-1*size,0],[0,size,0]],[[0,0,-1*size],[0,0,size]]];return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:lines.map((function(points,i){return Object(jsx_runtime.jsx)(LinePath_LinePath,{path:points,stroke:"rgba(0,0,0)",strokeWidth:.5},i)}))})},Anchor_Anchor=function Anchor(_ref2){var _ref2$x=_ref2.x,x=void 0===_ref2$x?0:_ref2$x,_ref2$y=_ref2.y,y=void 0===_ref2$y?0:_ref2$y,_ref2$z=_ref2.z,z=void 0===_ref2$z?0:_ref2$z,children=_ref2.children,_ref2$crosshairSize=_ref2.crosshairSize,crosshairSize=void 0===_ref2$crosshairSize?0:_ref2$crosshairSize,pixels=Object(react.useMemo)((function(){return PERSPECTIVE.a.toPixels(x,y,z)}),[x,y,z]);return Object(jsx_runtime.jsxs)("svg",{x:pixels[0],y:pixels[1],overflow:"visible",children:[crosshairSize?Object(jsx_runtime.jsx)(Anchor_Crosshair,{size:crosshairSize}):null,children]})};Anchor_Anchor.displayName="Anchor";var Anchor_MovingAnchor=function MovingAnchor(_ref3){var moveTo=_ref3.moveTo,moveSpeed=_ref3.moveSpeed,onRest=_ref3.onRest,children=_ref3.children,_ref3$crosshairSize=_ref3.crosshairSize,crosshairSize=void 0===_ref3$crosshairSize?0:_ref3$crosshairSize,onClick=_ref3.onClick,_useMemo2=_slicedToArray(Object(react.useMemo)((function(){return PERSPECTIVE.a.toPixels(moveTo.x,moveTo.y,moveTo.z)}),[moveTo]),2),dx=_useMemo2[0],dy=_useMemo2[1],_useMemo4=_slicedToArray(Object(react.useMemo)((function(){return[dx,dy]}),[]),2),ix=_useMemo4[0],iy=_useMemo4[1],loc=Object(react_spring_core_esm.useSpring)({to:{x:dx,y:dy},config:{duration:moveSpeed},from:{x:ix,y:iy},onRest:onRest});return Object(jsx_runtime.jsxs)(react_spring_web_esm.animated.svg,{x:loc.x,y:loc.y,overflow:"visible",onClick:onClick,children:[crosshairSize?Object(jsx_runtime.jsx)(Anchor_Crosshair,{size:crosshairSize}):null,children]})};Anchor_MovingAnchor.displayName="MovingAnchor";try{Anchor_Anchor.displayName="Anchor",Anchor_Anchor.__docgenInfo={description:"",displayName:"Anchor",props:{crosshairSize:{defaultValue:{value:"0"},description:"",name:"crosshairSize",required:!1,type:{name:"number"}},x:{defaultValue:{value:"0"},description:"",name:"x",required:!1,type:{name:"number"}},y:{defaultValue:{value:"0"},description:"",name:"y",required:!1,type:{name:"number"}},z:{defaultValue:{value:"0"},description:"",name:"z",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/Anchor.tsx#Anchor"]={docgenInfo:Anchor_Anchor.__docgenInfo,name:"Anchor",path:"src/space/Anchor.tsx#Anchor"})}catch(__react_docgen_typescript_loader_error){}try{Anchor_MovingAnchor.displayName="MovingAnchor",Anchor_MovingAnchor.__docgenInfo={description:"",displayName:"MovingAnchor",props:{moveTo:{defaultValue:null,description:"",name:"moveTo",required:!0,type:{name:"CoordinateI"}},moveSpeed:{defaultValue:null,description:"",name:"moveSpeed",required:!0,type:{name:"number"}},onRest:{defaultValue:null,description:"",name:"onRest",required:!1,type:{name:"(() => void)"}},crosshairSize:{defaultValue:{value:"0"},description:"",name:"crosshairSize",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/Anchor.tsx#MovingAnchor"]={docgenInfo:Anchor_MovingAnchor.__docgenInfo,name:"MovingAnchor",path:"src/space/Anchor.tsx#MovingAnchor"})}catch(__react_docgen_typescript_loader_error){}},"./src/space/PERSPECTIVE.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PERSPECTIVE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return distanceToCameraComparator}));__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var PERSPECTIVE=new(function(){function IsometricPerspective(degrees,tileSize){_classCallCheck(this,IsometricPerspective),this.degrees=void 0,this.tileSize=void 0,this._cos=void 0,this._sin=void 0,this._tan=void 0,this.degrees=degrees,this.tileSize=tileSize;var isometricAngle=degrees*(Math.PI/180);this._cos=Math.cos(isometricAngle),this._sin=Math.sin(isometricAngle),this._tan=Math.tan(isometricAngle)}return _createClass(IsometricPerspective,[{key:"toPixels",value:function toPixels(x,y,z){var cartX=(x+y)*this._cos,cartY=(x-y)*this._sin,tileHeight=this.tileSize;return[cartX*this.tileSize,cartY*this.tileSize-tileHeight*z]}},{key:"toCoords",value:function toCoords(cartX,cartY){var isoY=this._tan*cartX+cartY;return[((cartY-isoY)/-this._sin-isoY)/this.tileSize,isoY/this.tileSize,0]}}]),IsometricPerspective}())(30,32);function distanceToCameraComparator(a,b){var dX=b.x-a.x;if(dX)return-dX;var dY=a.y-b.y;if(dY)return-dY;var dZ=b.z-a.z;return dZ?-dZ:0}},"./src/space/SimpleCube.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SimpleCube}));__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _styles__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./src/styles.ts"),_PERSPECTIVE__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/space/PERSPECTIVE.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["size","fill","strokeLinecap","stroke","strokeWidth","innerStroke","innerStrokeWidth"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function coordsToPixels(coords){var borderWidth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return coords.map((function(coordinate){return _PERSPECTIVE__WEBPACK_IMPORTED_MODULE_19__.a.toPixels.apply(_PERSPECTIVE__WEBPACK_IMPORTED_MODULE_19__.a,_toConsumableArray(coordinate))})).map((function(cc){return cc.map((function(c){return c+borderWidth}))}))}var COORDINATE_CLOSEST_TO_CAMERA=_PERSPECTIVE__WEBPACK_IMPORTED_MODULE_19__.a.toPixels(1,0,1).map((function(c){return c+0})),BORDER_NODES=coordsToPixels([[1,1,0],[1,1,1],[0,1,1],[0,0,1],[0,0,0],[1,0,0]]),XZ_NODES=coordsToPixels([[0,0,0],[0,0,1],[1,0,1],[1,0,0]]),YZ_NODES=coordsToPixels([[1,0,0],[1,1,0],[1,1,1],[1,0,1]]),XY_NODES=coordsToPixels([[0,0,1],[1,0,1],[1,1,1],[0,1,1]]),SimpleCube=function SimpleCube(_ref){var _ref$size=_ref.size,size=void 0===_ref$size?1:_ref$size,_ref$fill=_ref.fill,fill=void 0===_ref$fill?_styles__WEBPACK_IMPORTED_MODULE_18__.a.terrain:_ref$fill,_ref$strokeLinecap=_ref.strokeLinecap,strokeLinecap=void 0===_ref$strokeLinecap?"round":_ref$strokeLinecap,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?null:_ref$stroke,_ref$strokeWidth=_ref.strokeWidth,strokeWidth=void 0===_ref$strokeWidth?1:_ref$strokeWidth,_ref$innerStroke=_ref.innerStroke,innerStroke=void 0===_ref$innerStroke?null:_ref$innerStroke,_ref$innerStrokeWidth=_ref.innerStrokeWidth,innerStrokeWidth=void 0===_ref$innerStrokeWidth?strokeWidth:_ref$innerStrokeWidth,gProps=_objectWithoutProperties(_ref,_excluded),innerStrokeCss=innerStroke&&innerStroke.string(),strokeCss=stroke&&stroke.string(),style={};return(gProps.onClick||gProps.onContextMenu)&&(style.cursor="pointer"),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("g",Object.assign({},gProps,{style:style,children:[fill&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("polygon",{points:XZ_NODES.map((function(c){return c.map((function(cc){return cc*size})).join(",")})).join(" "),fill:fill.string(),strokeWidth:0},"xz"),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("polygon",{points:XY_NODES.map((function(c){return c.map((function(cc){return cc*size})).join(",")})).join(" "),fill:fill.lighten(.2).string(),strokeWidth:0},"xy"),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("polygon",{points:YZ_NODES.map((function(c){return c.map((function(cc){return cc*size})).join(",")})).join(" "),fill:fill.darken(.2).string(),strokeWidth:0},"yz")]}),innerStroke&&innerStrokeWidth&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("line",{x1:COORDINATE_CLOSEST_TO_CAMERA[0]*size,y1:COORDINATE_CLOSEST_TO_CAMERA[1]*size,x2:BORDER_NODES[3][0]*size,y2:BORDER_NODES[3][1]*size,stroke:innerStrokeCss||void 0,strokeWidth:innerStrokeWidth,strokeLinecap:strokeLinecap},"x-bar"),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("line",{x1:COORDINATE_CLOSEST_TO_CAMERA[0]*size,y1:COORDINATE_CLOSEST_TO_CAMERA[1]*size,x2:BORDER_NODES[1][0]*size,y2:BORDER_NODES[1][1]*size,stroke:innerStrokeCss||void 0,strokeWidth:innerStrokeWidth,strokeLinecap:strokeLinecap},"y-bar"),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("line",{x1:COORDINATE_CLOSEST_TO_CAMERA[0]*size,y1:COORDINATE_CLOSEST_TO_CAMERA[1]*size,x2:BORDER_NODES[5][0]*size,y2:BORDER_NODES[5][1]*size,stroke:innerStrokeCss||void 0,strokeWidth:innerStrokeWidth,strokeLinecap:strokeLinecap},"z-bar")]}),stroke&&strokeWidth&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("polygon",{points:BORDER_NODES.map((function(c){return c.map((function(cc){return cc*size})).join(",")})).join(" "),stroke:strokeCss||void 0,fill:"transparent",strokeWidth:strokeWidth,strokeLinecap:strokeLinecap},"outline")]}))};SimpleCube.displayName="SimpleCube";try{SimpleCube.displayName="SimpleCube",SimpleCube.__docgenInfo={description:"",displayName:"SimpleCube",props:{size:{defaultValue:{value:"1"},description:"",name:"size",required:!1,type:{name:"number"}},strokeLinecap:{defaultValue:{value:"round"},description:"",name:"strokeLinecap",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"butt"'},{value:'"round"'},{value:'"square"'}]}},fill:{defaultValue:{value:"color.terrain"},description:"",name:"fill",required:!1,type:{name:"Color<ColorParam>"}},stroke:{defaultValue:{value:"null"},description:"",name:"stroke",required:!1,type:{name:"Color<ColorParam> | null"}},strokeWidth:{defaultValue:{value:"1"},description:"",name:"strokeWidth",required:!1,type:{name:"number"}},innerStrokeWidth:{defaultValue:{value:"1"},description:"",name:"innerStrokeWidth",required:!1,type:{name:"number"}},innerStroke:{defaultValue:{value:"null"},description:"",name:"innerStroke",required:!1,type:{name:"Color<ColorParam> | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/SimpleCube.tsx#SimpleCube"]={docgenInfo:SimpleCube.__docgenInfo,name:"SimpleCube",path:"src/space/SimpleCube.tsx#SimpleCube"})}catch(__react_docgen_typescript_loader_error){}},"./src/space/Viewport.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Viewport})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ViewportHtmlContainer}));__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var _templateObject,_templateObject2,_emotion_styled__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js"),react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/react/index.js"),_PERSPECTIVE__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./src/space/PERSPECTIVE.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["zoom"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var PIXEL_FRIENDLY_PYTHAGORAS=1/Math.pow(2,.5);function mathRoundMaybe(n){return Math.round(n)}var AbsolutelyPositionedContainer=_emotion_styled__WEBPACK_IMPORTED_MODULE_16__.a.div(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 50%;\n\twidth: 0;\n\theight: 0;\n\ttransition: transform 5s;\n\t> * {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t}\n"]))),Viewport=function Viewport(_ref){var overlay=_ref.overlay,_ref$center=_ref.center,center=void 0===_ref$center?{x:0,y:0,z:0}:_ref$center,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?1:_ref$zoom,children=_ref.children,_useMemo2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_17__.useMemo)((function(){return _PERSPECTIVE__WEBPACK_IMPORTED_MODULE_18__.a.toPixels(center.x,center.y,center.z).map((function(n,i){return mathRoundMaybe(-n)+(i?0:.5)}))}),[center]),2),springStyles={transform:"translate(\n\t\t\t\t"+_useMemo2[0]*zoom+"px,\n\t\t\t\t"+_useMemo2[1]*zoom+"px\n\t\t\t)"};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(AbsolutelyPositionedContainer,{style:springStyles,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(ViewportSvgContainer,{zoom:zoom,children:children}),overlay]})};Viewport.displayName="Viewport";var ViewportSvgContainer=function ViewportSvgContainer(_ref2){var _ref2$zoom=_ref2.zoom,zoom=void 0===_ref2$zoom?1:_ref2$zoom,rest=_objectWithoutProperties(_ref2,_excluded);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("svg",Object.assign({width:"1px",height:"1px",overflow:"visible",shapeRendering:"geometricPrecision",viewBox:[0,0,1/zoom,1/zoom].join(" ")},rest))};ViewportSvgContainer.displayName="ViewportSvgContainer";var NoAxis=_emotion_styled__WEBPACK_IMPORTED_MODULE_16__.a.div(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\t--scale-val: ",";\n\n\tposition: absolute;\n\ttransform-origin: top left;\n\ttransform: scale(var(--scale-val));\n"])),(function(_ref3){var _ref3$zoom=_ref3.zoom;return void 0===_ref3$zoom?1:_ref3$zoom})),ViewportHtmlContainer=function ViewportHtmlContainer(_ref4){var location=_ref4.location,_ref4$zoom=_ref4.zoom,zoom=void 0===_ref4$zoom?1:_ref4$zoom,axis=_ref4.axis,width=_ref4.width,height=_ref4.height,children=_ref4.children,x=location.x,y=location.y,z=location.z,_PERSPECTIVE$toPixels2=_slicedToArray(_PERSPECTIVE__WEBPACK_IMPORTED_MODULE_18__.a.toPixels(x,y,z).map((function(n){return mathRoundMaybe(n*zoom)})),2),left=_PERSPECTIVE$toPixels2[0],top=_PERSPECTIVE$toPixels2[1],pixelWidth=_slicedToArray(_PERSPECTIVE__WEBPACK_IMPORTED_MODULE_18__.a.toPixels(0,width,height).map((function(n){return mathRoundMaybe(n*zoom)})),1)[0],Axis=NoAxis;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(Axis,{zoom:zoom,style:{left:mathRoundMaybe(left),top:mathRoundMaybe(top),width:mathRoundMaybe(axis?pixelWidth/PIXEL_FRIENDLY_PYTHAGORAS:pixelWidth)+"px",height:Math.abs(height*_PERSPECTIVE__WEBPACK_IMPORTED_MODULE_18__.a.tileSize/("z"===axis?PIXEL_FRIENDLY_PYTHAGORAS:1))+"px"},children:children})};ViewportHtmlContainer.displayName="ViewportHtmlContainer";try{AbsolutelyPositionedContainer.displayName="AbsolutelyPositionedContainer",AbsolutelyPositionedContainer.__docgenInfo={description:"",displayName:"AbsolutelyPositionedContainer",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/Viewport.tsx#AbsolutelyPositionedContainer"]={docgenInfo:AbsolutelyPositionedContainer.__docgenInfo,name:"AbsolutelyPositionedContainer",path:"src/space/Viewport.tsx#AbsolutelyPositionedContainer"})}catch(__react_docgen_typescript_loader_error){}try{Viewport.displayName="Viewport",Viewport.__docgenInfo={description:"",displayName:"Viewport",props:{zoom:{defaultValue:{value:"1"},description:"",name:"zoom",required:!1,type:{name:"number"}},center:{defaultValue:{value:"{ x: 0, y: 0, z: 0 }"},description:"",name:"center",required:!1,type:{name:"CoordinateI"}},overlay:{defaultValue:null,description:"",name:"overlay",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/Viewport.tsx#Viewport"]={docgenInfo:Viewport.__docgenInfo,name:"Viewport",path:"src/space/Viewport.tsx#Viewport"})}catch(__react_docgen_typescript_loader_error){}try{ViewportSvgContainer.displayName="ViewportSvgContainer",ViewportSvgContainer.__docgenInfo={description:"",displayName:"ViewportSvgContainer",props:{zoom:{defaultValue:{value:"1"},description:"",name:"zoom",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/Viewport.tsx#ViewportSvgContainer"]={docgenInfo:ViewportSvgContainer.__docgenInfo,name:"ViewportSvgContainer",path:"src/space/Viewport.tsx#ViewportSvgContainer"})}catch(__react_docgen_typescript_loader_error){}try{ViewportHtmlContainer.displayName="ViewportHtmlContainer",ViewportHtmlContainer.__docgenInfo={description:"",displayName:"ViewportHtmlContainer",props:{axis:{defaultValue:null,description:"",name:"axis",required:!1,type:{name:"enum",value:[{value:'"x"'},{value:'"y"'},{value:'"z"'}]}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},zoom:{defaultValue:{value:"1"},description:"",name:"zoom",required:!1,type:{name:"number"}},location:{defaultValue:null,description:"",name:"location",required:!0,type:{name:"CoordinateI"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/Viewport.tsx#ViewportHtmlContainer"]={docgenInfo:ViewportHtmlContainer.__docgenInfo,name:"ViewportHtmlContainer",path:"src/space/Viewport.tsx#ViewportHtmlContainer"})}catch(__react_docgen_typescript_loader_error){}},"./src/styles.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return color}));var color__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/color/index.js"),color__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_0__),color={};color.background=color__WEBPACK_IMPORTED_MODULE_0___default()("#cde1fc"),color.white=color__WEBPACK_IMPORTED_MODULE_0___default()("#fff"),color.terrain=color__WEBPACK_IMPORTED_MODULE_0___default()("#a1d83c"),color.beach=color__WEBPACK_IMPORTED_MODULE_0___default()("#f7d884"),color.highlightedTerrain=color.terrain.lighten(1),color.terrainStroke=color.terrain.darken(.5).saturate(.3)},"./src/terrain/GenericTile.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GenericTile}));__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.number.to-fixed.js"),__webpack_require__("./node_modules/core-js/modules/es.array.some.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var GenericTile=function(_Coordinate){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(GenericTile,_Coordinate);var _super=_createSuper(GenericTile);function GenericTile(){var _this;_classCallCheck(this,GenericTile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).terrain=void 0,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(GenericTile,[{key:"equals",value:function equals(coord){return this===coord||coord&&this.x===coord.x&&this.y===coord.y}},{key:"isLand",value:function isLand(){return this.z>=0}},{key:"toString",value:function toString(){return"("+[this.x,this.y].map((function(num){return num.toFixed(2)})).join(",")+")"}},{key:"isAdjacentToEdge",value:function isAdjacentToEdge(){return!!this.terrain&&this.terrain.getNeighborTiles(this).length<4}},{key:"isAdjacentToLand",value:function isAdjacentToLand(){return!!this.terrain&&this.terrain.getNeighborTiles(this).some((function(neighbor){return neighbor.isLand()}))}},{key:"getOutlineCoordinates",value:function getOutlineCoordinates(){throw new Error("Not implemented")}}],[{key:"clone",value:function clone(coord){var coord2=new GenericTile(coord.x,coord.y,coord.z);return coord2.terrain=coord.terrain,coord2}}]),GenericTile}(__webpack_require__("./src/classes/Coordinate.ts").a)},"./src/ui/ActiveEntityOverlay.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ActiveEntityOverlay}));__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js");var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_emotion_styled__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js"),_classes_Logger__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/classes/Logger.ts")),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var ActiveEntityOverlayBoundary=_emotion_styled__WEBPACK_IMPORTED_MODULE_2__.a.div(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\tbackdrop-filter: blur(2px);\n"]))),ActiveEntityOverlayBody=_emotion_styled__WEBPACK_IMPORTED_MODULE_2__.a.div(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\tborder: 1px solid ",";\n\tbackground-color: rgba(0, 0, 0, 0.4);\n\tborder-radius: 3px;\n\tpadding: 1em;\n\tdisplay: flex;\n\tflex-direction: row;\n"])),"rgba(0,0, 0, 0.5)"),Avatar=_emotion_styled__WEBPACK_IMPORTED_MODULE_2__.a.div(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(["\n\tborder: 1px solid ",";\n\tborder-radius: 50%;\n\twidth: 64px;\n\theight: 64px;\n\tjustify-content: center;\n\talign-items: center;\n\tdisplay: flex;\n\tmargin-right: 1em;\n"])),"rgba(0,0, 0, 0.5)"),HorizontalLinkList=_emotion_styled__WEBPACK_IMPORTED_MODULE_2__.a.nav(_templateObject4||(_templateObject4=_taggedTemplateLiteralLoose(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tfont-size: 60%;\n\ttext-transform: uppercase;\n"]))),HorizontalLinkListItem=_emotion_styled__WEBPACK_IMPORTED_MODULE_2__.a.a(_templateObject5||(_templateObject5=_taggedTemplateLiteralLoose(["\n\tflex: 0 0 auto;\n\tbackground-color: rgba(255, 255, 255, 0.1);\n\tmargin-right: 3px;\n\n\t// Same as ContextMenuItem\n\tpadding: 0.125em 0.5em;\n\twhite-space: nowrap;\n\ttransition: background-color 0.5s;\n\tcolor: white;\n\t/* background-color: transparent; */\n\t/* background-color: rgba(255, 255, 255, 0.05); */\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"])),"rgba(0,0, 0, 0.5)"),EntityTextBadge=function EntityTextBadge(_ref){var _entity$job,entity=_ref.entity;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("p",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("b",{children:entity.label})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("p",{children:(null===(_entity$job=entity.job)||void 0===_entity$job?void 0:_entity$job.label)||"Jobless"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(HorizontalLinkList,{style:{marginTop:"1em"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(HorizontalLinkListItem,{onClick:function onClick(){_classes_Logger__WEBPACK_IMPORTED_MODULE_4__.a.group("Selected entity"),_classes_Logger__WEBPACK_IMPORTED_MODULE_4__.a.log(entity),_classes_Logger__WEBPACK_IMPORTED_MODULE_4__.a.groupEnd()},children:"LOG"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(HorizontalLinkListItem,{onClick:function onClick(){_classes_Logger__WEBPACK_IMPORTED_MODULE_4__.a.warn("Following entity not implemented yet",entity)},children:"FOLLOW"})]})]})},ActiveEntityOverlay=function ActiveEntityOverlay(_ref2){var entity=_ref2.entity,_ref2$zoom=_ref2.zoom,zoom=void 0===_ref2$zoom?4:_ref2$zoom;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ActiveEntityOverlayBoundary,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(ActiveEntityOverlayBody,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Avatar,{children:entity&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("svg",{width:"1",height:"1",overflow:"visible",shapeRendering:"geometricPrecision",viewBox:[0,0,1/zoom,1/zoom].join(" "),children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(entity.Component,{})})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{children:entity?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(EntityTextBadge,{entity:entity}):null})]})})};ActiveEntityOverlay.displayName="ActiveEntityOverlay";try{ActiveEntityOverlay.displayName="ActiveEntityOverlay",ActiveEntityOverlay.__docgenInfo={description:"",displayName:"ActiveEntityOverlay",props:{entity:{defaultValue:null,description:"",name:"entity",required:!1,type:{name:"EntityI"}},zoom:{defaultValue:{value:"4"},description:"",name:"zoom",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ActiveEntityOverlay.tsx#ActiveEntityOverlay"]={docgenInfo:ActiveEntityOverlay.__docgenInfo,name:"ActiveEntityOverlay",path:"src/ui/ActiveEntityOverlay.tsx#ActiveEntityOverlay"})}catch(__react_docgen_typescript_loader_error){}},"./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx|js|jsx))$":function(module,exports,__webpack_require__){var map={"./Demo.stories.tsx":"./stories/Demo.stories.tsx","./Objects.PersonEntity.stories.tsx":"./stories/Objects.PersonEntity.stories.tsx","./Objects.SimpleCube.stories.tsx":"./stories/Objects.SimpleCube.stories.tsx","./Objects.SimpleRectangle.stories.tsx":"./stories/Objects.SimpleRectangle.stories.tsx","./UI.stories.tsx":"./stories/UI.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx|js|jsx))$"},"./stories/Demo.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DualMesh",(function(){return Demo_stories_DualMesh}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),react_default=__webpack_require__.n(react),emotion_react_browser_esm=(__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js")),Logger=(__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./src/classes/Logger.ts"));function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Scene_Scene=function(){function Scene(seed,terrain,entities){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Scene),this.terrain=void 0,this.entities=void 0,this.seed=void 0,this.seed=seed,this.terrain=terrain,this.entities=entities}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Scene,[{key:"play",value:function play(){var _this=this;return this.entities.forEach((function(entity){return entity.play()})),function(){_this.destroy()}}},{key:"destroy",value:function destroy(){Logger.a.group("Destroy "+this.constructor.name),this.entities.forEach((function(entity){return entity.destroy()})),Logger.a.groupEnd()}}]),Scene}(),styled_browser_esm=(__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js")),GameContext=Object(react.createContext)(null);var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,Viewport=__webpack_require__("./src/space/Viewport.tsx"),Event=__webpack_require__("./src/classes/Event.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ContextMenu_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var ContextMenuArrow=styled_browser_esm.a.div(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\twidth: 0;\n\theight: 0;\n\tborder-left: 6px solid transparent;\n\tborder-right: 6px solid transparent;\n\tborder-top: 6px solid ",";\n\ttransform: translate(calc(-50% + 0px), -6px);\n"])),"rgba(0,0, 0, 0.5)"),ContextMenuBoundary=styled_browser_esm.a.div(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\tposition: absolute;\n\tbottom: 100%;\n\tleft: 50%;\n\tbackdrop-filter: blur(2px);\n\ttransform: translate(-50%, -6px);\n"]))),ContextMenuBody=styled_browser_esm.a.div(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(["\n\tborder: 1px solid ",";\n\tbackground-color: rgba(0, 0, 0, 0.4);\n\tborder-radius: 3px;\n\toverflow: hidden;\n"])),"rgba(0,0, 0, 0.5)"),ContextMenuButton=styled_browser_esm.a.button(_templateObject4||(_templateObject4=_taggedTemplateLiteralLoose(["\n\tborder: none;\n\tdisplay: block;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\n\t// Same as HorizontalLinkListItem\n\tpadding: 0.5em 1em;\n\twhite-space: nowrap;\n\ttransition: background-color 0.5s;\n\tcolor: white;\n\tbackground-color: transparent;\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"])),"rgba(0,0, 0, 0.5)"),ContextMenuFooter=styled_browser_esm.a.button(_templateObject5||(_templateObject5=_taggedTemplateLiteralLoose(["\n\tborder: none;\n\tdisplay: block;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\n\t// Same as HorizontalLinkListItem\n\tpadding: 0.5em 1em;\n\twhite-space: nowrap;\n\ttransition: background-color 0.5s;\n\tcolor: white;\n\tbackground-color: ",";\n"])),"rgba(0,0, 0, 0.5)"),ContextMenu_ContextMenuManager=function(){function ContextMenuManager(){!function ContextMenu_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ContextMenuManager),this.state=!1,this.$changed=new Event.a}return function ContextMenu_createClass(Constructor,protoProps,staticProps){return protoProps&&ContextMenu_defineProperties(Constructor.prototype,protoProps),staticProps&&ContextMenu_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ContextMenuManager,[{key:"open",value:function open(location,contents){this.state={location:location,contents:contents},this.$changed.emit(this.state)}},{key:"isOpen",value:function isOpen(){return!!this.state}},{key:"close",value:function close(){this.state=!1,this.$changed.emit(this.state)}}]),ContextMenuManager}(),ContextMenu_ContextMenuContainer=function ContextMenuContainer(_ref){var _ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?1:_ref$zoom,contextMenu=function useGame(){var gameApi=Object(react.useContext)(GameContext);if(!gameApi)throw new Error("Game context does not exist");return gameApi}().contextMenu,_useState2=_slicedToArray(Object(react.useState)(null==contextMenu?void 0:contextMenu.state),2),managerState=_useState2[0],setManagerState=_useState2[1];return Object(react.useEffect)((function(){if(!contextMenu)throw new Error("Shit.");return contextMenu.$changed.on(setManagerState)}),[contextMenu]),managerState?Object(jsx_runtime.jsxs)(Viewport.b,{location:managerState.location,width:0,height:0,zoom:zoom,children:[Object(jsx_runtime.jsx)(ContextMenuBoundary,{children:Object(jsx_runtime.jsx)(ContextMenuBody,{children:managerState.contents})}),Object(jsx_runtime.jsx)(ContextMenuArrow,{})]}):null};ContextMenu_ContextMenuContainer.displayName="ContextMenuContainer";try{ContextMenuButton.displayName="ContextMenuButton",ContextMenuButton.__docgenInfo={description:"",displayName:"ContextMenuButton",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ContextMenu.tsx#ContextMenuButton"]={docgenInfo:ContextMenuButton.__docgenInfo,name:"ContextMenuButton",path:"src/ui/ContextMenu.tsx#ContextMenuButton"})}catch(__react_docgen_typescript_loader_error){}try{ContextMenuFooter.displayName="ContextMenuFooter",ContextMenuFooter.__docgenInfo={description:"",displayName:"ContextMenuFooter",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ContextMenu.tsx#ContextMenuFooter"]={docgenInfo:ContextMenuFooter.__docgenInfo,name:"ContextMenuFooter",path:"src/ui/ContextMenu.tsx#ContextMenuFooter"})}catch(__react_docgen_typescript_loader_error){}try{ContextMenu_ContextMenuContainer.displayName="ContextMenuContainer",ContextMenu_ContextMenuContainer.__docgenInfo={description:"",displayName:"ContextMenuContainer",props:{zoom:{defaultValue:{value:"1"},description:"",name:"zoom",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ContextMenu.tsx#ContextMenuContainer"]={docgenInfo:ContextMenu_ContextMenuContainer.__docgenInfo,name:"ContextMenuContainer",path:"src/ui/ContextMenu.tsx#ContextMenuContainer"})}catch(__react_docgen_typescript_loader_error){}function Game_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Game_Game=function(){function Game(scene){!function Game_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Game),this.contextMenu=new ContextMenu_ContextMenuManager,this.scene=void 0,this.scene=scene}return function Game_createClass(Constructor,protoProps,staticProps){return protoProps&&Game_defineProperties(Constructor.prototype,protoProps),staticProps&&Game_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Game,[{key:"destroy",value:function destroy(){Logger.a.group("Destroy "+this.constructor.name),this.scene.destroy(),Logger.a.groupEnd()}}]),Game}(),CivilianPersonEntity=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./src/entities/CivilianPersonEntity.tsx")),GuardPersonEntity=__webpack_require__("./src/entities/GuardPersonEntity.tsx"),seedrandom=(__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/seedrandom/index.js")),seedrandom_default=__webpack_require__.n(seedrandom);function Random_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Random_Random=function(){function Random(){!function Random_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Random)}return function Random_createClass(Constructor,protoProps,staticProps){return protoProps&&Random_defineProperties(Constructor.prototype,protoProps),staticProps&&Random_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Random,null,[{key:"float",value:function float(){for(var _len=arguments.length,seed=new Array(_len),_key=0;_key<_len;_key++)seed[_key]=arguments[_key];return seedrandom_default()(seed.join("/")).double()}},{key:"fromArray",value:function fromArray(arr){for(var _len2=arguments.length,seed=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)seed[_key2-1]=arguments[_key2];var index=Math.floor(this.float.apply(this,seed)*arr.length);return arr[index]}}]),Random}();function Job_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Job=function(){function Job(entity){!function Job_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Job),this.entity=void 0,this.entity=entity}return function Job_createClass(Constructor,protoProps,staticProps){return protoProps&&Job_defineProperties(Constructor.prototype,protoProps),staticProps&&Job_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Job,[{key:"label",get:function get(){throw new Error("Not implemented for "+this.constructor.name)}},{key:"start",value:function start(){throw new Error("Not implemented for "+this.constructor.name)}},{key:"destroy",value:function destroy(){throw new Error("Not implemented for "+this.constructor.name)}}]),Job}();function LoiterJob_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function LoiterJob_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var LoiterJob_LoiterJob=function(_Job){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(LoiterJob,_Job);var _super=_createSuper(LoiterJob);function LoiterJob(){var _this;LoiterJob_classCallCheck(this,LoiterJob);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).destroyers=[],_this.walkMinWait=4e3,_this.walkMaxWait=15e3,_this.walkChanceOnRoll=.3,_this.walkMaxDistance=3,_this}return function LoiterJob_createClass(Constructor,protoProps,staticProps){return protoProps&&LoiterJob_defineProperties(Constructor.prototype,protoProps),staticProps&&LoiterJob_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LoiterJob,[{key:"label",get:function get(){return"Loitering"}},{key:"start",value:function start(){var _this2=this,steps=0,timer=null,doTimeout=function doTimeout(){if(timer)throw new Error("Timer for LoiterJob already exists");timer=setTimeout((function(){var _this2$entity$locatio,_this2$entity$locatio2;if(timer=null,Math.random()>_this2.walkChanceOnRoll)doTimeout();else{steps++;var destinations=(null===(_this2$entity$locatio=_this2.entity.location)||void 0===_this2$entity$locatio||null===(_this2$entity$locatio2=_this2$entity$locatio.terrain)||void 0===_this2$entity$locatio2?void 0:_this2$entity$locatio2.selectClosestTiles(_this2.entity.location,_this2.walkMaxDistance))||[];_this2.entity.walkTo(Random_Random.fromArray(destinations,_this2.entity.id,"roam-destination",steps))}}),_this2.walkMinWait+Random_Random.float(_this2.entity.id,"roam-delay",steps)*(_this2.walkMaxWait-_this2.walkMinWait))};this.destroyers.push(this.entity.$stoppedWalking.on(doTimeout)),this.destroyers.push((function(){timer&&clearTimeout(timer)})),doTimeout()}},{key:"destroy",value:function destroy(){Logger.a.log("Destroy "+this.constructor.name),this.destroyers.forEach((function(destroy){return destroy()}))}}]),LoiterJob}(Job);function PatrolJob_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PatrolJob_setPrototypeOf(o,p){return PatrolJob_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},PatrolJob_setPrototypeOf(o,p)}function PatrolJob_createSuper(Derived){var hasNativeReflectConstruct=function PatrolJob_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PatrolJob_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PatrolJob_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PatrolJob_possibleConstructorReturn(this,result)}}function PatrolJob_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PatrolJob_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PatrolJob_getPrototypeOf(o){return PatrolJob_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PatrolJob_getPrototypeOf(o)}var PatrolJob_PatrolJob=function(_Job){!function PatrolJob_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PatrolJob_setPrototypeOf(subClass,superClass)}(PatrolJob,_Job);var _super=PatrolJob_createSuper(PatrolJob);function PatrolJob(entity,waypoints){var _this;if(function PatrolJob_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PatrolJob),(_this=_super.call(this,entity)).destroyers=[],_this.waypoints=void 0,_this.waypointIndex=void 0,waypoints.length<2)throw new Error("A patrol must have at least 2 waypoints");return _this.waypoints=waypoints,_this.waypointIndex=0,_this}return function PatrolJob_createClass(Constructor,protoProps,staticProps){return protoProps&&PatrolJob_defineProperties(Constructor.prototype,protoProps),staticProps&&PatrolJob_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PatrolJob,[{key:"label",get:function get(){return"Patrolling between "+this.waypoints.length+" waypoints"}},{key:"start",value:function start(){var _this2=this;this.destroyers.push(this.entity.$stoppedWalking.on((function(){setTimeout((function(){_this2.waypointIndex+=1;var next=_this2.waypoints[_this2.waypointIndex%_this2.waypoints.length];_this2.entity.walkTo(next)}),3e3)}))),this.entity.walkTo(this.waypoints[0])}},{key:"destroy",value:function destroy(){Logger.a.log("Destroy "+this.constructor.name),this.destroyers.forEach((function(destroy){return destroy()}))}}]),PatrolJob}(Job);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return generateEntities_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function generateEntities_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return generateEntities_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return generateEntities_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function generateEntities_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function repeat(n,cb){return Array.from(new Array(n)).map((function(_,i){return cb(i)}))}function generateEntities(seed,terrain){var walkableTiles=terrain.tiles.filter((function(c){return c.isLand()}));if(!walkableTiles.length)throw new Error("The terrain does not contain any walkable tiles!");return[].concat(_toConsumableArray(repeat(5,(function(i){var id=seed+"-guard-"+i,start=Random_Random.fromArray(walkableTiles,id,"start"),guard=new GuardPersonEntity.a(id,start),job=function generatePatrolJob(seed,entity){var _start$terrain,start=entity.location,island=null==start||null===(_start$terrain=start.terrain)||void 0===_start$terrain?void 0:_start$terrain.getIslands((function(t){return t.isLand()})).find((function(island){return island.includes(start)}));if(!start||!island)throw new Error("Got falsy start from none of the islands");return new PatrolJob_PatrolJob(entity,[].concat(_toConsumableArray(repeat(2+Math.floor(4*Random_Random.float(entity.id,"job","waypoint_amount")),(function(i){return Random_Random.fromArray(island,entity.id,"job","waypoint",i)}))),[start]))}(0,guard);return guard.doJob(job),guard}))),_toConsumableArray(repeat(10,(function(i){var id=seed+"-person-"+i,start=Random_Random.fromArray(walkableTiles,id,"start"),worker=new CivilianPersonEntity.a(id,start);return worker.doJob(new LoiterJob_LoiterJob(worker)),worker}))))}__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.some.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var create=__webpack_require__("./node_modules/@redblobgames/dual-mesh/create.js"),create_default=__webpack_require__.n(create),poisson_disk_sampling=__webpack_require__("./node_modules/poisson-disk-sampling/src/poisson-disk-sampling.js"),poisson_disk_sampling_default=__webpack_require__.n(poisson_disk_sampling),Coordinate=(__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./src/classes/Coordinate.ts")),PERSPECTIVE=(__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./src/space/PERSPECTIVE.ts")),styles=__webpack_require__("./src/styles.ts"),_excluded=(__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),["tile"]);function DualMeshTileC_toConsumableArray(arr){return function DualMeshTileC_arrayWithoutHoles(arr){if(Array.isArray(arr))return DualMeshTileC_arrayLikeToArray(arr)}(arr)||function DualMeshTileC_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||DualMeshTileC_unsupportedIterableToArray(arr)||function DualMeshTileC_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DualMeshTileC_slicedToArray(arr,i){return function DualMeshTileC_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function DualMeshTileC_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||DualMeshTileC_unsupportedIterableToArray(arr,i)||function DualMeshTileC_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DualMeshTileC_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return DualMeshTileC_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DualMeshTileC_arrayLikeToArray(o,minLen):void 0}}function DualMeshTileC_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var TERRAIN_FILL=styles.a.terrain.string(),TERRAIN_FILL_HIGHLIGHTED=styles.a.beach.string(),TERRAIN_STROKE=styles.a.terrainStroke.string(),TERRAIN_STROKE_WATER=styles.a.terrainStroke.opaquer(-.8).string(),DualMeshTileC_DualMeshTileC=function DualMeshTileC(_ref){var tile=_ref.tile,svgProps=_objectWithoutProperties(_ref,_excluded),_useState2=DualMeshTileC_slicedToArray(Object(react.useState)(!1),2),isHovered=_useState2[0],setIsHovered=_useState2[1],points=Object(react.useMemo)((function(){if(tile.isLand()||tile.isAdjacentToLand()){var outline=tile.getOutlineCoordinates(),points=[].concat(DualMeshTileC_toConsumableArray(outline),[outline[0]]).map((function(n){return PERSPECTIVE.a.toPixels(tile.x+n.x,tile.y+n.y,tile.z+n.z).join(",")})).join(" ");return Object(jsx_runtime.jsx)("polygon",{points:points})}}),[tile]);return points?Object(jsx_runtime.jsx)("g",Object.assign({className:"dual-mesh-tile",fill:tile.isLand()?isHovered?TERRAIN_FILL_HIGHLIGHTED:TERRAIN_FILL:"transparent",stroke:tile.isLand()?TERRAIN_STROKE:TERRAIN_STROKE_WATER},svgProps,{onMouseEnter:function onMouseEnter(){return setIsHovered(!0)},onMouseLeave:function onMouseLeave(){return setIsHovered(!1)},children:points})):null};DualMeshTileC_DualMeshTileC.displayName="DualMeshTileC";try{DualMeshTileC_DualMeshTileC.displayName="DualMeshTileC",DualMeshTileC_DualMeshTileC.__docgenInfo={description:"",displayName:"DualMeshTileC",props:{tile:{defaultValue:null,description:"",name:"tile",required:!0,type:{name:"TileI"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/terrain/DualMeshTileC.tsx#DualMeshTileC"]={docgenInfo:DualMeshTileC_DualMeshTileC.__docgenInfo,name:"DualMeshTileC",path:"src/terrain/DualMeshTileC.tsx#DualMeshTileC"})}catch(__react_docgen_typescript_loader_error){}function DualMeshTerrainC_slicedToArray(arr,i){return function DualMeshTerrainC_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function DualMeshTerrainC_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function DualMeshTerrainC_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DualMeshTerrainC_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DualMeshTerrainC_arrayLikeToArray(o,minLen)}(arr,i)||function DualMeshTerrainC_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DualMeshTerrainC_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var DualMeshTerrainC_DualMeshTerrainC=function DualMeshTerrainC(_ref){var terrain=_ref.terrain,onTileClick=_ref.onTileClick,onTileContextMenu=_ref.onTileContextMenu,pathElements=Object(react.useMemo)((function(){var seen=[];return terrain.tiles.reduce((function(connections,origin){return seen.push(origin),origin.isLand()?connections.concat(terrain.getNeighborTiles(origin).filter((function(target){return target.isLand()})).filter((function(target){return!seen.includes(target)})).map((function(target){return[origin,target]}))):connections}),[]).map((function(coords){return coords.map((function(c){return PERSPECTIVE.a.toPixels(c.x,c.y,c.z)}))})).map((function(_ref2){var _ref3=DualMeshTerrainC_slicedToArray(_ref2,2),origin=_ref3[0],target=_ref3[1];return Object(jsx_runtime.jsx)("line",{x1:origin[0],y1:origin[1],x2:target[0],y2:target[1],stroke:styles.a.terrainStroke.opaquer(-.6).string(),strokeDasharray:"3"},origin+"x"+target)}))}),[terrain]),terrainElements=Object(react.useMemo)((function(){return terrain.getTilesInRenderOrder().map((function(tile){return Object(jsx_runtime.jsx)(DualMeshTileC_DualMeshTileC,{tile:tile,onClick:onTileClick?function(event){event.preventDefault(),event.stopPropagation(),onTileClick(event,tile)}:onTileClick,onContextMenu:onTileContextMenu?function(event){event.preventDefault(),onTileContextMenu(event,tile)}:onTileContextMenu},tile.toString())}))}),[terrain,onTileClick,onTileContextMenu]);return Object(jsx_runtime.jsxs)("g",{className:"dual-mesh-terrain",children:[Object(jsx_runtime.jsx)("g",{className:"dual-mesh-terrain__tiles",children:terrainElements}),Object(jsx_runtime.jsx)("g",{className:"dual-mesh-terrain__paths",children:pathElements})]})};DualMeshTerrainC_DualMeshTerrainC.displayName="DualMeshTerrainC";__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.sort.js");function GenericTerrain_toConsumableArray(arr){return function GenericTerrain_arrayWithoutHoles(arr){if(Array.isArray(arr))return GenericTerrain_arrayLikeToArray(arr)}(arr)||function GenericTerrain_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function GenericTerrain_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return GenericTerrain_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GenericTerrain_arrayLikeToArray(o,minLen)}(arr)||function GenericTerrain_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GenericTerrain_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function GenericTerrain_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var GenericTerrain_GenericTerrain=function(){function GenericTerrain(tiles){!function GenericTerrain_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GenericTerrain),this.tiles=[],this.islands=new Map,this._tilesInRenderOrder=null,this.Component=function(){throw new Error("Not implemented")},this.tiles=tiles}return function GenericTerrain_createClass(Constructor,protoProps,staticProps){return protoProps&&GenericTerrain_defineProperties(Constructor.prototype,protoProps),staticProps&&GenericTerrain_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(GenericTerrain,[{key:"selectContiguousTiles",value:function selectContiguousTiles(start){for(var selector=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(c){return c.isLand()},inclusive=arguments.length>2?arguments[2]:void 0,island=[],seen=[],queue=[start];queue.length;){var current=queue.shift();(inclusive||current!==start)&&island.push(current);var neighbours=this.getNeighborTiles(current).filter((function(n){return!seen.includes(n)}));seen.splice.apply(seen,[0,0,current].concat(GenericTerrain_toConsumableArray(neighbours))),queue.splice.apply(queue,[0,0].concat(GenericTerrain_toConsumableArray(neighbours.filter(selector))))}return island}},{key:"selectClosestTiles",value:function selectClosestTiles(start,maxDistance){return this.selectContiguousTiles(start,(function(other){return other.isLand()&&start.euclideanDistanceTo(other)<=maxDistance}),!1)}},{key:"getIslands",value:function getIslands(){var _this=this,selector=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t.isLand()},fromCache=this.islands.get(selector);if(fromCache)return fromCache;for(var open=this.tiles.slice(),islands=[],_loop=function _loop(){var next=open.shift();if(!selector(next))return"continue";var island=_this.selectContiguousTiles(next,selector,!0);open=open.filter((function(n){return!island.includes(n)})),islands.push(island)};open.length;)_loop();return this.islands.set(selector,islands),islands}},{key:"getTilesInRenderOrder",value:function getTilesInRenderOrder(){return this._tilesInRenderOrder||(this._tilesInRenderOrder=this.tiles.slice().sort(PERSPECTIVE.b)),this._tilesInRenderOrder}},{key:"getTileClosestToXy",value:function getTileClosestToXy(x,y){throw new Error("Not implemented")}},{key:"getNeighborTiles",value:function getNeighborTiles(center){return this.tiles.filter((function(tile){return 1===center.manhattanDistanceTo(tile)}))}}],[{key:"generateRandom",value:function generateRandom(seed,size){throw new Error("Not implemented")}}]),GenericTerrain}();function DualMeshTerrain_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DualMeshTerrain_setPrototypeOf(o,p){return DualMeshTerrain_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},DualMeshTerrain_setPrototypeOf(o,p)}function DualMeshTerrain_createSuper(Derived){var hasNativeReflectConstruct=function DualMeshTerrain_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DualMeshTerrain_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DualMeshTerrain_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DualMeshTerrain_possibleConstructorReturn(this,result)}}function DualMeshTerrain_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return DualMeshTerrain_assertThisInitialized(self)}function DualMeshTerrain_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DualMeshTerrain_getPrototypeOf(o){return DualMeshTerrain_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DualMeshTerrain_getPrototypeOf(o)}var DualMeshTerrain_DualMeshTerrain=function(_GenericTerrain){!function DualMeshTerrain_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DualMeshTerrain_setPrototypeOf(subClass,superClass)}(DualMeshTerrain,_GenericTerrain);var _super=DualMeshTerrain_createSuper(DualMeshTerrain);function DualMeshTerrain(tiles){var _this;return function DualMeshTerrain_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DualMeshTerrain),(_this=_super.call(this,tiles)).Component=DualMeshTerrainC_DualMeshTerrainC,_this.tiles.forEach((function(coordinate,i){coordinate.terrain=DualMeshTerrain_assertThisInitialized(_this)})),_this}return function DualMeshTerrain_createClass(Constructor,protoProps,staticProps){return protoProps&&DualMeshTerrain_defineProperties(Constructor.prototype,protoProps),staticProps&&DualMeshTerrain_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DualMeshTerrain,[{key:"getTileClosestToXy",value:function getTileClosestToXy(x,y){var center=new Coordinate.a(x,y,0),_this$tiles$reduce=this.tiles.reduce((function(last,tile){var distance=center.euclideanDistanceTo(tile);return distance<last.distance?{distance:distance,tile:tile}:last}),{distance:1/0}),tile=_this$tiles$reduce.tile;if(!tile)throw new Error("No tiles, "+this.tiles.length);return tile}},{key:"getNeighborTiles",value:function getNeighborTiles(center){return center.neighbors||[]}}]),DualMeshTerrain}(GenericTerrain_GenericTerrain);function DualMeshTile_slicedToArray(arr,i){return function DualMeshTile_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function DualMeshTile_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function DualMeshTile_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DualMeshTile_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DualMeshTile_arrayLikeToArray(o,minLen)}(arr,i)||function DualMeshTile_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DualMeshTile_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function DualMeshTile_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DualMeshTile_setPrototypeOf(o,p){return DualMeshTile_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},DualMeshTile_setPrototypeOf(o,p)}function DualMeshTile_createSuper(Derived){var hasNativeReflectConstruct=function DualMeshTile_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DualMeshTile_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DualMeshTile_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DualMeshTile_possibleConstructorReturn(this,result)}}function DualMeshTile_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DualMeshTile_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DualMeshTile_getPrototypeOf(o){return DualMeshTile_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DualMeshTile_getPrototypeOf(o)}var DualMeshTile_DualMeshTile=function(_GenericTile){!function DualMeshTile_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DualMeshTile_setPrototypeOf(subClass,superClass)}(DualMeshTile,_GenericTile);var _super=DualMeshTile_createSuper(DualMeshTile);function DualMeshTile(x,y,z,points,anyPointIsAdjacentToEdge){var _this;return function DualMeshTile_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DualMeshTile),(_this=_super.call(this,x,y,z)).neighbors=[],_this._outlinePoints=[],_this._isGhost=void 0,_this._isLand=void 0,_this.addOutlineFromCirculation(points,anyPointIsAdjacentToEdge),_this}return function DualMeshTile_createClass(Constructor,protoProps,staticProps){return protoProps&&DualMeshTile_defineProperties(Constructor.prototype,protoProps),staticProps&&DualMeshTile_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DualMeshTile,[{key:"addOutlineFromCirculation",value:function addOutlineFromCirculation(points,anyPointIsAdjacentToEdge){var _this2=this;points.forEach((function(_ref){var _ref2=DualMeshTile_slicedToArray(_ref,2),x=_ref2[0],y=_ref2[1];_this2._outlinePoints.push(new Coordinate.a(x-_this2.x,y-_this2.y,0))})),this._isGhost=anyPointIsAdjacentToEdge}},{key:"getOutlineCoordinates",value:function getOutlineCoordinates(){return this._outlinePoints}},{key:"isLand",value:function isLand(){return void 0===this._isLand&&(this._isLand=this.z>=0&&!function r(item,maxDepth){return!!item.isAdjacentToEdge()||!(maxDepth<=0)&&(--maxDepth,item.neighbors.some((function(n){return r(n,maxDepth)}))||!1)}(this,4)),this._isLand}},{key:"isAdjacentToLand",value:function isAdjacentToLand(){return this.neighbors.some((function(n){return n.isLand()}))}},{key:"isAdjacentToEdge",value:function isAdjacentToEdge(){return!!this._isGhost}}]),DualMeshTile}(__webpack_require__("./src/terrain/GenericTile.ts").a);function _construct(Parent,args,Class){return _construct=generateDualMeshTerrain_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&generateDualMeshTerrain_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function generateDualMeshTerrain_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function generateDualMeshTerrain_setPrototypeOf(o,p){return generateDualMeshTerrain_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},generateDualMeshTerrain_setPrototypeOf(o,p)}function generateDualMeshTerrain_toConsumableArray(arr){return function generateDualMeshTerrain_arrayWithoutHoles(arr){if(Array.isArray(arr))return generateDualMeshTerrain_arrayLikeToArray(arr)}(arr)||function generateDualMeshTerrain_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function generateDualMeshTerrain_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return generateDualMeshTerrain_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return generateDualMeshTerrain_arrayLikeToArray(o,minLen)}(arr)||function generateDualMeshTerrain_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function generateDualMeshTerrain_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function generateDualMeshTerrain(seed,size){var density=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0,poisson=new poisson_disk_sampling_default.a({shape:[size,size],minDistance:1/density},(function(){return Random_Random.float(seed+"/"+ ++i)})),meshBuilder=new create_default.a({boundarySpacing:1});meshBuilder.points.forEach((function(p){return poisson.addPoint(p)})),meshBuilder.points=poisson.fill().map((function(xy,i){return[].concat(generateDualMeshTerrain_toConsumableArray(xy),[.4*(-.2+Random_Random.float.apply(Random_Random,[seed].concat(generateDualMeshTerrain_toConsumableArray(xy))))])}));var mesh=meshBuilder.create(),tiles=meshBuilder.points.map((function(coordinates,i){var outline=mesh.r_circulate_t([],i);return _construct(DualMeshTile_DualMeshTile,generateDualMeshTerrain_toConsumableArray(coordinates).concat([outline.map((function(i){return[mesh.t_x(i),mesh.t_y(i)]})),outline.some((function(index){return mesh.t_ghost(index)}))]))})).map((function(tile,i,tiles){return mesh.r_circulate_r([],i).map((function(x){return tiles[x]})).filter(Boolean).forEach((function(neighbor){tile.neighbors.push(neighbor)})),tile})).filter(Boolean),terrain=new DualMeshTerrain_DualMeshTerrain(tiles);return terrain}var Overlay_templateObject,PersonEntity=__webpack_require__("./src/entities/PersonEntity.tsx"),PersonEntityC=__webpack_require__("./src/entities/PersonEntityC.tsx"),ActiveEntityOverlay=__webpack_require__("./src/ui/ActiveEntityOverlay.tsx");var Overlay=styled_browser_esm.a.section(Overlay_templateObject||(Overlay_templateObject=function Overlay_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\tposition: absolute;\n\tbottom: 2em;\n\tleft: 2em;\n\n\tfont-family: sans-serif;\n\tcolor: white;\n\n\ta {\n\t\tcolor: inherit;\n\t}\n"])));try{Overlay.displayName="Overlay",Overlay.__docgenInfo={description:"",displayName:"Overlay",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/Overlay.tsx#Overlay"]={docgenInfo:Overlay.__docgenInfo,name:"Overlay",path:"src/ui/Overlay.tsx#Overlay"})}catch(__react_docgen_typescript_loader_error){}function GameApplication_slicedToArray(arr,i){return function GameApplication_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function GameApplication_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function GameApplication_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return GameApplication_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GameApplication_arrayLikeToArray(o,minLen)}(arr,i)||function GameApplication_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GameApplication_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function fancyTimeFormat(seconds){return~~(seconds%3600/60)+"′ "+Math.floor(seconds%60)+"″"}var DualMesh_templateObject,GameApplication_GameApplication=function GameApplication(_ref){var game=_ref.game,initialViewportCenter=_ref.initialViewportCenter,scene=game.scene,contextMenu=game.contextMenu,_useState2=GameApplication_slicedToArray(Object(react.useState)(initialViewportCenter),2),center=_useState2[0],setCenter=_useState2[1],_useState4=GameApplication_slicedToArray(Object(react.useState)(void 0),2),activeEntity=_useState4[0],setActiveEntity=_useState4[1],terrain=Object(react.useMemo)((function(){return Object(jsx_runtime.jsx)(DualMeshTerrainC_DualMeshTerrainC,{terrain:scene.terrain,onTileClick:function onTileClick(event,tile){var x,y;contextMenu.open(tile,Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(ContextMenuButton,{onClick:function onClick(){return setCenter(tile)},children:"Center camera"}),Object(jsx_runtime.jsx)(ContextMenuButton,{onClick:function onClick(){Logger.a.group("Tile "+tile),Logger.a.log(tile),Logger.a.groupEnd()},children:"Show in console"}),Object(jsx_runtime.jsx)(ContextMenuFooter,{children:(x=tile.x,y=tile.y,"40° "+fancyTimeFormat(1e3-13*x)+" N 79° "+fancyTimeFormat(700-13*y)+" W")})]}))},onTileContextMenu:function onTileContextMenu(event,tile){setCenter(tile)}})}),[scene,contextMenu]),entities=Object(react.useMemo)((function(){return scene.entities.filter((function(entity){return entity instanceof PersonEntity.a})).map((function(entity){return Object(jsx_runtime.jsx)(PersonEntityC.a,{entity:entity,onClick:function onClick(event){event.preventDefault(),setActiveEntity(entity)}},entity.id)}))}),[scene.entities]);return Object(react.useEffect)((function(){var cb=function cb(){contextMenu.close()};return window.addEventListener("click",cb),function(){return window.removeEventListener("click",cb)}}),[contextMenu]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)(Viewport.a,{center:center,zoom:1,overlay:Object(jsx_runtime.jsx)(ContextMenu_ContextMenuContainer,{zoom:1}),children:[Object(jsx_runtime.jsx)("g",{id:"scene__terrain",children:terrain}),Object(jsx_runtime.jsx)("g",{id:"scene__entities",children:entities})]}),Object(jsx_runtime.jsxs)(Overlay,{children:[Object(jsx_runtime.jsx)(ActiveEntityOverlay.a,{entity:activeEntity}),Object(jsx_runtime.jsxs)("p",{style:{fontSize:"0.8em",opacity:"0.5"},children:[Object(jsx_runtime.jsx)("a",{href:"https://github.com/wvbe/kreuzzeug-im-nagelhosen",target:"_blank",rel:"noreferrer",children:"GitHub"}),"    ","Seed: ",scene.seed]})]})]})};try{GameApplication_GameApplication.displayName="GameApplication",GameApplication_GameApplication.__docgenInfo={description:"",displayName:"GameApplication",props:{game:{defaultValue:null,description:"",name:"game",required:!0,type:{name:"Game"}},initialViewportCenter:{defaultValue:null,description:"",name:"initialViewportCenter",required:!0,type:{name:"TileI"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/GameApplication.tsx#GameApplication"]={docgenInfo:GameApplication_GameApplication.__docgenInfo,name:"GameApplication",path:"src/ui/GameApplication.tsx#GameApplication"})}catch(__react_docgen_typescript_loader_error){}var globalStyleRules=Object(emotion_react_browser_esm.b)(DualMesh_templateObject||(DualMesh_templateObject=function DualMesh_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\tp {\n\t\tmargin: 0;\n\t}\n"])));function GameRoute(){var gameApplicationProps=Object(react.useMemo)((function(){return function generateEverything(){var seed=arguments.length>0&&void 0!==arguments[0]?arguments[0]:String(Date.now()),size=24,terrain=generateDualMeshTerrain(seed,size,1),entities=generateEntities(seed,terrain),scene=new Scene_Scene(seed,terrain,entities),game=new Game_Game(scene),initialViewportCenter=game.scene.terrain.getTileClosestToXy(Math.floor(size/2),Math.floor(size/2));return{game:game,initialViewportCenter:initialViewportCenter}}()}),[]);return Object(react.useEffect)((function(){return gameApplicationProps.game.scene.play(),function(){return gameApplicationProps.game.destroy()}}),[gameApplicationProps.game]),Object(jsx_runtime.jsx)(GameContext.Provider,{value:gameApplicationProps.game,children:Object(jsx_runtime.jsx)(GameApplication_GameApplication,Object.assign({},gameApplicationProps))})}GameRoute.displayName="GameRoute";var DualMesh_Demo=function Demo(){return Object(jsx_runtime.jsxs)(react_default.a.StrictMode,{children:[Object(jsx_runtime.jsx)(emotion_react_browser_esm.a,{styles:globalStyleRules}),Object(jsx_runtime.jsx)(GameRoute,{})]})};DualMesh_Demo.displayName="Demo";var scenarios_DualMesh=DualMesh_Demo;try{DualMesh.displayName="DualMesh",DualMesh.__docgenInfo={description:"",displayName:"DualMesh",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/scenarios/DualMesh.tsx#DualMesh"]={docgenInfo:DualMesh.__docgenInfo,name:"DualMesh",path:"src/scenarios/DualMesh.tsx#DualMesh"})}catch(__react_docgen_typescript_loader_error){}var scenarios={DualMesh:scenarios_DualMesh},Demo_stories_DualMesh=(__webpack_exports__.default={title:"Demo",argTypes:{children:{control:{type:"text"}}},parameters:{controls:{expanded:!0}}},function DualMesh(args){return Object(jsx_runtime.jsx)(scenarios.DualMesh,Object.assign({},args))});Demo_stories_DualMesh.displayName="DualMesh",Demo_stories_DualMesh.parameters=Object.assign({storySource:{source:"args => <scenarios.DualMesh {...args} />"}},Demo_stories_DualMesh.parameters);try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Demo.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/Demo.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./stories/Objects.PersonEntity.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"civilianPerson",(function(){return civilianPerson})),__webpack_require__.d(__webpack_exports__,"guardPerson",(function(){return guardPerson}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _src_entities_CivilianPersonEntity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/entities/CivilianPersonEntity.tsx"),_src_entities_GuardPersonEntity__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/entities/GuardPersonEntity.tsx"),_src_entities_PersonEntityC__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/entities/PersonEntityC.tsx"),_src_scenarios_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/scenarios/util.tsx"),_src_space_Viewport__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/space/Viewport.tsx"),_src_terrain_GenericTile__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/terrain/GenericTile.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/jsx-runtime.js"),meta={title:"Objects/Entities",component:_src_entities_PersonEntityC__WEBPACK_IMPORTED_MODULE_4__.a,argTypes:{},parameters:{controls:{expanded:!0}}};__webpack_exports__.default=meta;var civilianPerson=function civilianPerson(args){var entity=new _src_entities_CivilianPersonEntity__WEBPACK_IMPORTED_MODULE_2__.a("test",new _src_terrain_GenericTile__WEBPACK_IMPORTED_MODULE_7__.a(0,0,0));return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_src_scenarios_util__WEBPACK_IMPORTED_MODULE_5__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_src_space_Viewport__WEBPACK_IMPORTED_MODULE_6__.a,{zoom:1,center:{x:0,y:0,z:0},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(entity.Component,{})})})};civilianPerson.displayName="civilianPerson";var guardPerson=function guardPerson(args){var entity=new _src_entities_GuardPersonEntity__WEBPACK_IMPORTED_MODULE_3__.a("test",new _src_terrain_GenericTile__WEBPACK_IMPORTED_MODULE_7__.a(0,0,0));return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_src_scenarios_util__WEBPACK_IMPORTED_MODULE_5__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_src_space_Viewport__WEBPACK_IMPORTED_MODULE_6__.a,{zoom:1,center:{x:0,y:0,z:0},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(entity.Component,{})})})};guardPerson.displayName="guardPerson",civilianPerson.parameters=Object.assign({storySource:{source:"args => {\n\tconst entity = new CivilianEntity('test', new GenericTile(0, 0, 0));\n\treturn (\n\t\t<Backdrop>\n\t\t\t<Viewport zoom={1} center={{ x: 0, y: 0, z: 0 }}>\n\t\t\t\t<entity.Component />\n\t\t\t</Viewport>\n\t\t</Backdrop>\n\t);\n}"}},civilianPerson.parameters),guardPerson.parameters=Object.assign({storySource:{source:"args => {\n\tconst entity = new GuardEntity('test', new GenericTile(0, 0, 0));\n\treturn (\n\t\t<Backdrop>\n\t\t\t<Viewport zoom={1} center={{ x: 0, y: 0, z: 0 }}>\n\t\t\t\t<entity.Component />\n\t\t\t</Viewport>\n\t\t</Backdrop>\n\t);\n}"}},guardPerson.parameters);try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Objects.PersonEntity.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/Objects.PersonEntity.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./stories/Objects.SimpleCube.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"differentColors",(function(){return differentColors})),__webpack_require__.d(__webpack_exports__,"differentSizes",(function(){return differentSizes})),__webpack_require__.d(__webpack_exports__,"adjacentBoxes",(function(){return adjacentBoxes}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var color__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/color/index.js"),color__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_1__),_src_scenarios_util__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/scenarios/util.tsx")),_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/space/Anchor.tsx"),_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/space/SimpleCube.tsx"),_src_space_Viewport__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/space/Viewport.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js"),meta={title:"Objects/SimpleCube",component:_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,argTypes:{},parameters:{controls:{expanded:!0}}};__webpack_exports__.default=meta;var differentColors=function differentColors(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_scenarios_util__WEBPACK_IMPORTED_MODULE_3__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_src_space_Viewport__WEBPACK_IMPORTED_MODULE_6__.a,{zoom:1,center:{x:.5,y:.5,z:.5},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:-2,y:-2,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:0,y:0,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{innerStroke:color__WEBPACK_IMPORTED_MODULE_1___default()("#630a0a7d"),fill:color__WEBPACK_IMPORTED_MODULE_1___default()("#960202")})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:2,y:2,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{fill:color__WEBPACK_IMPORTED_MODULE_1___default()("#ffffff7f"),onClick:function onClick(){return window.alert("Clicky click!")}})})]})})};differentColors.displayName="differentColors";var differentSizes=function differentSizes(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_scenarios_util__WEBPACK_IMPORTED_MODULE_3__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_src_space_Viewport__WEBPACK_IMPORTED_MODULE_6__.a,{center:{x:5,y:0,z:.5},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:0,y:0,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{size:.1})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:2,y:0,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{size:.5})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:4,y:0,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{size:1})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:6,y:0,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{size:2})})]})})};differentSizes.displayName="differentSizes";var adjacentBoxes=function adjacentBoxes(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_scenarios_util__WEBPACK_IMPORTED_MODULE_3__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_src_space_Viewport__WEBPACK_IMPORTED_MODULE_6__.a,{center:{x:1,y:0,z:.5},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:0,y:0,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:1,y:0,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:2,y:0,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_Anchor__WEBPACK_IMPORTED_MODULE_4__.a,{x:2,y:-1,z:0,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_src_space_SimpleCube__WEBPACK_IMPORTED_MODULE_5__.a,{})})]})})};adjacentBoxes.displayName="adjacentBoxes",differentColors.parameters=Object.assign({storySource:{source:"args => (\n\t<Backdrop>\n\t\t<Viewport zoom={1} center={{ x: 0.5, y: 0.5, z: 0.5 }}>\n\t\t\t<Anchor x={-2} y={-2} z={0}>\n\t\t\t\t<SimpleCube />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={0} y={0} z={0}>\n\t\t\t\t<SimpleCube innerStroke={Color('#630a0a7d')} fill={Color('#960202')} />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={2} y={2} z={0}>\n\t\t\t\t<SimpleCube\n\t\t\t\t\tfill={Color('#ffffff7f')}\n\t\t\t\t\tonClick={() => window.alert('Clicky click!')}\n\t\t\t\t/>\n\t\t\t</Anchor>\n\t\t</Viewport>\n\t</Backdrop>\n)"}},differentColors.parameters),differentSizes.parameters=Object.assign({storySource:{source:"args => (\n\t<Backdrop>\n\t\t<Viewport center={{ x: 5, y: 0, z: 0.5 }}>\n\t\t\t<Anchor x={0} y={0} z={0}>\n\t\t\t\t<SimpleCube size={0.1} />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={2} y={0} z={0}>\n\t\t\t\t<SimpleCube size={0.5} />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={4} y={0} z={0}>\n\t\t\t\t<SimpleCube size={1} />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={6} y={0} z={0}>\n\t\t\t\t<SimpleCube size={2} />\n\t\t\t</Anchor>\n\t\t</Viewport>\n\t</Backdrop>\n)"}},differentSizes.parameters),adjacentBoxes.parameters=Object.assign({storySource:{source:"args => (\n\t<Backdrop>\n\t\t<Viewport center={{ x: 1, y: 0, z: 0.5 }}>\n\t\t\t<Anchor x={0} y={0} z={0}>\n\t\t\t\t<SimpleCube />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={1} y={0} z={0}>\n\t\t\t\t<SimpleCube />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={2} y={0} z={0}>\n\t\t\t\t<SimpleCube />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={2} y={-1} z={0}>\n\t\t\t\t<SimpleCube />\n\t\t\t</Anchor>\n\t\t</Viewport>\n\t</Backdrop>\n)"}},adjacentBoxes.parameters);try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Objects.SimpleCube.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/Objects.SimpleCube.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./stories/Objects.SimpleRectangle.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"differentSizes",(function(){return Objects_SimpleRectangle_stories_differentSizes}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),util=__webpack_require__("./src/scenarios/util.tsx"),Anchor=__webpack_require__("./src/space/Anchor.tsx"),styles=(__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./src/styles.ts")),PERSPECTIVE=__webpack_require__("./src/space/PERSPECTIVE.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["width","length","height","fill","strokeLinecap","stroke","strokeWidth","innerStroke","innerStrokeWidth"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function coordsToPixels(coords){var borderWidth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return coords.map((function(coordinate){return PERSPECTIVE.a.toPixels.apply(PERSPECTIVE.a,_toConsumableArray(coordinate))})).map((function(cc){return cc.map((function(c){return c+borderWidth}))}))}var SimpleRectangle_SimpleRectangle=function SimpleRectangle(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?1:_ref$width,_ref$length=_ref.length,length=void 0===_ref$length?1:_ref$length,_ref$height=_ref.height,height=void 0===_ref$height?1:_ref$height,_ref$fill=_ref.fill,fill=void 0===_ref$fill?styles.a.terrain:_ref$fill,_ref$strokeLinecap=_ref.strokeLinecap,strokeLinecap=void 0===_ref$strokeLinecap?"round":_ref$strokeLinecap,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?null:_ref$stroke,_ref$strokeWidth=_ref.strokeWidth,strokeWidth=void 0===_ref$strokeWidth?1:_ref$strokeWidth,_ref$innerStroke=_ref.innerStroke,innerStroke=void 0===_ref$innerStroke?null:_ref$innerStroke,_ref$innerStrokeWidth=_ref.innerStrokeWidth,innerStrokeWidth=void 0===_ref$innerStrokeWidth?strokeWidth:_ref$innerStrokeWidth,gProps=_objectWithoutProperties(_ref,_excluded),_useMemo=Object(react.useMemo)((function(){var COORDINATE_CLOSEST_TO_CAMERA=PERSPECTIVE.a.toPixels(width,0,height).map((function(c){return c+0})),BORDER_NODES=coordsToPixels([[width,length,0],[width,length,height],[0,length,height],[0,0,height],[0,0,0],[width,0,0]]),XZ_NODES=coordsToPixels([[0,0,0],[0,0,height],[width,0,height],[width,0,0]]),YZ_NODES=coordsToPixels([[width,0,0],[width,length,0],[width,length,height],[width,0,height]]);return{COORDINATE_CLOSEST_TO_CAMERA:COORDINATE_CLOSEST_TO_CAMERA,BORDER_NODES:BORDER_NODES,XY_NODES:coordsToPixels([[0,0,height],[width,0,height],[width,length,height],[0,length,height]]),XZ_NODES:XZ_NODES,YZ_NODES:YZ_NODES}}),[width,length,height]),COORDINATE_CLOSEST_TO_CAMERA=_useMemo.COORDINATE_CLOSEST_TO_CAMERA,BORDER_NODES=_useMemo.BORDER_NODES,XY_NODES=_useMemo.XY_NODES,XZ_NODES=_useMemo.XZ_NODES,YZ_NODES=_useMemo.YZ_NODES,innerStrokeCss=innerStroke&&innerStroke.string(),strokeCss=stroke&&stroke.string(),style={};return(gProps.onClick||gProps.onContextMenu)&&(style.cursor="pointer"),Object(jsx_runtime.jsxs)("g",Object.assign({},gProps,{style:style,children:[fill&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("polygon",{points:XZ_NODES.map((function(c){return c.join(",")})).join(" "),fill:fill.string(),strokeWidth:0},"xz"),Object(jsx_runtime.jsx)("polygon",{points:XY_NODES.map((function(c){return c.join(",")})).join(" "),fill:fill.lighten(.2).string(),strokeWidth:0},"xy"),Object(jsx_runtime.jsx)("polygon",{points:YZ_NODES.map((function(c){return c.join(",")})).join(" "),fill:fill.darken(.2).string(),strokeWidth:0},"yz")]}),innerStroke&&innerStrokeWidth&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("line",{x1:COORDINATE_CLOSEST_TO_CAMERA[0],y1:COORDINATE_CLOSEST_TO_CAMERA[1],x2:BORDER_NODES[3][0],y2:BORDER_NODES[3][1],stroke:innerStrokeCss||void 0,strokeWidth:innerStrokeWidth,strokeLinecap:strokeLinecap},"x-bar"),Object(jsx_runtime.jsx)("line",{x1:COORDINATE_CLOSEST_TO_CAMERA[0],y1:COORDINATE_CLOSEST_TO_CAMERA[1],x2:BORDER_NODES[1][0],y2:BORDER_NODES[1][1],stroke:innerStrokeCss||void 0,strokeWidth:innerStrokeWidth,strokeLinecap:strokeLinecap},"y-bar"),Object(jsx_runtime.jsx)("line",{x1:COORDINATE_CLOSEST_TO_CAMERA[0],y1:COORDINATE_CLOSEST_TO_CAMERA[1],x2:BORDER_NODES[5][0],y2:BORDER_NODES[5][1],stroke:innerStrokeCss||void 0,strokeWidth:innerStrokeWidth,strokeLinecap:strokeLinecap},"z-bar")]}),stroke&&strokeWidth&&Object(jsx_runtime.jsx)("polygon",{points:BORDER_NODES.map((function(c){return c.join(",")})).join(" "),stroke:strokeCss||void 0,fill:"transparent",strokeWidth:strokeWidth,strokeLinecap:strokeLinecap},"outline")]}))};SimpleRectangle_SimpleRectangle.displayName="SimpleRectangle";try{SimpleRectangle_SimpleRectangle.displayName="SimpleRectangle",SimpleRectangle_SimpleRectangle.__docgenInfo={description:"",displayName:"SimpleRectangle",props:{width:{defaultValue:{value:"1"},description:"",name:"width",required:!1,type:{name:"number"}},length:{defaultValue:{value:"1"},description:"",name:"length",required:!1,type:{name:"number"}},height:{defaultValue:{value:"1"},description:"",name:"height",required:!1,type:{name:"number"}},strokeLinecap:{defaultValue:{value:"round"},description:"",name:"strokeLinecap",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"butt"'},{value:'"round"'},{value:'"square"'}]}},fill:{defaultValue:{value:"color.terrain"},description:"",name:"fill",required:!1,type:{name:"Color<ColorParam>"}},stroke:{defaultValue:{value:"null"},description:"",name:"stroke",required:!1,type:{name:"Color<ColorParam> | null"}},strokeWidth:{defaultValue:{value:"1"},description:"",name:"strokeWidth",required:!1,type:{name:"number"}},innerStrokeWidth:{defaultValue:{value:"1"},description:"",name:"innerStrokeWidth",required:!1,type:{name:"number"}},innerStroke:{defaultValue:{value:"null"},description:"",name:"innerStroke",required:!1,type:{name:"Color<ColorParam> | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/space/SimpleRectangle.tsx#SimpleRectangle"]={docgenInfo:SimpleRectangle_SimpleRectangle.__docgenInfo,name:"SimpleRectangle",path:"src/space/SimpleRectangle.tsx#SimpleRectangle"})}catch(__react_docgen_typescript_loader_error){}var Viewport=__webpack_require__("./src/space/Viewport.tsx"),meta={title:"Objects/SimpleRectangle",component:SimpleRectangle_SimpleRectangle,argTypes:{},parameters:{controls:{expanded:!0}}},Objects_SimpleRectangle_stories_differentSizes=(__webpack_exports__.default=meta,function differentSizes(args){return Object(jsx_runtime.jsx)(util.a,{children:Object(jsx_runtime.jsxs)(Viewport.a,{center:{x:3.75,y:3.75,z:.5},children:[Object(jsx_runtime.jsx)(Anchor.a,{x:0,y:0,z:0,children:Object(jsx_runtime.jsx)(SimpleRectangle_SimpleRectangle,{})}),Object(jsx_runtime.jsx)(Anchor.a,{x:2,y:2,z:0,children:Object(jsx_runtime.jsx)(SimpleRectangle_SimpleRectangle,{width:2})}),Object(jsx_runtime.jsx)(Anchor.a,{x:4,y:4,z:0,children:Object(jsx_runtime.jsx)(SimpleRectangle_SimpleRectangle,{height:2})}),Object(jsx_runtime.jsx)(Anchor.a,{x:6,y:6,z:0,children:Object(jsx_runtime.jsx)(SimpleRectangle_SimpleRectangle,{length:2})})]})})});Objects_SimpleRectangle_stories_differentSizes.displayName="differentSizes",Objects_SimpleRectangle_stories_differentSizes.parameters=Object.assign({storySource:{source:"args => (\n\t<Backdrop>\n\t\t<Viewport center={{ x: 3.75, y: 3.75, z: 0.5 }}>\n\t\t\t<Anchor x={0} y={0} z={0}>\n\t\t\t\t<SimpleRectangle />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={2} y={2} z={0}>\n\t\t\t\t<SimpleRectangle width={2} />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={4} y={4} z={0}>\n\t\t\t\t<SimpleRectangle height={2} />\n\t\t\t</Anchor>\n\t\t\t<Anchor x={6} y={6} z={0}>\n\t\t\t\t<SimpleRectangle length={2} />\n\t\t\t</Anchor>\n\t\t</Viewport>\n\t</Backdrop>\n)"}},Objects_SimpleRectangle_stories_differentSizes.parameters);try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Objects.SimpleRectangle.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/Objects.SimpleRectangle.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./stories/UI.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ActiveEntity",(function(){return ActiveEntity}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _src_ui_ActiveEntityOverlay__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/ui/ActiveEntityOverlay.tsx"),_src_entities_GuardPersonEntity__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/entities/GuardPersonEntity.tsx"),_src_terrain_GenericTile__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/terrain/GenericTile.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"UI",argTypes:{children:{control:{type:"text"}}},parameters:{controls:{expanded:!0}}};var ActiveEntity=function ActiveEntity(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_src_ui_ActiveEntityOverlay__WEBPACK_IMPORTED_MODULE_2__.a,{entity:new _src_entities_GuardPersonEntity__WEBPACK_IMPORTED_MODULE_3__.a("test",new _src_terrain_GenericTile__WEBPACK_IMPORTED_MODULE_4__.a(0,0,0))})};ActiveEntity.displayName="ActiveEntity",ActiveEntity.parameters=Object.assign({storySource:{source:"args => <ActiveEntityOverlay entity={new GuardEntity('test', new GenericTile(0, 0, 0))} />"}},ActiveEntity.parameters);try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/UI.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/UI.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){},2:function(module,exports){}},[[0,5,6]]]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),esm=__webpack_require__("./node_modules/@storybook/client-logger/dist/esm/index.js"),parameters={actions:{argTypesRegex:"^on.*"},layout:"fullscreen"};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(ClientApi.d)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.e)(loader,!1)}));case"parameters":return Object(ClientApi.f)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.b)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"render":return Object(ClientApi.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.f)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx|js|jsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src/classes/Coordinate.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Coordinate}));__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Coordinate=function(){function Coordinate(x,y,z){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Coordinate),this.x=void 0,this.y=void 0,this.z=void 0,this.x=x,this.y=y,this.z=z}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Coordinate,[{key:"equals",value:function equals(coord){return this===coord||coord&&this.x===coord.x&&this.y===coord.y&&this.z===coord.z}},{key:"transform",value:function transform(dx,dy,dz){return this.x+=dx,this.y+=dy,this.z+=dz,this}},{key:"scale",value:function scale(r){return this.x*=r,this.y*=r,this.z*=r,this}},{key:"hasNaN",value:function hasNaN(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)}},{key:"manhattanDistanceTo",value:function manhattanDistanceTo(coord){return Math.abs(this.x-coord.x)+Math.abs(this.y-coord.y)+Math.abs(this.z-coord.z)}},{key:"euclideanDistanceTo",value:function euclideanDistanceTo(x,y,z){if("object"==typeof x&&(y=x.y,z=x.z,x=x.x),void 0===y||void 0===z)throw new Error;var xy=Math.sqrt(Math.pow(this.x-x,2)+Math.pow(this.y-y,2));return Math.sqrt(Math.pow(xy,2)+Math.pow(this.z-z,2))}},{key:"toString",value:function toString(){return[this.x,this.y,this.z].join(",")}}],[{key:"clone",value:function clone(coord){return new Coordinate(coord.x,coord.y,coord.z)}},{key:"difference",value:function difference(coord1,coord2){return new Coordinate(coord1.x-coord2.x,coord1.y-coord2.y,coord1.z-coord2.z)}}]),Coordinate}()},"./src/classes/Event.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Event}));__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _Logger__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/classes/Logger.ts");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Event=function(){function Event(debugName){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Event),this.callbacks=[],this.name=void 0,this.name=debugName}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Event,[{key:"on",value:function on(callback){var _this=this;if("function"!=typeof callback)throw new Error("Expected callback of Event("+(this.name?"'"+this.name+"'":"")+")#on to be a function, received "+callback);return this.callbacks.push(callback),function cancel(){_this.callbacks.splice(_this.callbacks.indexOf(callback),1)}}},{key:"once",value:function once(callback){var _this2=this;if("function"!=typeof callback)throw new Error("Expected callback of Event("+(this.name?"'"+this.name+"'":"")+")#once to be a function, received "+callback);var run=function run(){callback.apply(void 0,arguments),cancel()};this.callbacks.push(run);var cancel=function cancel(){_this2.callbacks.splice(_this2.callbacks.indexOf(run),1)};return cancel}},{key:"emit",value:function emit(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.name&&_Logger__WEBPACK_IMPORTED_MODULE_8__.a.group("游댒 "+this.name+" ("+this.callbacks.length+")"),this.callbacks.slice().forEach((function(cb,i){cb.apply(void 0,args)})),this.name&&_Logger__WEBPACK_IMPORTED_MODULE_8__.a.groupEnd()}},{key:"clear",value:function clear(){this.callbacks=[]}}],[{key:"onAny",value:function onAny(callback,events){var destroyers=events.map((function(event){return event.on(callback)}));return function destroy(){destroyers.forEach((function(destroy){return destroy()}))}}},{key:"onceFirst",value:function onceFirst(callback,events){var destroyers=[],cb=function cb(){callback(),destroyers.forEach((function(destroy){return destroy()}))};return events.forEach((function(event){destroyers.push(event.once(cb))})),function destroy(){destroyers.forEach((function(destroy){return destroy()}))}}}]),Event}()},"./src/classes/Logger.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}__webpack_exports__.a=function(){function LoggerEnabled(){_classCallCheck(this,LoggerEnabled)}return _createClass(LoggerEnabled,null,[{key:"log",value:function(_log){function log(){return _log.apply(this,arguments)}return log.toString=function(){return _log.toString()},log}((function(){var _console;(_console=console).log.apply(_console,arguments)}))},{key:"warn",value:function(_warn){function warn(){return _warn.apply(this,arguments)}return warn.toString=function(){return _warn.toString()},warn}((function(){var _console2;(_console2=console).warn.apply(_console2,arguments)}))},{key:"error",value:function(_error){function error(){return _error.apply(this,arguments)}return error.toString=function(){return _error.toString()},error}((function(){var _console3;(_console3=console).error.apply(_console3,arguments)}))},{key:"time",value:function(_time){function time(){return _time.apply(this,arguments)}return time.toString=function(){return _time.toString()},time}((function(){var _console4;(_console4=console).time.apply(_console4,arguments)}))},{key:"timeEnd",value:function(_timeEnd){function timeEnd(){return _timeEnd.apply(this,arguments)}return timeEnd.toString=function(){return _timeEnd.toString()},timeEnd}((function(){var _console5;(_console5=console).timeEnd.apply(_console5,arguments)}))},{key:"group",value:function(_group){function group(){return _group.apply(this,arguments)}return group.toString=function(){return _group.toString()},group}((function(){var _console6;(_console6=console).group.apply(_console6,arguments)}))},{key:"groupCollapsed",value:function(_groupCollapsed){function groupCollapsed(){return _groupCollapsed.apply(this,arguments)}return groupCollapsed.toString=function(){return _groupCollapsed.toString()},groupCollapsed}((function(){var _console7;(_console7=console).groupCollapsed.apply(_console7,arguments)}))},{key:"groupEnd",value:function(_groupEnd){function groupEnd(){return _groupEnd.apply(this,arguments)}return groupEnd.toString=function(){return _groupEnd.toString()},groupEnd}((function(){var _console8;(_console8=console).groupEnd.apply(_console8,arguments)}))}]),LoggerEnabled}()},"./src/classes/Random.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Random}));__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var poisson_disk_sampling__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/poisson-disk-sampling/src/poisson-disk-sampling.js"),poisson_disk_sampling__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(poisson_disk_sampling__WEBPACK_IMPORTED_MODULE_4__),seedrandom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/seedrandom/index.js"),seedrandom__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(seedrandom__WEBPACK_IMPORTED_MODULE_5__);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Random=function(){function Random(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Random)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Random,null,[{key:"float",value:function float(){for(var _len=arguments.length,seed=new Array(_len),_key=0;_key<_len;_key++)seed[_key]=arguments[_key];return seedrandom__WEBPACK_IMPORTED_MODULE_5___default()(seed.join("/")).double()}},{key:"boolean",value:function boolean(seed){var probabilityForTrue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return seedrandom__WEBPACK_IMPORTED_MODULE_5___default()(seed.join("/")).quick()<=probabilityForTrue}},{key:"fromArray",value:function fromArray(arr){if(!arr.length)throw new Error("Cannot pick a random value from an empty array");for(var _len2=arguments.length,seed=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)seed[_key2-1]=arguments[_key2];var index=Math.floor(this.float.apply(this,seed)*arr.length);return arr[index]}},{key:"poisson",value:function poisson(width,height,minDistance){for(var _len3=arguments.length,seed=new Array(_len3>3?_len3-3:0),_key3=3;_key3<_len3;_key3++)seed[_key3-3]=arguments[_key3];var i=0,poisson=new poisson_disk_sampling__WEBPACK_IMPORTED_MODULE_4___default.a({shape:[width,height],minDistance:minDistance},(function(){return Random.float.apply(Random,seed.concat([++i]))}));return poisson.fill()}}]),Random}()},"./src/constants/palettes.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return activePalette})),__webpack_require__.d(__webpack_exports__,"b",(function(){return activeUiPalette}));__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js");var color__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/color/index.js"),color__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_3__),activePalette={darkest:0,dark:3355443,medium:4473924,light:2009085,lightest:16777215},activeUiPalette={darkest:"rgba(0,0,0,0.9)",dark:"rgba(0,0,0,0.6)",medium:"rgba(0,0,0,0.4)",light:"rgba(0,0,0,0.2)",lightest:"rgba(0,0,0,0.1)",hyperlink:color__WEBPACK_IMPORTED_MODULE_3___default()(activePalette.light).toString(),text:color__WEBPACK_IMPORTED_MODULE_3___default()(activePalette.lightest).toString()}},"./src/entities/BuildingEntity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BuildingEntity}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var BuildingEntity=function(_Entity){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(BuildingEntity,_Entity);var _super=_createSuper(BuildingEntity);function BuildingEntity(id,location){var _this,userData=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{label:"Test building"};return _classCallCheck(this,BuildingEntity),(_this=_super.call(this,id,location)).userData=void 0,_this.userData=userData,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BuildingEntity,[{key:"label",get:function get(){return this.userData.label}}]),BuildingEntity}(__webpack_require__("./src/entities/Entity.tsx").a)},"./src/entities/CivilianPersonEntity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CivilianEntity}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var CivilianEntity=function(_PersonEntity){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(CivilianEntity,_PersonEntity);var _super=_createSuper(CivilianEntity);function CivilianEntity(){return _classCallCheck(this,CivilianEntity),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(CivilianEntity,[{key:"label",get:function get(){return""+this.userData.firstName}}]),CivilianEntity}(__webpack_require__("./src/entities/PersonEntity.tsx").a)},"./src/entities/Entity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Entity}));__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var noop=function noop(){},Entity=function(){function Entity(id,location){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Entity),this.id=void 0,this.location=void 0,this.job=void 0,this.id=id,this.location=location}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Entity,[{key:"label",get:function get(){return this.constructor.name+" "+this.id}},{key:"toString",value:function toString(){return this.label}},{key:"play",value:function play(){var _this$job;return(null===(_this$job=this.job)||void 0===_this$job?void 0:_this$job.start())||noop}},{key:"doJob",value:function doJob(job){this.job=job}},{key:"destroy",value:function destroy(){var _this$job2;null===(_this$job2=this.job)||void 0===_this$job2||_this$job2.destroy()}}]),Entity}()},"./src/entities/GuardPersonEntity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GuardEntity}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var GuardEntity=function(_PersonEntity){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(GuardEntity,_PersonEntity);var _super=_createSuper(GuardEntity);function GuardEntity(){return _classCallCheck(this,GuardEntity),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(GuardEntity,[{key:"label",get:function get(){return"Guardsman "+this.userData.firstName}}]),GuardEntity}(__webpack_require__("./src/entities/PersonEntity.tsx").a)},"./src/entities/PersonEntity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PersonEntity_PersonEntity}));__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var Event=__webpack_require__("./src/classes/Event.ts"),Logger=__webpack_require__("./src/classes/Logger.ts");__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var BinaryHeap=function(){function BinaryHeap(scoreFunction){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BinaryHeap),this.scoreFunction=void 0,this.content=[],this.content=[],this.scoreFunction=scoreFunction}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BinaryHeap,[{key:"push",value:function push(element){this.content.push(element),this.sinkDown(this.content.length-1)}},{key:"pop",value:function pop(){var result=this.content[0],end=this.content.pop();return end?(this.content.length>0&&(this.content[0]=end,this.bubbleUp(0)),result):result}},{key:"remove",value:function remove(node){var i=this.content.indexOf(node),end=this.content.pop();end&&i!==this.content.length-1&&(this.content[i]=end,this.scoreFunction(end)<this.scoreFunction(node)?this.sinkDown(i):this.bubbleUp(i))}},{key:"size",value:function size(){return this.content.length}},{key:"rescoreElement",value:function rescoreElement(node){this.sinkDown(this.content.indexOf(node))}},{key:"sinkDown",value:function sinkDown(n){for(var element=this.content[n];n>0;){var parentN=(n+1>>1)-1,parent=this.content[parentN];if(!(this.scoreFunction(element)<this.scoreFunction(parent)))break;this.content[parentN]=element,this.content[n]=parent,n=parentN}}},{key:"bubbleUp",value:function bubbleUp(n){for(var length=this.content.length,element=this.content[n],elemScore=this.scoreFunction(element);;){var child2N=n+1<<1,child1N=child2N-1,swap=null,child1Score=void 0;if(child1N<length){var child1=this.content[child1N];(child1Score=this.scoreFunction(child1))<elemScore&&(swap=child1N)}if(child2N<length){var child2=this.content[child2N];this.scoreFunction(child2)<(null===swap?elemScore:child1Score)&&(swap=child2N)}if(null===swap)break;this.content[n]=this.content[swap],this.content[swap]=element,n=swap}}}]),BinaryHeap}();function Path_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Path_Path=function(){function Path(graph,options){var _this=this;!function Path_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Path),this.terrain=void 0,this.options=void 0,this.cache=void 0,this.heap=void 0,this.heuristic=void 0,this.terrain=graph,this.options=options,this.cache=new Map,this.heap=new BinaryHeap((function(node){var heuristic=_this.cache.get(node);if(!heuristic)throw new Error("This is weird");return heuristic.f})),this.heuristic=function(pos0,pos1){return pos0.euclideanDistanceTo(pos1)}}return function Path_createClass(Constructor,protoProps,staticProps){return protoProps&&Path_defineProperties(Constructor.prototype,protoProps),staticProps&&Path_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Path,[{key:"find",value:function find(start,end){var closestNode=start,closestNodeHeuristics={coordinate:closestNode,h:this.heuristic(start,end),g:0,f:0,parent:null,closed:!0,visited:!0};for(this.cache.set(start,closestNodeHeuristics),this.heap.push(start);this.heap.size()>0;){var currentNode=this.heap.pop(),currentNodeHeuristics=this.cache.get(currentNode);if(!currentNodeHeuristics)throw new Error("Somehow opening a node that has no heuristic data");if(currentNode.equals(end))return this.tracePath(currentNodeHeuristics);currentNodeHeuristics.closed=!0;for(var neighbors=this.terrain.getNeighborTiles(currentNode),i=0,il=neighbors.length;i<il;++i){var _neighborHeuristics,neighbor=neighbors[i],neighborHeuristics=this.cache.get(neighbor);if((null===(_neighborHeuristics=neighborHeuristics)||void 0===_neighborHeuristics||!_neighborHeuristics.closed)&&neighbor.isLand()){var gScore=currentNodeHeuristics.g+(this.terrain,1),beenVisited=!!neighborHeuristics;if(!beenVisited||neighborHeuristics&&gScore<neighborHeuristics.g){var hScore=this.heuristic(neighbor,end);neighborHeuristics={coordinate:neighbor,h:hScore,g:gScore,f:gScore+hScore,parent:currentNodeHeuristics,closed:!0,visited:!0},this.cache.set(neighbor,neighborHeuristics),this.options.closest&&(neighborHeuristics.h<closestNodeHeuristics.h||neighborHeuristics.h===closestNodeHeuristics.h&&neighborHeuristics.g<closestNodeHeuristics.g)&&(closestNode=neighbor,closestNodeHeuristics=neighborHeuristics),beenVisited?this.heap.rescoreElement(neighbor):this.heap.push(neighbor)}}}}return this.options.closest?this.tracePath(closestNodeHeuristics):(Logger.a.warn("-- No path --"),[])}},{key:"tracePath",value:function tracePath(heuristicReport){for(var curr=heuristicReport,path=[];curr.parent;)path.unshift(curr),curr=curr.parent;return path.map((function(heuristicReport){return heuristicReport.coordinate}))}}]),Path}(),FIRST_NAMES_M=(__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),"\n\tPaul, Paolo, Pablo, Pavel, Pasha, Pau, Paulo, Pol, Pavlo, Paavo, Pali, Pal, Paulin, Pava, P친vel, Paulino, Pawel,\n\tPaavali, Pauel, Pavlos, Pavlusha, Poul, Pusha, Pashenka, Pavl칤k, Poll, P칩l, Pavlousek, Pawelek, P친l, Pavilcek, P치l\n".replace(/\t|\n/g,"").split(",").map((function(name){return name.trim()}))),FIRST_NAMES_F="\n\tMia, Mare, Miriam, Mary, Mara, Molly, Maren, Mariah, Marisol, Maria, Moira, Polly, Marie, Mariana, Marilyn, Malia,\n\tMari, Manon, Marissa, Mariam, Marion, Ria, Mariella, Milou, Mitzi, Marielle, Maribel, Maura, Mamie, Maureen, Mariel,\n\tMarisa, Maryam, Mairi, Malou, Marietta, Maija, Maire, Maritza, Maricela, Marya, Marika, Isamar, My, Mariska, Maryse,\n\tMariela, Maira, Marita, Mariette,\n".replace(/\t|\n/g,"").split(",").map((function(name){return name.trim()}));function getRandomMaleFirstName(){return FIRST_NAMES_M[Math.floor(Math.random()*FIRST_NAMES_M.length)]}function getRandomFemaleFirstName(){return FIRST_NAMES_F[Math.floor(Math.random()*FIRST_NAMES_F.length)]}function PersonEntity_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PersonEntity_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var PersonEntity_PersonEntity=function(_Entity){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(PersonEntity,_Entity);var _super=_createSuper(PersonEntity);function PersonEntity(id,location){var _this,userData=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{firstName:Math.random()<.5?getRandomFemaleFirstName():getRandomMaleFirstName()};return PersonEntity_classCallCheck(this,PersonEntity),(_this=_super.call(this,id,location)).$stoppedWalking=new Event.a,_this.$startedWalkStep=new Event.a,_this.$stoppedWalkStep=new Event.a,_this.userData=void 0,_this.userData=userData,_this.$stoppedWalkStep.on((function(loc){_this.location=loc})),_this}return function PersonEntity_createClass(Constructor,protoProps,staticProps){return protoProps&&PersonEntity_defineProperties(Constructor.prototype,protoProps),staticProps&&PersonEntity_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PersonEntity,[{key:"walkTo",value:function walkTo(destination){var _this2=this;if(!this.location.terrain)throw new Error('Entity "'+this.id+'" is trying to path in a detached coordinate');var path=new Path_Path(this.location.terrain,{closest:!0}).find(this.location,destination);if(!path.length)return Logger.a.warn("Path was zero steps long, finishing early."),void this.$stoppedWalking.emit();var unlisten=this.$stoppedWalkStep.on((function(){var nextStep=path.shift();nextStep?_this2.doPathStep(nextStep):(_this2.$stoppedWalking.emit(),unlisten())}));this.doPathStep(path.shift())}},{key:"doPathStep",value:function doPathStep(coordinate){coordinate.hasNaN();this.location.euclideanDistanceTo(coordinate);this.$startedWalkStep.emit(coordinate,1e3)}},{key:"label",get:function get(){return this.userData.firstName}}]),PersonEntity}(__webpack_require__("./src/entities/Entity.tsx").a)},"./src/entities/TreeEntity.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TreeEntity}));__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var TreeEntity=function(_Entity){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(TreeEntity,_Entity);var _super=_createSuper(TreeEntity);function TreeEntity(){return _classCallCheck(this,TreeEntity),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TreeEntity,[{key:"label",get:function get(){return"Tree"}}]),TreeEntity}(__webpack_require__("./src/entities/Entity.tsx").a)},"./src/rendering/threejs/entities.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createEntityObject}));__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var three__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/three/build/three.module.js"),_classes_Random__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./src/classes/Random.ts"),_constants_palettes__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./src/constants/palettes.ts"),_entities_BuildingEntity__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./src/entities/BuildingEntity.tsx"),_entities_CivilianPersonEntity__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./src/entities/CivilianPersonEntity.tsx"),_entities_GuardPersonEntity__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./src/entities/GuardPersonEntity.tsx"),_entities_TreeEntity__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./src/entities/TreeEntity.tsx");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var MATERIAL_MESH=new three__WEBPACK_IMPORTED_MODULE_15__.n({color:_constants_palettes__WEBPACK_IMPORTED_MODULE_17__.a.light});function createEntityObject(entity){var group=new three__WEBPACK_IMPORTED_MODULE_15__.h,geometry=function(){if(entity instanceof _entities_GuardPersonEntity__WEBPACK_IMPORTED_MODULE_20__.a){var geo=new three__WEBPACK_IMPORTED_MODULE_15__.i(.2);return geo.translate(0,.18,0),geo}if(entity instanceof _entities_CivilianPersonEntity__WEBPACK_IMPORTED_MODULE_19__.a){var _geo=new three__WEBPACK_IMPORTED_MODULE_15__.x(.2);return _geo.translate(0,.12,0),_geo}return entity instanceof _entities_BuildingEntity__WEBPACK_IMPORTED_MODULE_18__.a?function createBuildingLikeGeometry(baseWidth,baseDepth,baseHeight,roofHeight){var shape=new three__WEBPACK_IMPORTED_MODULE_15__.t;shape.moveTo(0,0),shape.lineTo(0,baseHeight),shape.lineTo(baseWidth/2,baseHeight+roofHeight),shape.lineTo(baseWidth,baseHeight),shape.lineTo(baseWidth,0),shape.lineTo(0,0);var geo=new three__WEBPACK_IMPORTED_MODULE_15__.f(shape,{steps:1,depth:baseDepth,bevelEnabled:!1});return geo.translate(-baseWidth/2,0,-baseDepth/2),geo}(.5,.6,.4,.2):entity instanceof _entities_TreeEntity__WEBPACK_IMPORTED_MODULE_21__.a?_classes_Random__WEBPACK_IMPORTED_MODULE_16__.a.poisson(1,1,.25,entity.id).reduce((function(flat,_ref){var _ref2=_slicedToArray(_ref,2),x=_ref2[0],y=_ref2[1];return[].concat(_toConsumableArray(flat),_toConsumableArray(function createTreeLikeGeometry(x,z){for(var totalHeigt=.8+.2*Math.random(),totalSegments=1+Math.ceil(3*Math.random()),lastSegmentBottomRadius=0,remainingHeight=totalHeigt,geometries=[],i=0;i<totalSegments;i++){var topRadius=.3*lastSegmentBottomRadius,segmentHeight=remainingHeight/(totalSegments-i)*.7,bottomRadius=.07+1.9*topRadius,geom=new three__WEBPACK_IMPORTED_MODULE_15__.c(topRadius,bottomRadius,segmentHeight,4,1);geom.rotateY(2*Math.random()*Math.PI/4),geom.translate(x,.8*remainingHeight,z),geometries.push(geom),remainingHeight-=segmentHeight,lastSegmentBottomRadius=bottomRadius}var trunk=new three__WEBPACK_IMPORTED_MODULE_15__.c(.01,.01,.6*totalHeigt,3);return trunk.translate(x,.6*totalHeigt*.5,z),geometries.push(trunk),geometries}(x,y)))}),[]):void 0}();return(Array.isArray(geometry)?geometry:[geometry]).forEach((function(geo){var mesh=new three__WEBPACK_IMPORTED_MODULE_15__.m(geo,MATERIAL_MESH);mesh.userData.entity=entity,group.add(mesh);var edges=new three__WEBPACK_IMPORTED_MODULE_15__.d(geo),line=new three__WEBPACK_IMPORTED_MODULE_15__.k(edges,new three__WEBPACK_IMPORTED_MODULE_15__.j({color:_constants_palettes__WEBPACK_IMPORTED_MODULE_17__.a.darkest,linewidth:1}));group.add(line)})),group}},"./src/rendering/useRenderingController.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useRenderingController}));__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");var react=__webpack_require__("./node_modules/react/index.js"),three_module=(__webpack_require__("./node_modules/core-js/modules/es.weak-map.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/three/build/three.module.js")),OrbitControls=__webpack_require__("./node_modules/three/examples/jsm/controls/OrbitControls.js"),Coordinate=__webpack_require__("./src/classes/Coordinate.ts"),Event=__webpack_require__("./src/classes/Event.ts"),palettes=__webpack_require__("./src/constants/palettes.ts"),PersonEntity=__webpack_require__("./src/entities/PersonEntity.tsx"),entities=__webpack_require__("./src/rendering/threejs/entities.ts");function convertCoordinate(coord){return new three_module.z(coord.x,coord.z,coord.y)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var RENDERER_BY_ELEMENT=new WeakMap,ThreeController_ThreeController=function(){function ThreeController(root,options){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ThreeController),this.animating=!1,this.scene=void 0,this.renderer=void 0,this.camera=void 0,this.controls=void 0,this.raycaster=void 0,this.clock=void 0,this.root=void 0,this.$start=new Event.a("ThreeController#start"),this.$detach=new Event.a("ThreeController#$detach"),this.$destruct=new Event.a("ThreeController#$destruct"),this.$update=new Event.a,this.$resize=new Event.a,this.$clickEntity=new Event.a("ThreeController#$clickEntity"),this.$clickTile=new Event.a("ThreeController#$clickTile"),this.$click=new Event.a("ThreeController#$click"),this.$camera=new Event.a,this.$destruct.once((function(){console.log(">> $detach",_this.animating),_this.animating&&_this.stopAnimationLoop(),_this.detachFromGame()})),this.$detach.once((function(){_this.$camera.clear(),_this.$click.clear(),_this.$clickEntity.clear(),_this.$clickTile.clear()})),this.root=root,this.clock=new three_module.b,this.scene=new three_module.s,this.renderer=RENDERER_BY_ELEMENT.get(root)||new three_module.A({antialias:!0,alpha:!0}),RENDERER_BY_ELEMENT.set(root,this.renderer),this.$destruct.once((function(){return _this.renderer.dispose.bind(_this.renderer)}));var aspect=this.getViewportSize().aspect;if(options.fieldOfView===1/0){this.camera=new three_module.o(-7*aspect,7*aspect,7,-7,1,1e3),this.$destruct.once(this.$resize.on((function(){var _this$getViewportSize2=_this.getViewportSize(),aspect=_this$getViewportSize2.aspect,width=_this$getViewportSize2.width,height=_this$getViewportSize2.height,camera=_this.camera;camera.left=-7*aspect/2,camera.right=7*aspect/2,camera.top=3.5,camera.bottom=-3.5,camera.updateProjectionMatrix(),_this.renderer.setSize(width*options.pixelRatio,height*options.pixelRatio,!1)})))}else this.camera=new three_module.p(options.fieldOfView,aspect,.1,1e3),this.$destruct.once(this.$resize.on((function(){var _this$getViewportSize3=_this.getViewportSize(),aspect=_this$getViewportSize3.aspect,width=_this$getViewportSize3.width,height=_this$getViewportSize3.height,camera=_this.camera;camera.aspect=aspect,camera.updateProjectionMatrix(),_this.renderer.setSize(width*options.pixelRatio,height*options.pixelRatio,!1)})));this.$resize.emit(),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.controls=new OrbitControls.a(this.camera,this.renderer.domElement),options.restrictCameraAngle&&(this.controls.maxPolarAngle=.45*Math.PI),this.controls.enableZoom=options.enableZoom,this.controls.enableDamping=!0,this.controls.enablePan=options.enablePan,this.controls.dampingFactor=.1,this.controls.autoRotate=options.enableAutoRotate,this.$destruct.once(this.controls.dispose.bind(this.controls)),this.raycaster=new three_module.r,root.appendChild(this.renderer.domElement),this.$destruct.once((function(){return root.removeChild(_this.renderer.domElement)}));var handleResize=this.$resize.emit.bind(this.$resize);window.addEventListener("resize",handleResize),this.$destruct.once((function(){return window.removeEventListener("resize",handleResize)}));var handleCameraChange=this.$camera.emit.bind(this.$camera);this.controls.addEventListener("change",handleCameraChange),this.$destruct.once((function(){return _this.controls.removeEventListener("change",handleCameraChange)}));var handleClick=this.handleClick.bind(this);this.root.addEventListener("click",handleClick),this.$destruct.once((function(){return _this.root.removeEventListener("click",handleClick)}))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ThreeController,[{key:"destructor",value:function destructor(){this.$destruct.emit()}},{key:"handleClick",value:function handleClick(event){this.raycaster.setFromCamera(new three_module.y(event.offsetX/this.root.clientWidth*2-1,-event.offsetY/this.root.clientHeight*2+1),this.camera);for(var intersections=this.raycaster.intersectObjects(this.scene.children,!0),i=0;i<intersections.length;i++){var userData=intersections[i].object.userData;if(userData.tile)return this.$clickTile.emit(event,userData.tile);if(userData.entity)return this.$clickEntity.emit(event,userData.entity)}this.$click.emit(event)}},{key:"getViewportSize",value:function getViewportSize(){var boundingClientRect=this.root.getBoundingClientRect();return{width:boundingClientRect.width,height:boundingClientRect.height,aspect:boundingClientRect.width/boundingClientRect.height}}},{key:"setCameraPosition",value:function setCameraPosition(position){var v=convertCoordinate(position);this.camera.position.set(v.x,v.y,v.z)}},{key:"setCameraFocusOnVector3",value:function setCameraFocusOnVector3(vector){this.camera.lookAt(vector),this.controls.target=vector}},{key:"setCameraFocus",value:function setCameraFocus(coordinate){this.setCameraFocusOnVector3(convertCoordinate(coordinate))}},{key:"setCameraFocusMesh",value:function setCameraFocusMesh(mesh){var _geometry$boundingBox,geometry=mesh.geometry,center=new three_module.z;geometry.computeBoundingBox(),null===(_geometry$boundingBox=geometry.boundingBox)||void 0===_geometry$boundingBox||_geometry$boundingBox.getCenter(center),mesh.localToWorld(center),this.setCameraFocusOnVector3(center)}},{key:"addAxisHelper",value:function addAxisHelper(){var position=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Coordinate.a(0,0,0),size=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,v=convertCoordinate(position),axesHelper=new three_module.a(size);axesHelper.position.set(v.x,v.y,v.z),this.scene.add(axesHelper)}},{key:"attachEntityPersonEvents",value:function attachEntityPersonEvents(game,entity,obj){var destroy;entity.$startedWalkStep.on((function(destination,duration){if(entity.location){[destination,duration];var deltaPerFrame=convertCoordinate(Coordinate.a.difference(destination,entity.location).scale(1/duration));destroy=game.time.on((function(){obj.position.x+=deltaPerFrame.x,obj.position.y+=deltaPerFrame.y,obj.position.z+=deltaPerFrame.z,--duration<=0&&entity.$stoppedWalkStep.emit(destination)}))}}));var stop=function stop(){null,destroy&&destroy()};entity.$stoppedWalkStep.on(stop),this.$detach.once(stop)}},{key:"attachEntity",value:function attachEntity(game,entity){if(entity.location){var obj=Object(entities.a)(entity),location=Coordinate.a.clone(entity.location).transform(0,0,.175);obj.position.copy(convertCoordinate(location)),entity instanceof PersonEntity.a&&this.attachEntityPersonEvents(game,entity,obj),this.scene.add(obj)}}},{key:"createGroupForGameTerrain",value:function createGroupForGameTerrain(game,options){var group=new three_module.h,loop=game.terrain.tiles.filter((function(t){return t.isLand()})).map((function(tile){var outline=tile.getOutlineCoordinates().map((function(coord){return new three_module.y(tile.x+coord.x,-tile.y-coord.y)})),geometry=new three_module.u(new three_module.t(outline));return geometry.translate(0,0,tile.z),{tile:tile,geometry:geometry}}));if(options.fill){var material=new three_module.n({color:palettes.a.medium});loop.forEach((function(_ref){var geometry=_ref.geometry,tile=_ref.tile,mesh=new three_module.m(geometry,material);mesh.userData.tile=tile,group.add(mesh)}))}if(options.edge){var _material=new three_module.j({color:palettes.a.darkest,linewidth:1});loop.forEach((function(_ref2){var geometry=_ref2.geometry,edges=new three_module.d(geometry),line=new three_module.k(edges,_material);group.add(line)}))}return group.rotateX(-Math.PI/2),group}},{key:"attachEventListeners",value:function attachEventListeners(game){var _this2=this;this.$start.once(game.play.bind(game)),this.$detach.once(game.destroy.bind(game)),this.$detach.on(this.$update.on((function(){var d=_this2.clock.getDelta();game.time.steps(1e3*d)}))),this.$detach.once(this.$clickTile.on((function(event,tile){event.preventDefault(),event.stopPropagation(),game.openContextMenuOnTile(tile)}))),this.$detach.once(this.$clickEntity.on((function(event,entity){event.preventDefault(),event.stopPropagation(),game.focus.set(entity),game.contextMenu.close()}))),this.$detach.once(this.$click.on((function(event){event.preventDefault(),game.contextMenu.close()}))),this.$detach.once(game.lookAt.on((function(){_this2.setCameraFocus(game.lookAt.get())})))}},{key:"attachToGame",value:function attachToGame(game){var _this3=this;this.attachEventListeners(game),game.entities.forEach((function(entity){_this3.attachEntity(game,entity)}));var group=new three_module.h;group.add(this.createGroupForGameTerrain(game,{fill:!0,edge:!0}));var gameSize=game.terrain.size,gridHelper=new three_module.g(gameSize,gameSize,palettes.a.medium,palettes.a.medium);gridHelper.position.add(new three_module.z(gameSize/2,0,gameSize/2)),group.add(gridHelper),this.scene.add(group),this.setCameraPosition(new Coordinate.a(-5,-5,20)),this.setCameraFocus(game.lookAt.get())}},{key:"detachFromGame",value:function detachFromGame(){this.$detach.emit()}},{key:"openHtmlOverlay",value:function openHtmlOverlay(coordinate,element){var _this4=this;this.root.appendChild(element);var updateOverlayPositions=function updateOverlayPositions(){_this4.camera.updateMatrixWorld();var ndc=convertCoordinate(coordinate).project(_this4.camera),x=(.5*ndc.x+.5)*_this4.root.clientWidth,y=(-.5*ndc.y+.5)*_this4.root.clientHeight;element.style.position="absolute",element.style.zIndex="1",element.style.left=Math.round(x)+"px",element.style.top=Math.round(y)+"px",element.style.width="0",element.style.height="0",element.style.overflow="visible"},stopRespondingToCamera=this.$camera.on(updateOverlayPositions),stopRespondingToResize=this.$resize.on(updateOverlayPositions);return updateOverlayPositions(),function(){_this4.root.removeChild(element),stopRespondingToCamera(),stopRespondingToResize()}}},{key:"startAnimationLoop",value:function startAnimationLoop(){var _this5=this;if(this.animating)throw new Error("Animation already started");this.animating=!0,function animate(){_this5.animating&&(requestAnimationFrame(animate),_this5.renderAnimationFrame())}()}},{key:"renderAnimationFrame",value:function renderAnimationFrame(){this.$update.emit(),this.controls.update(),this.renderer.render(this.scene,this.camera)}},{key:"stopAnimationLoop",value:function stopAnimationLoop(){if(!this.animating)throw new Error("Animation not started");this.animating=!1}}]),ThreeController}();function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useRenderingController(options,build){var mounted=Object(react.useRef)(null),_useState2=_slicedToArray(Object(react.useState)(null),2),controller=_useState2[0],setController=_useState2[1];return Object(react.useEffect)((function(){return function(){mounted.current&&(mounted.current.destructor(),mounted.current=null,setController(mounted.current))}}),[]),{controller:controller,onRef:Object(react.useCallback)((function(element){if(element){mounted.current&&mounted.current.destructor();var three=new ThreeController_ThreeController(element,options);three.$destruct.once(build(three)),three.startAnimationLoop(),setController(three),mounted.current=three}}),[options,build])}}},"./src/terrain/GenericTile.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GenericTile}));__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.number.to-fixed.js"),__webpack_require__("./node_modules/core-js/modules/es.array.some.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var GenericTile=function(_Coordinate){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(GenericTile,_Coordinate);var _super=_createSuper(GenericTile);function GenericTile(){var _this;_classCallCheck(this,GenericTile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).terrain=void 0,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(GenericTile,[{key:"equals",value:function equals(coord){return this===coord||coord&&this.x===coord.x&&this.y===coord.y}},{key:"isLand",value:function isLand(){return this.z>=0}},{key:"toString",value:function toString(){return"("+[this.x,this.y].map((function(num){return num.toFixed(2)})).join(",")+")"}},{key:"isAdjacentToEdge",value:function isAdjacentToEdge(){return!!this.terrain&&this.terrain.getNeighborTiles(this).length<4}},{key:"isAdjacentToLand",value:function isAdjacentToLand(){return!!this.terrain&&this.terrain.getNeighborTiles(this).some((function(neighbor){return neighbor.isLand()}))}},{key:"getOutlineCoordinates",value:function getOutlineCoordinates(){throw new Error("Not implemented")}}],[{key:"clone",value:function clone(coord){var coord2=new GenericTile(coord.x,coord.y,coord.z);return coord2.terrain=coord.terrain,coord2}}]),GenericTile}(__webpack_require__("./src/classes/Coordinate.ts").a)},"./src/ui/ActiveEntityOverlay.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ActiveEntityOverlay}));__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_emotion_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_classes_Coordinate__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/classes/Coordinate.ts"),_classes_Logger__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/classes/Logger.ts"),_rendering_threejs_entities__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/rendering/threejs/entities.ts"),_rendering_useRenderingController__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/rendering/useRenderingController.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var ActiveEntityOverlayBoundary=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.div(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\tbackdrop-filter: blur(2px);\n"]))),ActiveEntityOverlayBody=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.div(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\tborder: 1px solid ",";\n\tbackground-color: rgba(0, 0, 0, 0.4);\n\tpadding: 1em;\n\tdisplay: flex;\n\tflex-direction: row;\n"])),"rgba(0,0, 0, 0.5)"),Avatar=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.div(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(["\n\tborder: 1px solid ",";\n\tborder-radius: 50%;\n\toverflow: hidden;\n\twidth: 64px;\n\theight: 64px;\n\tjustify-content: center;\n\talign-items: center;\n\tdisplay: flex;\n\tmargin-right: 1em;\n"])),"rgba(0,0, 0, 0.5)"),HorizontalLinkList=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.nav(_templateObject4||(_templateObject4=_taggedTemplateLiteralLoose(["\n\tdisplay: flex;\n\tflex-direction: row;\n\ttext-transform: uppercase;\n"]))),HorizontalLinkListItem=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.a(_templateObject5||(_templateObject5=_taggedTemplateLiteralLoose(["\n\tflex: 0 0 auto;\n\tbackground-color: rgba(255, 255, 255, 0.1);\n\tmargin-right: 3px;\n\n\t// Same as ContextMenuItem\n\tpadding: 0.125em 0.5em;\n\twhite-space: nowrap;\n\ttransition: background-color 0.5s;\n\tcolor: white;\n\t/* background-color: transparent; */\n\t/* background-color: rgba(255, 255, 255, 0.05); */\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"])),"rgba(0,0, 0, 0.5)"),EntityTextBadge=function EntityTextBadge(_ref){var _entity$job,entity=_ref.entity;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("p",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("b",{children:entity.label})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("p",{children:(null===(_entity$job=entity.job)||void 0===_entity$job?void 0:_entity$job.label)||"Jobless"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(HorizontalLinkList,{style:{marginTop:"1em"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(HorizontalLinkListItem,{onClick:function onClick(){_classes_Logger__WEBPACK_IMPORTED_MODULE_4__.a.group("Selected entity"),_classes_Logger__WEBPACK_IMPORTED_MODULE_4__.a.log(entity),_classes_Logger__WEBPACK_IMPORTED_MODULE_4__.a.groupEnd()},children:"LOG"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(HorizontalLinkListItem,{onClick:function onClick(){_classes_Logger__WEBPACK_IMPORTED_MODULE_4__.a.warn("Following entity not implemented yet",entity)},children:"FOLLOW"})]})]})},ActiveEntityPreviewP=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.div(_templateObject6||(_templateObject6=_taggedTemplateLiteralLoose(["\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\tposition: relative;\n"]))),CAMERA_POSITION=new _classes_Coordinate__WEBPACK_IMPORTED_MODULE_3__.a(-1,1,1),CAMERA_FOCUS=new _classes_Coordinate__WEBPACK_IMPORTED_MODULE_3__.a(0,0,.2),RENDERER_OPTIONS={enableAutoRotate:!0,enablePan:!1,enableZoom:!1,fieldOfView:15,pixelRatio:window.devicePixelRatio||1,restrictCameraAngle:!1},ActiveEntityPreview=function ActiveEntityPreview(_ref2){var entity=_ref2.entity,onRef=Object(_rendering_useRenderingController__WEBPACK_IMPORTED_MODULE_6__.a)(RENDERER_OPTIONS,Object(react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(controller){controller.setCameraPosition(CAMERA_POSITION);var object=Object(_rendering_threejs_entities__WEBPACK_IMPORTED_MODULE_5__.a)(entity),firstMesh=object.children[0];return firstMesh?controller.setCameraFocusMesh(firstMesh):controller.setCameraFocus(CAMERA_FOCUS),controller.scene.add(object),function(){controller.scene.remove(object)}}),[entity])).onRef;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(ActiveEntityPreviewP,{ref:onRef})};ActiveEntityPreview.displayName="ActiveEntityPreview";var ActiveEntityOverlay=function ActiveEntityOverlay(_ref3){var entity=_ref3.entity;_ref3.zoom;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(ActiveEntityOverlayBoundary,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(ActiveEntityOverlayBody,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(Avatar,{children:entity&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(ActiveEntityPreview,{entity:entity})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{children:entity?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(EntityTextBadge,{entity:entity}):null})]})})};ActiveEntityOverlay.displayName="ActiveEntityOverlay";try{ActiveEntityOverlay.displayName="ActiveEntityOverlay",ActiveEntityOverlay.__docgenInfo={description:"",displayName:"ActiveEntityOverlay",props:{entity:{defaultValue:null,description:"",name:"entity",required:!1,type:{name:"EntityI"}},zoom:{defaultValue:{value:"4"},description:"",name:"zoom",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ActiveEntityOverlay.tsx#ActiveEntityOverlay"]={docgenInfo:ActiveEntityOverlay.__docgenInfo,name:"ActiveEntityOverlay",path:"src/ui/ActiveEntityOverlay.tsx#ActiveEntityOverlay"})}catch(__react_docgen_typescript_loader_error){}},"./src/ui/ContextMenu.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return ContextMenuButton})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ContextMenu})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ContextMenuFooter}));__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_emotion_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js"),_constants_palettes__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/constants/palettes.ts")),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var ContextMenuArrow=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.div(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\twidth: 0;\n\theight: 0;\n\tborder-left: 6px solid transparent;\n\tborder-right: 6px solid transparent;\n\tborder-top: 6px solid ",";\n\ttransform: translate(calc(-50% + 0px), -6px);\n"])),_constants_palettes__WEBPACK_IMPORTED_MODULE_3__.b.dark),ContextMenuBoundary=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.div(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\tposition: absolute;\n\tbottom: 100%;\n\tleft: 50%;\n\tbackdrop-filter: blur(2px);\n\ttransform: translate(-50%, -6px);\n"]))),ContextMenuBody=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.div(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(["\n\t/* border: 1px solid ","; */\n\t/* border-radius: 3px; */\n\toverflow: hidden;\n"])),_constants_palettes__WEBPACK_IMPORTED_MODULE_3__.b.dark),ContextMenuButton=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.button(_templateObject4||(_templateObject4=_taggedTemplateLiteralLoose(["\n\tdisplay: block;\n\twidth: 100%;\n"]))),ContextMenu=function ContextMenu(_ref){var children=_ref.children;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ContextMenuBoundary,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ContextMenuBody,{children:children})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ContextMenuArrow,{})]})},ContextMenuFooter=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.a.div(_templateObject5||(_templateObject5=_taggedTemplateLiteralLoose(["\n\tborder: none;\n\tdisplay: block;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\n\t// Same as HorizontalLinkListItem\n\tpadding: 0.5em 1em;\n\twhite-space: nowrap;\n\ttransition: background-color 0.5s;\n\tcolor: white;\n\tbackground-color: ",";\n"])),_constants_palettes__WEBPACK_IMPORTED_MODULE_3__.b.dark);try{ContextMenuButton.displayName="ContextMenuButton",ContextMenuButton.__docgenInfo={description:"",displayName:"ContextMenuButton",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ContextMenu.tsx#ContextMenuButton"]={docgenInfo:ContextMenuButton.__docgenInfo,name:"ContextMenuButton",path:"src/ui/ContextMenu.tsx#ContextMenuButton"})}catch(__react_docgen_typescript_loader_error){}try{ContextMenu.displayName="ContextMenu",ContextMenu.__docgenInfo={description:"",displayName:"ContextMenu",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ContextMenu.tsx#ContextMenu"]={docgenInfo:ContextMenu.__docgenInfo,name:"ContextMenu",path:"src/ui/ContextMenu.tsx#ContextMenu"})}catch(__react_docgen_typescript_loader_error){}try{ContextMenuFooter.displayName="ContextMenuFooter",ContextMenuFooter.__docgenInfo={description:"",displayName:"ContextMenuFooter",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ContextMenu.tsx#ContextMenuFooter"]={docgenInfo:ContextMenuFooter.__docgenInfo,name:"ContextMenuFooter",path:"src/ui/ContextMenu.tsx#ContextMenuFooter"})}catch(__react_docgen_typescript_loader_error){}},"./src/ui/GlobalStyles.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js");var _templateObject,_emotion_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),color__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/color/index.js"),color__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_5__),_constants_palettes__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/constants/palettes.ts")),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/jsx-runtime.js");var styles,GlobalStyles=(styles=Object(_emotion_react__WEBPACK_IMPORTED_MODULE_4__.b)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\thtml,\n\tbody,\n\t#root {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t}\n\tbody {\n\t\tfont-family: sans-serif;\n\t\tfont-size: 14px;\n\t\tcolor: ",";\n\t}\n\tbutton,\n\tinput {\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\tfont-family: inherit;\n\t\tfont-size: inherit;\n\t\tcolor: inherit;\n\t}\n\n\tbutton {\n\t\tborder: none;\n\t\tbox-sizing: border-box;\n\t\t// Same as HorizontalLinkListItem\n\t\tpadding: 0.5em 1em;\n\t\twhite-space: nowrap;\n\t\ttransition: background-color 0.5s;\n\t\tcolor: white;\n\t\tbackground-color: ",";\n\t\tborder-top: 1px solid rgba(0, 0, 0, 0.2);\n\t\t&:hover {\n\t\t\tbackground-color: ",";\n\t\t\tcolor: ",";\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\ta {\n\t\ttext-decoration: none;\n\t\tcolor: ",";\n\t\t&:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t}\n\tp {\n\t\tmargin: 0;\n\t}\n"])),color__WEBPACK_IMPORTED_MODULE_5___default()(_constants_palettes__WEBPACK_IMPORTED_MODULE_7__.b.text).toString(),_constants_palettes__WEBPACK_IMPORTED_MODULE_7__.b.medium,_constants_palettes__WEBPACK_IMPORTED_MODULE_7__.b.dark,_constants_palettes__WEBPACK_IMPORTED_MODULE_7__.b.hyperlink,_constants_palettes__WEBPACK_IMPORTED_MODULE_7__.b.hyperlink),function(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_emotion_react__WEBPACK_IMPORTED_MODULE_4__.a,{styles:styles})});__webpack_exports__.a=GlobalStyles;try{GlobalStyles.displayName="GlobalStyles",GlobalStyles.__docgenInfo={description:"",displayName:"GlobalStyles",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/GlobalStyles.tsx#GlobalStyles"]={docgenInfo:GlobalStyles.__docgenInfo,name:"GlobalStyles",path:"src/ui/GlobalStyles.tsx#GlobalStyles"})}catch(__react_docgen_typescript_loader_error){}},"./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx|js|jsx))$":function(module,exports,__webpack_require__){var map={"./Demo.stories.tsx":"./stories/Demo.stories.tsx","./Objects.stories.tsx":"./stories/Objects.stories.tsx","./UI.stories.tsx":"./stories/UI.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx|js|jsx))$"},"./stories/Demo.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"THREE",(function(){return Demo_stories_THREE})),__webpack_require__.d(__webpack_exports__,"THREE_D",(function(){return Demo_stories_THREE_D})),__webpack_require__.d(__webpack_exports__,"THREE_R",(function(){return Demo_stories_THREE_R}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var react=__webpack_require__("./node_modules/react/index.js"),react_default=__webpack_require__.n(react),Coordinate=(__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./src/classes/Coordinate.ts")),Event=__webpack_require__("./src/classes/Event.ts");__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var EventedValue=function(_Event){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(EventedValue,_Event);var _super=_createSuper(EventedValue);function EventedValue(initial){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EventedValue),(_this=_super.call(this)).current=void 0,_this.current=initial,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(EventedValue,[{key:"get",value:function get(){return this.current}},{key:"set",value:function set(value,skipUpdate){this.current=value,skipUpdate||this.emit()}},{key:"emit",value:function emit(){_get(_getPrototypeOf(EventedValue.prototype),"emit",this).call(this,this.current)}}]),EventedValue}(Event.a);__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js");function TimeLine_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TimeLine_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TimeLine_setPrototypeOf(o,p){return TimeLine_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},TimeLine_setPrototypeOf(o,p)}function TimeLine_createSuper(Derived){var hasNativeReflectConstruct=function TimeLine_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=TimeLine_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=TimeLine_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return TimeLine_possibleConstructorReturn(this,result)}}function TimeLine_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function TimeLine_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function TimeLine_getPrototypeOf(o){return TimeLine_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},TimeLine_getPrototypeOf(o)}var TimeLine=function(_EventedValue){!function TimeLine_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&TimeLine_setPrototypeOf(subClass,superClass)}(TimeLine,_EventedValue);var _super=TimeLine_createSuper(TimeLine);function TimeLine(){var _this,initial=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return TimeLine_classCallCheck(this,TimeLine),(_this=_super.call(this,initial)).timers=new Map,_this}return function TimeLine_createClass(Constructor,protoProps,staticProps){return protoProps&&TimeLine_defineProperties(Constructor.prototype,protoProps),staticProps&&TimeLine_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TimeLine,[{key:"now",get:function get(){return this.get()}},{key:"runAllImmediates",value:function runAllImmediates(){for(var timers=this.timers.get(this.now);timers&&timers.length>0;){var runTimeout=timers.shift();runTimeout&&runTimeout()}this.timers.delete(this.now)}},{key:"step",value:function step(){this.runAllImmediates(),this.set(this.now+1)}},{key:"steps",value:function steps(much){for(;much-- >0;)this.step()}},{key:"getNextEventTime",value:function getNextEventTime(){return Array.from(this.timers.keys()).reduce((function(min,k){return Math.min(min,k)}),1/0)}},{key:"jump",value:function jump(){var next=this.getNextEventTime();return!!next&&(this.set(next,!0),this.step(),!0)}},{key:"jumps",value:function jumps(much){for(;--much>=0;)if(!this.jump())return}},{key:"setTimeout",value:function setTimeout(fn,time){var _this$timers$get,_this2=this,mark=this.get()+time;this.timers.has(mark)?null===(_this$timers$get=this.timers.get(mark))||void 0===_this$timers$get||_this$timers$get.push(fn):this.timers.set(mark,[fn]);return function(){var _this2$timers$get;return _this2.timers.set(mark,(null===(_this2$timers$get=_this2.timers.get(mark))||void 0===_this2$timers$get?void 0:_this2$timers$get.filter((function(f){return f!==fn})))||[])}}}]),TimeLine}(EventedValue);function ContextMenuController_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _templateObject,_templateObject2,_templateObject3,ContextMenuController_ContextMenuController=function(){function ContextMenuController(){!function ContextMenuController_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ContextMenuController),this.state=!1,this.$changed=new Event.a}return function ContextMenuController_createClass(Constructor,protoProps,staticProps){return protoProps&&ContextMenuController_defineProperties(Constructor.prototype,protoProps),staticProps&&ContextMenuController_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ContextMenuController,[{key:"open",value:function open(location,contents){this.state={location:location,contents:contents},this.$changed.emit(this.state)}},{key:"isOpen",value:function isOpen(){return!!this.state}},{key:"close",value:function close(){this.state=!1,this.$changed.emit(this.state)}}]),ContextMenuController}(),styled_browser_esm=(__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.number.to-fixed.js"),__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js")),ContextMenu=__webpack_require__("./src/ui/ContextMenu.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var AxisX=styled_browser_esm.a.span(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n\tcolor: #ff4639;\n"]))),AxisY=styled_browser_esm.a.span(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n\tcolor: #51a2ff;\n"]))),AxisZ=styled_browser_esm.a.span(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(["\n\tcolor: #ffdd41;\n"]))),ContextMenuForTile_ContextMenuForTile=function ContextMenuForTile(_ref){var game=_ref.game,tile=_ref.tile;return Object(jsx_runtime.jsxs)(ContextMenu.a,{children:[Object(jsx_runtime.jsx)(ContextMenu.b,{onClick:function onClick(){game.lookAt.set(tile)},children:"Center camera"}),Object(jsx_runtime.jsx)(ContextMenu.b,{onClick:function onClick(){console.group("Tile "+tile),console.log(tile),console.groupEnd()},children:"Show in console"}),Object(jsx_runtime.jsxs)(ContextMenu.c,{children:[Object(jsx_runtime.jsx)(AxisX,{children:tile.x.toFixed(2)}),", ",Object(jsx_runtime.jsx)(AxisY,{children:tile.y.toFixed(2)}),", ",Object(jsx_runtime.jsx)(AxisZ,{children:tile.z.toFixed(2)})]})]})};ContextMenuForTile_ContextMenuForTile.displayName="ContextMenuForTile";try{ContextMenuForTile_ContextMenuForTile.displayName="ContextMenuForTile",ContextMenuForTile_ContextMenuForTile.__docgenInfo={description:"",displayName:"ContextMenuForTile",props:{game:{defaultValue:null,description:"",name:"game",required:!0,type:{name:"Game"}},tile:{defaultValue:null,description:"",name:"tile",required:!0,type:{name:"TileI"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/ContextMenuForTile.tsx#ContextMenuForTile"]={docgenInfo:ContextMenuForTile_ContextMenuForTile.__docgenInfo,name:"ContextMenuForTile",path:"src/ui/ContextMenuForTile.tsx#ContextMenuForTile"})}catch(__react_docgen_typescript_loader_error){}function Game_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Game_Game=function(){function Game(seed,terrain,entities){var _this=this;!function Game_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Game),this.contextMenu=new ContextMenuController_ContextMenuController,this.random=void 0,this.terrain=void 0,this.entities=void 0,this.time=new TimeLine,this.seed=void 0,this.$start=new Event.a("Game#$start"),this.$destroy=new Event.a("Game#$destroy"),this.focus=new EventedValue(void 0),this.lookAt=new EventedValue(new Coordinate.a(0,0,0)),this.seed=seed,this.terrain=terrain,this.entities=entities,this.lookAt.set(terrain.getMedianCoordinate()),this.$start.on((function(){_this.entities.forEach((function(entity){return entity.play()}))})),this.$destroy.on((function(){return _this.entities.forEach((function(entity){return entity.destroy()}))}))}return function Game_createClass(Constructor,protoProps,staticProps){return protoProps&&Game_defineProperties(Constructor.prototype,protoProps),staticProps&&Game_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Game,[{key:"play",value:function play(){var _this2=this;return this.$start.emit(),function(){_this2.destroy()}}},{key:"openContextMenuOnTile",value:function openContextMenuOnTile(tile){this.contextMenu.open(tile,Object(react.createElement)(ContextMenuForTile_ContextMenuForTile,{game:this,tile:tile}))}},{key:"destroy",value:function destroy(){this.$destroy.emit()}}]),Game}();__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useEventReducer(event,reducer,dependencies){var _useState2=_slicedToArray(Object(react.useState)(reducer()),2),state=_useState2[0],setState=_useState2[1],callback=Object(react.useCallback)((function(){setState(reducer())}),[setState,reducer].concat(_toConsumableArray(dependencies)));return Object(react.useEffect)((function(){callback()}),[event,callback].concat(_toConsumableArray(dependencies))),function useEventCallback(event,callback,dependencies){Object(react.useEffect)((function(){return event.on(callback)}),[event,callback].concat(_toConsumableArray(dependencies)))}(event,callback,[]),state}var GameContext=Object(react.createContext)(null);function useGame(){var gameApi=Object(react.useContext)(GameContext);if(!gameApi)throw new Error("Game context does not exist");return gameApi}var react_dom=__webpack_require__("./node_modules/react-dom/index.js"),ThreeOverlay_ThreeOverlay=function ThreeOverlay(_ref){var three=_ref.three,position=_ref.position,children=_ref.children,container=Object(react.useMemo)((function(){return window.document.createElement("div")}),[]);return Object(react.useEffect)((function(){return three.openHtmlOverlay(position,container)}),[three,container,position]),Object(react_dom.createPortal)(children,container)};try{ThreeOverlay_ThreeOverlay.displayName="ThreeOverlay",ThreeOverlay_ThreeOverlay.__docgenInfo={description:"Uses a React portal and ThreeJS projection to render children onto a specific location in the\nThreeJS canvas. The element gets stuck onto that spot and plays nice with moving the camera\naround and resizing the canvas.\n\nSee also {@link ThreeController#openHtmlOverlay }",displayName:"ThreeOverlay",props:{three:{defaultValue:null,description:"",name:"three",required:!0,type:{name:"ThreeController"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"CoordinateI"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/rendering/threejs/ThreeOverlay.tsx#ThreeOverlay"]={docgenInfo:ThreeOverlay_ThreeOverlay.__docgenInfo,name:"ThreeOverlay",path:"src/rendering/threejs/ThreeOverlay.tsx#ThreeOverlay"})}catch(__react_docgen_typescript_loader_error){}var RendererMain_templateObject,useRenderingController=__webpack_require__("./src/rendering/useRenderingController.ts");var AboutGameOverlay_templateObject,AsLargeAsPossibleContainer=styled_browser_esm.a.section(RendererMain_templateObject||(RendererMain_templateObject=function RendererMain_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\tposition: relative;\n"]))),RENDERER_OPTIONS={enableAutoRotate:!1,enablePan:!0,enableZoom:!0,fieldOfView:45,pixelRatio:window.devicePixelRatio||1,restrictCameraAngle:!0},RendererMain_RendererMain=function RendererMain(){var game=useGame(),contextMenuState=useEventReducer(game.contextMenu.$changed,(function(){return game.contextMenu.state}),[]),_useRenderingControll=Object(useRenderingController.a)(RENDERER_OPTIONS,Object(react.useCallback)((function(controller){return controller.addAxisHelper(new Coordinate.a(-1,-1,-1)),controller.attachToGame(game),game.play(),function(){controller.detachFromGame()}}),[game])),controller=_useRenderingControll.controller,onRef=_useRenderingControll.onRef;return Object(jsx_runtime.jsx)(AsLargeAsPossibleContainer,{className:"renderer-three",ref:onRef,children:controller&&contextMenuState&&Object(jsx_runtime.jsx)(ThreeOverlay_ThreeOverlay,{three:controller,position:contextMenuState.location,children:contextMenuState.contents})})};RendererMain_RendererMain.displayName="RendererMain";try{RendererMain_RendererMain.displayName="RendererMain",RendererMain_RendererMain.__docgenInfo={description:"",displayName:"RendererMain",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/rendering/RendererMain.tsx#RendererMain"]={docgenInfo:RendererMain_RendererMain.__docgenInfo,name:"RendererMain",path:"src/rendering/RendererMain.tsx#RendererMain"})}catch(__react_docgen_typescript_loader_error){}var Wrapper=styled_browser_esm.a.div(AboutGameOverlay_templateObject||(AboutGameOverlay_templateObject=function AboutGameOverlay_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tmargin-top: 1em;\n\tfont-size: 0.8em;\n"]))),AboutGameOverlay_AboutGameOverlay=function AboutGameOverlay(){var game=useGame();return Object(jsx_runtime.jsxs)(Wrapper,{children:[Object(jsx_runtime.jsx)("a",{href:"https://github.com/wvbe/kreuzzeug-im-nagelhosen",target:"_blank",rel:"noreferrer",children:"GitHub"}),Object(jsx_runtime.jsx)("div",{style:{width:"4em"}}),Object(jsx_runtime.jsxs)("span",{children:["Seed: ",game.seed]})]})};AboutGameOverlay_AboutGameOverlay.displayName="AboutGameOverlay";try{AboutGameOverlay_AboutGameOverlay.displayName="AboutGameOverlay",AboutGameOverlay_AboutGameOverlay.__docgenInfo={description:"",displayName:"AboutGameOverlay",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/AboutGameOverlay.tsx#AboutGameOverlay"]={docgenInfo:AboutGameOverlay_AboutGameOverlay.__docgenInfo,name:"AboutGameOverlay",path:"src/ui/AboutGameOverlay.tsx#AboutGameOverlay"})}catch(__react_docgen_typescript_loader_error){}var Overlay_templateObject,ActiveEntityOverlay=__webpack_require__("./src/ui/ActiveEntityOverlay.tsx");var Overlay=styled_browser_esm.a.section(Overlay_templateObject||(Overlay_templateObject=function Overlay_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\tposition: absolute;\n\tbottom: 2em;\n\tleft: 2em;\n"])));try{Overlay.displayName="Overlay",Overlay.__docgenInfo={description:"",displayName:"Overlay",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui/Overlay.tsx#Overlay"]={docgenInfo:Overlay.__docgenInfo,name:"Overlay",path:"src/ui/Overlay.tsx#Overlay"})}catch(__react_docgen_typescript_loader_error){}var GameC_GameC=function GameC(_ref){var focusedItem=function useEventedValue(event){return useEventReducer(event,event.get.bind(event),[])}(_ref.game.focus);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(RendererMain_RendererMain,{}),Object(jsx_runtime.jsxs)(Overlay,{children:[Object(jsx_runtime.jsx)(ActiveEntityOverlay.a,{entity:focusedItem}),Object(jsx_runtime.jsx)(AboutGameOverlay_AboutGameOverlay,{})]})]})};try{GameC_GameC.displayName="GameC",GameC_GameC.__docgenInfo={description:"",displayName:"GameC",props:{game:{defaultValue:null,description:"",name:"game",required:!0,type:{name:"Game"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/GameC.tsx#GameC"]={docgenInfo:GameC_GameC.__docgenInfo,name:"GameC",path:"src/GameC.tsx#GameC"})}catch(__react_docgen_typescript_loader_error){}var GlobalStyles=__webpack_require__("./src/ui/GlobalStyles.tsx"),create=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.some.js"),__webpack_require__("./node_modules/@redblobgames/dual-mesh/create.js")),create_default=__webpack_require__.n(create),poisson_disk_sampling=__webpack_require__("./node_modules/poisson-disk-sampling/src/poisson-disk-sampling.js"),poisson_disk_sampling_default=__webpack_require__.n(poisson_disk_sampling);__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js");function GenericTerrain_toConsumableArray(arr){return function GenericTerrain_arrayWithoutHoles(arr){if(Array.isArray(arr))return GenericTerrain_arrayLikeToArray(arr)}(arr)||function GenericTerrain_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function GenericTerrain_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return GenericTerrain_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GenericTerrain_arrayLikeToArray(o,minLen)}(arr)||function GenericTerrain_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GenericTerrain_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function GenericTerrain_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var GenericTerrain_GenericTerrain=function(){function GenericTerrain(tiles){!function GenericTerrain_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GenericTerrain),this.tiles=[],this.islands=new Map,this.tiles=tiles}return function GenericTerrain_createClass(Constructor,protoProps,staticProps){return protoProps&&GenericTerrain_defineProperties(Constructor.prototype,protoProps),staticProps&&GenericTerrain_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(GenericTerrain,[{key:"selectContiguousTiles",value:function selectContiguousTiles(start){for(var selector=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(c){return c.isLand()},inclusive=arguments.length>2?arguments[2]:void 0,island=[],seen=[],queue=[start];queue.length;){var current=queue.shift();(inclusive||current!==start)&&island.push(current);var neighbours=this.getNeighborTiles(current).filter((function(n){return!seen.includes(n)}));seen.splice.apply(seen,[0,0,current].concat(GenericTerrain_toConsumableArray(neighbours))),queue.splice.apply(queue,[0,0].concat(GenericTerrain_toConsumableArray(neighbours.filter(selector))))}return island}},{key:"selectClosestTiles",value:function selectClosestTiles(start,maxDistance){return this.selectContiguousTiles(start,(function(other){return other.isLand()&&start.euclideanDistanceTo(other)<=maxDistance}),!1)}},{key:"getIslands",value:function getIslands(){var _this=this,selector=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t.isLand()},fromCache=this.islands.get(selector);if(fromCache)return fromCache;for(var open=this.tiles.slice(),islands=[],_loop=function _loop(){var next=open.shift();if(!selector(next))return"continue";var island=_this.selectContiguousTiles(next,selector,!0);open=open.filter((function(n){return!island.includes(n)})),islands.push(island)};open.length;)_loop();return this.islands.set(selector,islands),islands}},{key:"getTileClosestToXy",value:function getTileClosestToXy(x,y){if(!this.tiles.length)throw new Error("Terrain is empty");var closestDistance=1/0;return this.tiles.reduce((function(last,tile){var distance=tile.euclideanDistanceTo(x,y,0);return distance<closestDistance?(closestDistance=distance,tile):last}),this.tiles[0])}},{key:"getNeighborTiles",value:function getNeighborTiles(center){return this.tiles.filter((function(tile){return 1===center.manhattanDistanceTo(tile)}))}},{key:"getMedianCoordinate",value:function getMedianCoordinate(){var _this$tiles$reduce=this.tiles.reduce((function(totals,tile){return{x:totals.x+tile.x,y:totals.y+tile.y,z:totals.z+tile.z}}),{x:0,y:0,z:0}),x=_this$tiles$reduce.x,y=_this$tiles$reduce.y,z=_this$tiles$reduce.z;return new Coordinate.a(x/this.tiles.length,y/this.tiles.length,z/this.tiles.length)}}],[{key:"generateRandom",value:function generateRandom(seed,size){throw new Error("Not implemented")}}]),GenericTerrain}();function DualMeshTerrain_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DualMeshTerrain_setPrototypeOf(o,p){return DualMeshTerrain_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},DualMeshTerrain_setPrototypeOf(o,p)}function DualMeshTerrain_createSuper(Derived){var hasNativeReflectConstruct=function DualMeshTerrain_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DualMeshTerrain_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DualMeshTerrain_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DualMeshTerrain_possibleConstructorReturn(this,result)}}function DualMeshTerrain_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return DualMeshTerrain_assertThisInitialized(self)}function DualMeshTerrain_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function DualMeshTerrain_getPrototypeOf(o){return DualMeshTerrain_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DualMeshTerrain_getPrototypeOf(o)}var DualMeshTerrain_DualMeshTerrain=function(_GenericTerrain){!function DualMeshTerrain_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DualMeshTerrain_setPrototypeOf(subClass,superClass)}(DualMeshTerrain,_GenericTerrain);var _super=DualMeshTerrain_createSuper(DualMeshTerrain);function DualMeshTerrain(size,tiles){var _this;return function DualMeshTerrain_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DualMeshTerrain),(_this=_super.call(this,tiles)).size=void 0,_this.size=size,_this.tiles.forEach((function(coordinate,i){coordinate.terrain=DualMeshTerrain_assertThisInitialized(_this)})),_this}return function DualMeshTerrain_createClass(Constructor,protoProps,staticProps){return protoProps&&DualMeshTerrain_defineProperties(Constructor.prototype,protoProps),staticProps&&DualMeshTerrain_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DualMeshTerrain,[{key:"getTileClosestToXy",value:function getTileClosestToXy(x,y){var center=new Coordinate.a(x,y,0),_this$tiles$reduce=this.tiles.reduce((function(last,tile){var distance=center.euclideanDistanceTo(tile);return distance<last.distance?{distance:distance,tile:tile}:last}),{distance:1/0}),tile=_this$tiles$reduce.tile;if(!tile)throw new Error("No tiles, "+this.tiles.length);return tile}},{key:"getNeighborTiles",value:function getNeighborTiles(center){return center.neighbors||[]}}]),DualMeshTerrain}(GenericTerrain_GenericTerrain),Random=__webpack_require__("./src/classes/Random.ts");function DualMeshTile_slicedToArray(arr,i){return function DualMeshTile_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function DualMeshTile_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function DualMeshTile_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DualMeshTile_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DualMeshTile_arrayLikeToArray(o,minLen)}(arr,i)||function DualMeshTile_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DualMeshTile_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function DualMeshTile_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DualMeshTile_setPrototypeOf(o,p){return DualMeshTile_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},DualMeshTile_setPrototypeOf(o,p)}function DualMeshTile_createSuper(Derived){var hasNativeReflectConstruct=function DualMeshTile_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DualMeshTile_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DualMeshTile_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DualMeshTile_possibleConstructorReturn(this,result)}}function DualMeshTile_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DualMeshTile_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DualMeshTile_getPrototypeOf(o){return DualMeshTile_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DualMeshTile_getPrototypeOf(o)}var DualMeshTile_DualMeshTile=function(_GenericTile){!function DualMeshTile_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DualMeshTile_setPrototypeOf(subClass,superClass)}(DualMeshTile,_GenericTile);var _super=DualMeshTile_createSuper(DualMeshTile);function DualMeshTile(x,y,z,points,anyPointIsAdjacentToEdge){var _this;return function DualMeshTile_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DualMeshTile),(_this=_super.call(this,x,y,z)).neighbors=[],_this._outlinePoints=[],_this._isGhost=void 0,_this._isLand=void 0,_this.addOutlineFromCirculation(points,anyPointIsAdjacentToEdge),_this}return function DualMeshTile_createClass(Constructor,protoProps,staticProps){return protoProps&&DualMeshTile_defineProperties(Constructor.prototype,protoProps),staticProps&&DualMeshTile_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DualMeshTile,[{key:"addOutlineFromCirculation",value:function addOutlineFromCirculation(points,anyPointIsAdjacentToEdge){var _this2=this;points.forEach((function(_ref){var _ref2=DualMeshTile_slicedToArray(_ref,2),x=_ref2[0],y=_ref2[1];_this2._outlinePoints.push(new Coordinate.a(x-_this2.x,y-_this2.y,0))})),this._isGhost=anyPointIsAdjacentToEdge}},{key:"getOutlineCoordinates",value:function getOutlineCoordinates(){return this._outlinePoints}},{key:"isLand",value:function isLand(){return void 0===this._isLand&&(this._isLand=this.z>=0&&!function r(item,maxDepth){return!!item.isAdjacentToEdge()||!(maxDepth<=0)&&(--maxDepth,item.neighbors.some((function(n){return r(n,maxDepth)}))||!1)}(this,2)),this._isLand}},{key:"isAdjacentToLand",value:function isAdjacentToLand(){return this.neighbors.some((function(n){return n.isLand()}))}},{key:"isAdjacentToEdge",value:function isAdjacentToEdge(){return!!this._isGhost}}]),DualMeshTile}(__webpack_require__("./src/terrain/GenericTile.ts").a);function _construct(Parent,args,Class){return _construct=generateDualMeshTerrain_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&generateDualMeshTerrain_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function generateDualMeshTerrain_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function generateDualMeshTerrain_setPrototypeOf(o,p){return generateDualMeshTerrain_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},generateDualMeshTerrain_setPrototypeOf(o,p)}function generateDualMeshTerrain_toConsumableArray(arr){return function generateDualMeshTerrain_arrayWithoutHoles(arr){if(Array.isArray(arr))return generateDualMeshTerrain_arrayLikeToArray(arr)}(arr)||function generateDualMeshTerrain_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function generateDualMeshTerrain_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return generateDualMeshTerrain_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return generateDualMeshTerrain_arrayLikeToArray(o,minLen)}(arr)||function generateDualMeshTerrain_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function generateDualMeshTerrain_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function generateDualMeshTerrain(seed,size){var density=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0,poisson=new poisson_disk_sampling_default.a({shape:[size,size],minDistance:1/density},(function(){return Random.a.float(seed,++i)})),meshBuilder=new create_default.a({boundarySpacing:1});meshBuilder.points.forEach((function(p){return poisson.addPoint(p)})),meshBuilder.points=poisson.fill().map((function(xy,i){var z=2*(Random.a.float(seed,"poisson",i)-.3);return[].concat(generateDualMeshTerrain_toConsumableArray(xy),[z>0?.25*z:z])}));var mesh=meshBuilder.create(),tiles=meshBuilder.points.map((function(coordinates,i){var outline=mesh.r_circulate_t([],i);return _construct(DualMeshTile_DualMeshTile,generateDualMeshTerrain_toConsumableArray(coordinates).concat([outline.map((function(i){return[mesh.t_x(i),mesh.t_y(i)]})),outline.some((function(index){return mesh.t_ghost(index)}))]))})).map((function(tile,i,tiles){return mesh.r_circulate_r([],i).map((function(x){return tiles[x]})).filter(Boolean).forEach((function(neighbor){tile.neighbors.push(neighbor)})),tile})).filter(Boolean),terrain=new DualMeshTerrain_DualMeshTerrain(size,tiles);return terrain}__webpack_require__("./node_modules/core-js/modules/es.array.find.js");var CivilianPersonEntity=__webpack_require__("./src/entities/CivilianPersonEntity.tsx"),GuardPersonEntity=__webpack_require__("./src/entities/GuardPersonEntity.tsx"),Logger=(__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./src/classes/Logger.ts"));function Job_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Job_Job=function(){function Job(entity){!function Job_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Job),this.entity=void 0,this.entity=entity}return function Job_createClass(Constructor,protoProps,staticProps){return protoProps&&Job_defineProperties(Constructor.prototype,protoProps),staticProps&&Job_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Job,[{key:"label",get:function get(){throw new Error("Not implemented for "+this.constructor.name)}},{key:"start",value:function start(){Logger.a.log("Start "+this.constructor.name)}},{key:"destroy",value:function destroy(){Logger.a.log("Destroy "+this.constructor.name)}}]),Job}();function LoiterJob_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function LoiterJob_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function LoiterJob_get(){return LoiterJob_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=LoiterJob_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},LoiterJob_get.apply(this,arguments)}function LoiterJob_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=LoiterJob_getPrototypeOf(object)););return object}function LoiterJob_setPrototypeOf(o,p){return LoiterJob_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},LoiterJob_setPrototypeOf(o,p)}function LoiterJob_createSuper(Derived){var hasNativeReflectConstruct=function LoiterJob_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=LoiterJob_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=LoiterJob_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return LoiterJob_possibleConstructorReturn(this,result)}}function LoiterJob_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function LoiterJob_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function LoiterJob_getPrototypeOf(o){return LoiterJob_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},LoiterJob_getPrototypeOf(o)}var LoiterJob_LoiterJob=function(_Job){!function LoiterJob_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&LoiterJob_setPrototypeOf(subClass,superClass)}(LoiterJob,_Job);var _super=LoiterJob_createSuper(LoiterJob);function LoiterJob(){var _this;LoiterJob_classCallCheck(this,LoiterJob);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).destroyers=[],_this.walkMinWait=4e3,_this.walkMaxWait=15e3,_this.walkChanceOnRoll=.3,_this.walkMaxDistance=3,_this}return function LoiterJob_createClass(Constructor,protoProps,staticProps){return protoProps&&LoiterJob_defineProperties(Constructor.prototype,protoProps),staticProps&&LoiterJob_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LoiterJob,[{key:"label",get:function get(){return"Loitering"}},{key:"start",value:function start(){var _this2=this;LoiterJob_get(LoiterJob_getPrototypeOf(LoiterJob.prototype),"start",this).call(this);var steps=0,timer=null,doTimeout=function doTimeout(){if(timer)throw new Error("Timer for LoiterJob already exists");timer=setTimeout((function(){var _this2$entity$locatio,_this2$entity$locatio2;if(timer=null,Math.random()>_this2.walkChanceOnRoll)doTimeout();else{steps++;var destinations=(null===(_this2$entity$locatio=_this2.entity.location)||void 0===_this2$entity$locatio||null===(_this2$entity$locatio2=_this2$entity$locatio.terrain)||void 0===_this2$entity$locatio2?void 0:_this2$entity$locatio2.selectClosestTiles(_this2.entity.location,_this2.walkMaxDistance))||[];_this2.entity.walkTo(Random.a.fromArray(destinations,_this2.entity.id,"roam-destination",steps))}}),_this2.walkMinWait+Random.a.float(_this2.entity.id,"roam-delay",steps)*(_this2.walkMaxWait-_this2.walkMinWait))};this.destroyers.push(this.entity.$stoppedWalking.on(doTimeout)),this.destroyers.push((function(){timer&&clearTimeout(timer)})),doTimeout()}},{key:"destroy",value:function destroy(){LoiterJob_get(LoiterJob_getPrototypeOf(LoiterJob.prototype),"destroy",this).call(this),this.destroyers.forEach((function(destroy){return destroy()}))}}]),LoiterJob}(Job_Job);function PatrolJob_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PatrolJob_get(){return PatrolJob_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=PatrolJob_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},PatrolJob_get.apply(this,arguments)}function PatrolJob_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=PatrolJob_getPrototypeOf(object)););return object}function PatrolJob_setPrototypeOf(o,p){return PatrolJob_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},PatrolJob_setPrototypeOf(o,p)}function PatrolJob_createSuper(Derived){var hasNativeReflectConstruct=function PatrolJob_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PatrolJob_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PatrolJob_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PatrolJob_possibleConstructorReturn(this,result)}}function PatrolJob_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PatrolJob_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PatrolJob_getPrototypeOf(o){return PatrolJob_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PatrolJob_getPrototypeOf(o)}var PatrolJob=function(_Job){!function PatrolJob_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PatrolJob_setPrototypeOf(subClass,superClass)}(PatrolJob,_Job);var _super=PatrolJob_createSuper(PatrolJob);function PatrolJob(entity,waypoints){var _this;if(function PatrolJob_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PatrolJob),(_this=_super.call(this,entity)).destroyers=[],_this.waypoints=void 0,_this.waypointIndex=void 0,waypoints.length<2)throw new Error("A patrol must have at least 2 waypoints");return _this.waypoints=waypoints,_this.waypointIndex=0,_this}return function PatrolJob_createClass(Constructor,protoProps,staticProps){return protoProps&&PatrolJob_defineProperties(Constructor.prototype,protoProps),staticProps&&PatrolJob_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PatrolJob,[{key:"label",get:function get(){return"Patrolling between "+this.waypoints.length+" waypoints"}},{key:"start",value:function start(){var _this2=this;PatrolJob_get(PatrolJob_getPrototypeOf(PatrolJob.prototype),"start",this).call(this),this.destroyers.push(this.entity.$stoppedWalking.on((function(){setTimeout((function(){_this2.waypointIndex+=1;var next=_this2.waypoints[_this2.waypointIndex%_this2.waypoints.length];_this2.entity.walkTo(next)}),3e3)}))),this.entity.walkTo(this.waypoints[0])}},{key:"destroy",value:function destroy(){PatrolJob_get(PatrolJob_getPrototypeOf(PatrolJob.prototype),"destroy",this).call(this),this.destroyers.forEach((function(destroy){return destroy()}))}}]),PatrolJob}(Job_Job);function generateEntities_toConsumableArray(arr){return function generateEntities_arrayWithoutHoles(arr){if(Array.isArray(arr))return generateEntities_arrayLikeToArray(arr)}(arr)||function generateEntities_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function generateEntities_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return generateEntities_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return generateEntities_arrayLikeToArray(o,minLen)}(arr)||function generateEntities_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function generateEntities_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function repeat(n,cb){return Array.from(new Array(n)).map((function(_,i){return cb(i)}))}function generateEntities(seed,terrain){var walkableTiles=terrain.tiles.filter((function(c){return c.isLand()}));if(!walkableTiles.length)throw new Error("The terrain does not contain any walkable tiles!");return[].concat(generateEntities_toConsumableArray(repeat(5,(function(i){var id=seed+"-guard-"+i,start=Random.a.fromArray(walkableTiles,id,"start"),guard=new GuardPersonEntity.a(id,start),job=function generatePatrolJob(seed,entity){var _start$terrain,start=entity.location,island=null==start||null===(_start$terrain=start.terrain)||void 0===_start$terrain?void 0:_start$terrain.getIslands((function(t){return t.isLand()})).find((function(island){return island.includes(start)}));if(!start||!island)throw new Error("Got falsy start from none of the islands");return new PatrolJob(entity,[].concat(generateEntities_toConsumableArray(repeat(2+Math.floor(4*Random.a.float(entity.id,"job","waypoint_amount")),(function(i){return Random.a.fromArray(island,entity.id,"job","waypoint",i)}))),[start]))}(0,guard);return guard.doJob(job),guard}))),generateEntities_toConsumableArray(repeat(10,(function(i){var id=seed+"-person-"+i,start=Random.a.fromArray(walkableTiles,id,"start"),worker=new CivilianPersonEntity.a(id,start);return worker.doJob(new LoiterJob_LoiterJob(worker)),worker}))))}var DualMesh_Demo=function Demo(_ref){var seed=_ref.seed,game=Object(react.useMemo)((function(){return function generateEverything(){var seed=arguments.length>0&&void 0!==arguments[0]?arguments[0]:String(Date.now()),terrain=generateDualMeshTerrain(seed,20,1),entities=generateEntities(seed,terrain);return new Game_Game(seed,terrain,entities)}(seed)}),[seed]);return Object(jsx_runtime.jsxs)(react_default.a.StrictMode,{children:[Object(jsx_runtime.jsx)(GlobalStyles.a,{}),Object(jsx_runtime.jsx)(GameContext.Provider,{value:game,children:Object(jsx_runtime.jsx)(GameC_GameC,{game:game})})]})};DualMesh_Demo.displayName="Demo";var scenarios_DualMesh=DualMesh_Demo;try{DualMesh.displayName="DualMesh",DualMesh.__docgenInfo={description:"",displayName:"DualMesh",props:{seed:{defaultValue:null,description:"",name:"seed",required:!1,type:{name:"SeedI"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/scenarios/DualMesh.tsx#DualMesh"]={docgenInfo:DualMesh.__docgenInfo,name:"DualMesh",path:"src/scenarios/DualMesh.tsx#DualMesh"})}catch(__react_docgen_typescript_loader_error){}var scenarios={DualMesh:scenarios_DualMesh},meta={title:"Demos",component:scenarios.DualMesh,parameters:{controls:{expanded:!0}}},POSSIBLY_BROKEN_SEEDS=(__webpack_exports__.default=meta,[1647039315571]),Demo_stories_THREE=function THREE(args){return Object(jsx_runtime.jsx)(scenarios.DualMesh,Object.assign({},args,{asIsometric:!1,seed:1647022336452}))};Demo_stories_THREE.displayName="THREE",Demo_stories_THREE.storyName="Three.js";var Demo_stories_THREE_D=function THREE_D(args){return Object(jsx_runtime.jsx)(scenarios.DualMesh,Object.assign({},args,{asIsometric:!1,seed:POSSIBLY_BROKEN_SEEDS[0]}))};Demo_stories_THREE_D.displayName="THREE_D",Demo_stories_THREE_D.storyName="Three.js (debug)";var Demo_stories_THREE_R=function THREE_R(args){return Object(jsx_runtime.jsx)(scenarios.DualMesh,Object.assign({},args,{asIsometric:!1}))};Demo_stories_THREE_R.displayName="THREE_R",Demo_stories_THREE_R.storyName="Three.js (random)";try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Demo.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/Demo.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./stories/Objects.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"guardEntity",(function(){return Objects_stories_guardEntity})),__webpack_require__.d(__webpack_exports__,"e2",(function(){return Objects_stories_e2})),__webpack_require__.d(__webpack_exports__,"e3",(function(){return Objects_stories_e3})),__webpack_require__.d(__webpack_exports__,"e4",(function(){return Objects_stories_e4}));__webpack_require__("./node_modules/react/index.js");var _templateObject,Coordinate=__webpack_require__("./src/classes/Coordinate.ts"),BuildingEntity=__webpack_require__("./src/entities/BuildingEntity.tsx"),CivilianPersonEntity=__webpack_require__("./src/entities/CivilianPersonEntity.tsx"),GuardPersonEntity=__webpack_require__("./src/entities/GuardPersonEntity.tsx"),TreeEntity=__webpack_require__("./src/entities/TreeEntity.tsx"),styled_browser_esm=(__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js")),useRenderingController=__webpack_require__("./src/rendering/useRenderingController.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");var AsLargeAsPossibleContainer=styled_browser_esm.a.section(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\tposition: relative;\n"]))),RENDERER_OPTIONS={enableAutoRotate:!0,enablePan:!1,enableZoom:!0,fieldOfView:45,pixelRatio:window.devicePixelRatio||1,restrictCameraAngle:!1},RendererDetail_RendererDetail=function RendererDetail(_ref){var build=_ref.build,onRef=Object(useRenderingController.a)(RENDERER_OPTIONS,build).onRef;return Object(jsx_runtime.jsx)(AsLargeAsPossibleContainer,{className:"renderer-detail",ref:onRef})};RendererDetail_RendererDetail.displayName="RendererDetail";try{RendererDetail_RendererDetail.displayName="RendererDetail",RendererDetail_RendererDetail.__docgenInfo={description:"",displayName:"RendererDetail",props:{build:{defaultValue:null,description:"",name:"build",required:!0,type:{name:"(controller: ThreeController) => () => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/rendering/RendererDetail.tsx#RendererDetail"]={docgenInfo:RendererDetail_RendererDetail.__docgenInfo,name:"RendererDetail",path:"src/rendering/RendererDetail.tsx#RendererDetail"})}catch(__react_docgen_typescript_loader_error){}var entities=__webpack_require__("./src/rendering/threejs/entities.ts"),GenericTile=__webpack_require__("./src/terrain/GenericTile.ts"),util=__webpack_require__("./stories/util.tsx"),CAMERA_POSITION=(__webpack_exports__.default={title:"Objects",argTypes:{children:{control:{type:"text"}}},parameters:{controls:{expanded:!0}}},new Coordinate.a(-1,1,1)),CAMERA_FOCUS=new Coordinate.a(0,0,.25),Objects_stories_guardEntity=function guardEntity(args){return Object(jsx_runtime.jsx)(util.a,{height:"100vh",padding:0,children:Object(jsx_runtime.jsx)(RendererDetail_RendererDetail,{build:function build(controller){return controller.setCameraPosition(CAMERA_POSITION),controller.setCameraFocus(CAMERA_FOCUS),controller.addAxisHelper(void 0,1),controller.scene.add(Object(entities.a)(new GuardPersonEntity.a("test",new GenericTile.a(0,0,0)))),function(){}}})})};Objects_stories_guardEntity.displayName="guardEntity",Objects_stories_guardEntity.storyName="GuardEntity";var Objects_stories_e2=function e2(args){return Object(jsx_runtime.jsx)(util.a,{height:"100vh",padding:0,children:Object(jsx_runtime.jsx)(RendererDetail_RendererDetail,{build:function build(controller){return controller.setCameraPosition(CAMERA_POSITION),controller.setCameraFocus(CAMERA_FOCUS),controller.addAxisHelper(void 0,1),controller.scene.add(Object(entities.a)(new CivilianPersonEntity.a("test",new GenericTile.a(0,0,0)))),function(){}}})})};Objects_stories_e2.displayName="e2",Objects_stories_e2.storyName="CivilianEntity";var Objects_stories_e3=function e3(args){return Object(jsx_runtime.jsx)(util.a,{height:"100vh",padding:0,children:Object(jsx_runtime.jsx)(RendererDetail_RendererDetail,{build:function build(controller){return controller.setCameraPosition(CAMERA_POSITION),controller.setCameraFocus(CAMERA_FOCUS),controller.addAxisHelper(void 0,1),controller.scene.add(Object(entities.a)(new BuildingEntity.a("test",new GenericTile.a(0,0,0)))),function(){}}})})};Objects_stories_e3.displayName="e3",Objects_stories_e3.storyName="BuildingEntity";var Objects_stories_e4=function e4(args){return Object(jsx_runtime.jsx)(util.a,{height:"100vh",padding:0,children:Object(jsx_runtime.jsx)(RendererDetail_RendererDetail,{build:function build(controller){return controller.setCameraPosition(CAMERA_POSITION),controller.setCameraFocus(CAMERA_FOCUS),controller.addAxisHelper(void 0,1),controller.scene.add(Object(entities.a)(new TreeEntity.a("test",new GenericTile.a(0,0,0)))),function(){}}})})};Objects_stories_e4.displayName="e4",Objects_stories_e4.storyName="TreeEntity";try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/Objects.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/Objects.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./stories/UI.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ui1",(function(){return ui1})),__webpack_require__.d(__webpack_exports__,"ui2",(function(){return ui2}));__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/react/index.js");var _src_ui_ActiveEntityOverlay__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/ui/ActiveEntityOverlay.tsx"),_src_entities_GuardPersonEntity__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/entities/GuardPersonEntity.tsx"),_src_terrain_GenericTile__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/terrain/GenericTile.ts"),_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./stories/util.tsx"),_src_ui_ContextMenu__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/ui/ContextMenu.tsx"),_src_ui_GlobalStyles__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/ui/GlobalStyles.tsx"),_src_entities_CivilianPersonEntity__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/entities/CivilianPersonEntity.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_exports__.default={title:"UI",argTypes:{children:{control:{type:"text"}}},parameters:{controls:{expanded:!0}}};var DemoJob=function(){function DemoJob(label){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DemoJob),this.label=void 0,this.label=label}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DemoJob,[{key:"start",value:function start(){}},{key:"destroy",value:function destroy(){}}]),DemoJob}(),ui1=function ui1(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_GlobalStyles__WEBPACK_IMPORTED_MODULE_7__.a,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_util__WEBPACK_IMPORTED_MODULE_5__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ActiveEntityOverlay__WEBPACK_IMPORTED_MODULE_2__.a,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_util__WEBPACK_IMPORTED_MODULE_5__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ActiveEntityOverlay__WEBPACK_IMPORTED_MODULE_2__.a,{entity:(entity=new _src_entities_GuardPersonEntity__WEBPACK_IMPORTED_MODULE_3__.a("test",new _src_terrain_GenericTile__WEBPACK_IMPORTED_MODULE_4__.a(0,0,0)),entity.doJob(new DemoJob("Doing the rounds")),entity)})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_util__WEBPACK_IMPORTED_MODULE_5__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ActiveEntityOverlay__WEBPACK_IMPORTED_MODULE_2__.a,{entity:function(){var entity=new _src_entities_CivilianPersonEntity__WEBPACK_IMPORTED_MODULE_8__.a("test",new _src_terrain_GenericTile__WEBPACK_IMPORTED_MODULE_4__.a(0,0,0));return entity.doJob(new DemoJob("Wandering around")),entity}()})})]});var entity};ui1.storyName="<ActiveEntityOverlay>";var ui2=function ui2(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_util__WEBPACK_IMPORTED_MODULE_5__.a,{height:250,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_GlobalStyles__WEBPACK_IMPORTED_MODULE_7__.a,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{style:{position:"absolute",bottom:"1em",left:"50%"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_src_ui_ContextMenu__WEBPACK_IMPORTED_MODULE_6__.a,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ContextMenu__WEBPACK_IMPORTED_MODULE_6__.b,{onClick:function onClick(){return window.alert("You asked for it")},children:"Do something"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ContextMenu__WEBPACK_IMPORTED_MODULE_6__.b,{children:"Don't something"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ContextMenu__WEBPACK_IMPORTED_MODULE_6__.b,{children:"Don't something else"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ContextMenu__WEBPACK_IMPORTED_MODULE_6__.b,{children:"Don't anything"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ContextMenu__WEBPACK_IMPORTED_MODULE_6__.b,{children:"Don't all"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_src_ui_ContextMenu__WEBPACK_IMPORTED_MODULE_6__.c,{children:"What else?"})]})})]})};ui2.displayName="ui2",ui2.storyName="<ContextMenu>";try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/UI.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"stories/UI.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./stories/util.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Backdrop}));var _templateObject;__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var Backdrop=__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js").a.div(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n\tposition: relative;\n\theight: ",";\n\tpadding: ",";\n\tbackground-image: linear-gradient(\n\t\t45deg,\n\t\trgba(255, 255, 255, 0.02) 25%,\n\t\trgba(0, 0, 0, 0.02) 25%,\n\t\trgba(0, 0, 0, 0.02) 50%,\n\t\trgba(255, 255, 255, 0.02) 50%,\n\t\trgba(255, 255, 255, 0.02) 75%,\n\t\trgba(0, 0, 0, 0.02) 75%,\n\t\trgba(0, 0, 0, 0.02) 100%\n\t);\n\tbackground-size: 56.57px 56.57px;\n\tmargin-bottom: ",";\n\tbox-sizing: border-box;\n"])),(function(_ref){var height=_ref.height;return void 0===height?"auto":"number"==typeof height?height+"px":String(height)}),(function(_ref2){var _ref2$padding=_ref2.padding,padding=void 0===_ref2$padding?"2em":_ref2$padding;return"number"==typeof padding?padding+"px":String(padding)}),(function(_ref3){return"100vh"===_ref3.height?0:"1em"}));try{Backdrop.displayName="Backdrop",Backdrop.__docgenInfo={description:"",displayName:"Backdrop",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string | number"}},padding:{defaultValue:null,description:"",name:"padding",required:!1,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/util.tsx#Backdrop"]={docgenInfo:Backdrop.__docgenInfo,name:"Backdrop",path:"stories/util.tsx#Backdrop"})}catch(__react_docgen_typescript_loader_error){}},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){},2:function(module,exports){}},[[0,2,3]]]);
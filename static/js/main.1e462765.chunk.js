(this["webpackJsonpkreuzzeug-im-nagelhosen"]=this["webpackJsonpkreuzzeug-im-nagelhosen"]||[]).push([[0],{105:function(A,t,n){"use strict";n.r(t);var e=n(30),i=n(1),r=n.n(i),o=n(41),a=n.n(o),c=n(45),s=n(15),u=n(8),l=n(3),h=n(4),f=function(){function A(t,n,e){Object(l.a)(this,A),this.terrain=void 0,this.entities=void 0,this.seed=void 0,this.seed=t,this.terrain=n,this.entities=e}return Object(h.a)(A,[{key:"play",value:function(){var A=this.entities.map((function(A){return A.play()}));return function(){return A.forEach((function(A){return A()}))}}}]),A}(),v=n(16),d=n.n(v),g=n(6),j=n(29),b=n(62),O=n(9),x=new(function(){function A(t,n){Object(l.a)(this,A),this.degrees=void 0,this.tileSize=void 0,this._cos=void 0,this._sin=void 0,this._tan=void 0,this.degrees=t,this.tileSize=n;var e=t*(Math.PI/180);this._cos=Math.cos(e),this._sin=Math.sin(e),this._tan=Math.tan(e)}return Object(h.a)(A,[{key:"toPixels",value:function(A,t,n){var e=(A+t)*this._cos,i=(A-t)*this._sin,r=this.tileSize;return[e*this.tileSize,i*this.tileSize-r*n]}},{key:"toCoords",value:function(A,t){var n=this._tan*A+t;return[((t-n)/-this._sin-n)/this.tileSize,n/this.tileSize,0]}}]),A}())(30,32);function C(A,t){var n=t.z-A.z;if(n)return-n;var e=t.x-A.x;if(e)return-e;var i=A.y-t.y;return i?-i:0}var p,B=n(2),z=function(A){var t=A.path,n=A.stroke,e=void 0===n?"black":n,i=A.strokeWidth,r=void 0===i?0:i,o=t.map((function(A){return x.toPixels.apply(x,Object(O.a)(A))})).map((function(A){return A.map((function(A){return A+0}))}));return Object(B.jsx)(B.Fragment,{children:o.reduce((function(A,t,n,i){return n?A.concat([Object(B.jsx)("line",{x1:t[0],y1:t[1],x2:i[n-1][0],y2:i[n-1][1],stroke:e,strokeWidth:String(r)},n)]):A}),[])})},m=function(A){var t=A.size,n=void 0===t?4:t,e=[[[-1*n,0,0],[n,0,0]],[[0,-1*n,0],[0,n,0]],[[0,0,-1*n],[0,0,n]]];return Object(B.jsx)(B.Fragment,{children:e.map((function(A,t){return Object(B.jsx)(z,{path:A,stroke:"rgba(0,0,0)",strokeWidth:.5},t)}))})},M=function(A){var t=A.x,n=void 0===t?0:t,e=A.y,r=void 0===e?0:e,o=A.z,a=void 0===o?0:o,c=A.children,s=A.crosshairSize,u=void 0===s?0:s,l=Object(i.useMemo)((function(){return x.toPixels(n,r,a)}),[n,r,a]);return Object(B.jsxs)("svg",{x:l[0],y:l[1],overflow:"visible",children:[u?Object(B.jsx)(m,{size:u}):null,c]})},w=function(A){var t=A.moveTo,n=A.moveSpeed,e=A.onRest,r=A.children,o=A.crosshairSize,a=void 0===o?0:o,c=A.onClick,s=Object(i.useMemo)((function(){return x.toPixels(t.x,t.y,t.z)}),[t]),u=Object(g.a)(s,2),l=u[0],h=u[1],f=Object(i.useMemo)((function(){return[l,h]}),[]),v=Object(g.a)(f,2),d=v[0],O=v[1],C=Object(j.useSpring)({to:{x:l,y:h},config:{duration:n},from:{x:d,y:O},onRest:e});return Object(B.jsxs)(b.animated.svg,{x:C.x,y:C.y,overflow:"visible",onClick:c,children:[a?Object(B.jsx)(m,{size:a}):null,r]})},Q=n(33),y=n(10),k={};k.background=d()("#cde1fc"),k.white=d()("#fff"),k.terrain=d()("#a1d83c"),k.beach=d()("#f7d884"),k.highlightedTerrain=k.terrain.lighten(1),k.terrainStroke=k.terrain.darken(.5).saturate(.3);var E=Object(e.b)(p||(p=Object(y.a)(["\n\t:root {\n\t}\n\n\tbody {\n\t\tbackground: "," url(",");\n\t}\n\n\tp {\n\t\tmargin: 0;\n\t}\n"])),k.background.string(),"data:image/png;base64,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"),F=["size","fill","strokeLinecap","stroke","strokeWidth","innerStroke","innerStrokeWidth"];function I(A){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return A.map((function(A){return x.toPixels.apply(x,Object(O.a)(A))})).map((function(A){return A.map((function(A){return A+t}))}))}var P,U,G,Y,X,D=x.toPixels(1,0,1).map((function(A){return A+0})),R=I([[1,1,0],[1,1,1],[0,1,1],[0,0,1],[0,0,0],[1,0,0]]),H=I([[0,0,0],[0,0,1],[1,0,1],[1,0,0]]),K=I([[1,0,0],[1,1,0],[1,1,1],[1,0,1]]),Z=I([[0,0,1],[1,0,1],[1,1,1],[0,1,1]]),q=function(A){var t=A.size,n=void 0===t?1:t,e=A.fill,i=void 0===e?k.terrain:e,r=A.strokeLinecap,o=void 0===r?"round":r,a=A.stroke,c=void 0===a?i.darken(.3).saturate(.3):a,u=A.strokeWidth,l=void 0===u?1:u,h=A.innerStroke,f=void 0===h?i.lighten(.4).desaturate(.8):h,v=A.innerStrokeWidth,d=void 0===v?l:v,g=Object(Q.a)(A,F),j=f&&f.string(),b=c&&c.string(),O={};return(g.onClick||g.onContextMenu)&&(O.cursor="pointer"),Object(B.jsxs)("g",Object(s.a)(Object(s.a)({},g),{},{style:O,children:[i&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("polygon",{points:H.map((function(A){return A.map((function(A){return A*n})).join(",")})).join(" "),fill:i.string(),strokeWidth:0},"xz"),Object(B.jsx)("polygon",{points:Z.map((function(A){return A.map((function(A){return A*n})).join(",")})).join(" "),fill:i.lighten(.2).string(),strokeWidth:0},"xy"),Object(B.jsx)("polygon",{points:K.map((function(A){return A.map((function(A){return A*n})).join(",")})).join(" "),fill:i.darken(.2).string(),strokeWidth:0},"yz")]}),f&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("line",{x1:D[0]*n,y1:D[1]*n,x2:R[3][0]*n,y2:R[3][1]*n,stroke:j,strokeWidth:d,strokeLinecap:o},"x-bar"),Object(B.jsx)("line",{x1:D[0]*n,y1:D[1]*n,x2:R[1][0]*n,y2:R[1][1]*n,stroke:j,strokeWidth:d,strokeLinecap:o},"y-bar"),Object(B.jsx)("line",{x1:D[0]*n,y1:D[1]*n,x2:R[5][0]*n,y2:R[5][1]*n,stroke:j,strokeWidth:d,strokeLinecap:o},"z-bar")]}),Object(B.jsx)("polygon",{points:R.map((function(A){return A.map((function(A){return A*n})).join(",")})).join(" "),stroke:b,fill:"transparent",strokeWidth:l,strokeLinecap:o},"outline")]}))},L=n(12),V=["zoom"],S=1/Math.pow(2,.5);function J(A){return Math.round(A)}var N,T,W,_,$,AA,tA=L.a.div(P||(P=Object(y.a)(["\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 50%;\n\twidth: 0;\n\theight: 0;\n\ttransition: transform 5s;\n\t> * {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t}\n"]))),nA=function(A){var t=A.overlay,n=A.center,e=void 0===n?{x:0,y:0,z:0}:n,r=A.zoom,o=void 0===r?1:r,a=A.children,c=Object(i.useMemo)((function(){return x.toPixels(e.x,e.y,e.z).map((function(A,t){return J(-A)+(t?0:.5)}))}),[e]),s=Object(g.a)(c,2),u=s[0],l=s[1],h={transform:"translate(\n\t\t\t\t".concat(u*o,"px,\n\t\t\t\t").concat(l*o,"px\n\t\t\t)")};return Object(B.jsxs)(tA,{style:h,children:[Object(B.jsx)(eA,{zoom:o,children:a}),t]})},eA=function(A){var t=A.zoom,n=void 0===t?1:t,e=Object(Q.a)(A,V);return Object(B.jsx)("svg",Object(s.a)({width:"1px",height:"1px",overflow:"visible",shapeRendering:"geometricPrecision",viewBox:[0,0,1/n,1/n].join(" ")},e))},iA=L.a.div(U||(U=Object(y.a)(["\n\t--scale-val: ",";\n\n\tposition: absolute;\n\ttransform-origin: top left;\n\ttransform: scale(var(--scale-val));\n"])),(function(A){var t=A.zoom;return void 0===t?1:t})),rA=Object(L.a)(iA)(G||(G=Object(y.a)(["\n\ttransform: skewY(-","deg)\n\t\tscale(calc("," * var(--scale-val)), var(--scale-val));\n"])),x.degrees,S),oA=Object(L.a)(iA)(Y||(Y=Object(y.a)(["\n\ttransform: rotate(-","deg) skewX(","deg)\n\t\tscale(\n\t\t\tcalc("," * var(--scale-val)),\n\t\t\tcalc("," * var(--scale-val))\n\t\t);\n"])),x.degrees,x.degrees,Math.sqrt(S),S),aA=Object(L.a)(iA)(X||(X=Object(y.a)(["\n\ttransform: skewY(","deg)\n\t\tscale(calc("," * var(--scale-val)), var(--scale-val));\n"])),x.degrees,S),cA=function(A){var t=A.location,n=A.zoom,e=void 0===n?1:n,i=A.axis,r=A.width,o=A.height,a=A.children,c=t.x,s=t.y,u=t.z,l=x.toPixels(c,s,u).map((function(A){return J(A*e)})),h=Object(g.a)(l,2),f=h[0],v=h[1],d=x.toPixels(0,r,o).map((function(A){return J(A*e)})),j=Object(g.a)(d,1)[0],b="y"===i?rA:"x"===i?aA:"z"===i?oA:iA;return Object(B.jsx)(b,{zoom:e,style:{left:J(f),top:J(v),width:J(i?j/S:j)+"px",height:Math.abs(o*x.tileSize/("z"===i?S:1))+"px"},children:a})},sA=L.a.div(N||(N=Object(y.a)(["\n\tposition: relative;\n\theight: ",";\n\tbackground-image: linear-gradient(\n\t\t45deg,\n\t\trgba(255, 255, 255, 0.02) 25%,\n\t\trgba(0, 0, 0, 0.02) 25%,\n\t\trgba(0, 0, 0, 0.02) 50%,\n\t\trgba(255, 255, 255, 0.02) 50%,\n\t\trgba(255, 255, 255, 0.02) 75%,\n\t\trgba(0, 0, 0, 0.02) 75%,\n\t\trgba(0, 0, 0, 0.02) 100%\n\t);\n\tbackground-size: 56.57px 56.57px;\n\tmargin-bottom: 1em;\n"])),(function(A){var t=A.height;return"".concat(void 0===t?180:t,"px")})),uA=function(){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(sA,{children:Object(B.jsxs)(nA,{zoom:1,center:{x:.5,y:.5,z:.5},children:[Object(B.jsx)(M,{x:-2,y:-2,z:0,children:Object(B.jsx)(q,{})}),Object(B.jsx)(M,{x:0,y:0,z:0,children:Object(B.jsx)(q,{innerStroke:d()("#630a0a7d"),fill:d()("#960202")})}),Object(B.jsx)(M,{x:2,y:2,z:0,children:Object(B.jsx)(q,{fill:d()("#ffffff7f"),onClick:function(){return window.alert("Clicky click!")}})})]})}),Object(B.jsx)(sA,{children:Object(B.jsxs)(nA,{center:{x:1,y:0,z:.5},children:[Object(B.jsx)(M,{x:0,y:0,z:0,children:Object(B.jsx)(q,{})}),Object(B.jsx)(M,{x:1,y:0,z:0,children:Object(B.jsx)(q,{})}),Object(B.jsx)(M,{x:2,y:0,z:0,children:Object(B.jsx)(q,{})}),Object(B.jsx)(M,{x:2,y:-1,z:0,children:Object(B.jsx)(q,{})})]})})]})},lA=function(){function A(){Object(l.a)(this,A),this.listeners=[]}return Object(h.a)(A,[{key:"on",value:function(A){var t=this;return this.listeners.push(A),function(){t.listeners.splice(t.listeners.indexOf(A))}}},{key:"emit",value:function(){for(var A=arguments.length,t=new Array(A),n=0;n<A;n++)t[n]=arguments[n];this.listeners.forEach((function(A){return A.apply(void 0,t)}))}},{key:"clear",value:function(){this.listeners=[]}}]),A}(),hA=L.a.div(T||(T=Object(y.a)(["\n\twidth: 0;\n\theight: 0;\n\tborder-left: 6px solid transparent;\n\tborder-right: 6px solid transparent;\n\tborder-top: 6px solid rgba(255, 255, 255, 0.5);\n\ttransform: translate(calc(-50% + 0px), -6px);\n"]))),fA=L.a.div(W||(W=Object(y.a)(["\n\tposition: absolute;\n\tbottom: 100%;\n\tleft: 50%;\n\tbackdrop-filter: blur(2px);\n\ttransform: translate(-50%, -6px);\n"]))),vA=L.a.div(_||(_=Object(y.a)(["\n\tborder: 1px solid rgba(255, 255, 255, 0.5);\n\tborder-radius: 3px;\n\toverflow: hidden;\n"]))),dA=L.a.button($||($=Object(y.a)(["\n\tborder: none;\n\tdisplay: block;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\n\t// Same as HorizontalLinkListItem\n\tpadding: 0.5em 1em;\n\twhite-space: nowrap;\n\ttransition: background-color 0.5s;\n\tcolor: white;\n\tbackground-color: transparent;\n\t&:hover {\n\t\tbackground-color: rgba(255, 255, 255, 0.5);\n\t\tcursor: pointer;\n\t}\n"]))),gA=L.a.button(AA||(AA=Object(y.a)(["\n\tborder: none;\n\tdisplay: block;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\n\t// Same as HorizontalLinkListItem\n\tpadding: 0.5em 1em;\n\twhite-space: nowrap;\n\ttransition: background-color 0.5s;\n\tcolor: white;\n\tbackground-color: rgba(255, 255, 255, 0.1);\n"]))),jA=function(){function A(){Object(l.a)(this,A),this.state=!1,this.$changed=new lA}return Object(h.a)(A,[{key:"open",value:function(A,t){this.state={location:A,contents:t},this.$changed.emit(this.state)}},{key:"isOpen",value:function(){return!!this.state}},{key:"close",value:function(){this.state=!1,this.$changed.emit(this.state)}}]),A}(),bA=function(A){var t=A.zoom,n=void 0===t?1:t,e=CA().contextMenu,r=Object(i.useState)(null===e||void 0===e?void 0:e.state),o=Object(g.a)(r,2),a=o[0],c=o[1];return Object(i.useEffect)((function(){if(!e)throw new Error("Shit.");return e.$changed.on(c)}),[e]),a?Object(B.jsxs)(cA,{location:a.location,width:0,height:0,zoom:n,children:[Object(B.jsx)(fA,{children:Object(B.jsx)(vA,{children:a.contents})}),Object(B.jsx)(hA,{})]}):null},OA=function A(t){Object(l.a)(this,A),this.contextMenu=new jA,this.scene=void 0,this.scene=t},xA=Object(i.createContext)(null),CA=function(){var A=Object(i.useContext)(xA);if(!A)throw new Error("Game context does not exist");return A},pA=n(5),BA=n(7),zA=function(){function A(t){Object(l.a)(this,A),this.scoreFunction=void 0,this.content=[],this.content=[],this.scoreFunction=t}return Object(h.a)(A,[{key:"push",value:function(A){this.content.push(A),this.sinkDown(this.content.length-1)}},{key:"pop",value:function(){var A=this.content[0],t=this.content.pop();return t?(this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),A):A}},{key:"remove",value:function(A){var t=this.content.indexOf(A),n=this.content.pop();n&&t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(A)?this.sinkDown(t):this.bubbleUp(t))}},{key:"size",value:function(){return this.content.length}},{key:"rescoreElement",value:function(A){this.sinkDown(this.content.indexOf(A))}},{key:"sinkDown",value:function(A){for(var t=this.content[A];A>0;){var n=(A+1>>1)-1,e=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(e)))break;this.content[n]=t,this.content[A]=e,A=n}}},{key:"bubbleUp",value:function(A){for(var t=this.content.length,n=this.content[A],e=this.scoreFunction(n);;){var i=A+1<<1,r=i-1,o=null,a=void 0;if(r<t){var c=this.content[r];(a=this.scoreFunction(c))<e&&(o=r)}if(i<t){var s=this.content[i];this.scoreFunction(s)<(null===o?e:a)&&(o=i)}if(null===o)break;this.content[A]=this.content[o],this.content[o]=n,A=o}}}]),A}(),mA=function(A,t){var n=Math.sqrt(2),e=Math.abs(t.x-A.x),i=Math.abs(t.y-A.y);return 1*(e+i)+(n-2)*Math.min(e,i)};var MA=function(){function A(t,n){var e=this;Object(l.a)(this,A),this.terrain=void 0,this.options=void 0,this.cache=void 0,this.heap=void 0,this.heuristic=void 0,this.terrain=t,this.options=n,this.cache=new Map,this.heap=new zA((function(A){var t=e.cache.get(A);if(!t)throw new Error("This is weird");return t.f})),this.heuristic=mA}return Object(h.a)(A,[{key:"find",value:function(A,t){var n=A,e={coordinate:n,h:this.heuristic(A,t),g:0,f:0,parent:null,closed:!0,visited:!0};for(this.cache.set(A,e),this.heap.push(A);this.heap.size()>0;){var i=this.heap.pop(),r=this.cache.get(i);if(!r)throw new Error("Somehow opening a node that has no heuristic data");if(i.equals(t))return this.tracePath(r);r.closed=!0;for(var o=this.terrain.getNeighborTiles(i),a=0,c=o.length;a<c;++a){var s,u=o[a],l=this.cache.get(u);if(!(null===(s=l)||void 0===s?void 0:s.closed)&&u.isLand()){var h=r.g+(this.terrain,1),f=!!l;if(!f||l&&h<l.g){var v=this.heuristic(u,t);l={coordinate:u,h:v,g:h,f:h+v,parent:r,closed:!0,visited:!0},this.cache.set(u,l),this.options.closest&&(l.h<e.h||l.h===e.h&&l.g<e.g)&&(n=u,e=l),f?this.heap.rescoreElement(u):this.heap.push(u)}}}}return this.options.closest?this.tracePath(e):(console.warn("-- No path --"),[])}},{key:"tracePath",value:function(A){for(var t=A,n=[];t.parent;)n.unshift(t),t=t.parent;return n.map((function(A){return A.coordinate}))}}]),A}(),wA="\n\tPaul, Paolo, Pablo, Pavel, Pasha, Pau, Paulo, Pol, Pavlo, Paavo, Pali, Pal, Paulin, Pava, P\xe5vel, Paulino, Pawel,\n\tPaavali, Pauel, Pavlos, Pavlusha, Poul, Pusha, Pashenka, Pavl\xedk, Poll, P\xf3l, Pavlousek, Pawelek, P\xe5l, Pavilcek, P\xe1l\n".replace(/\t|\n/g,"").split(",").map((function(A){return A.trim()})),QA="\n\tMia, Mare, Miriam, Mary, Mara, Molly, Maren, Mariah, Marisol, Maria, Moira, Polly, Marie, Mariana, Marilyn, Malia,\n\tMari, Manon, Marissa, Mariam, Marion, Ria, Mariella, Milou, Mitzi, Marielle, Maribel, Maura, Mamie, Maureen, Mariel,\n\tMarisa, Maryam, Mairi, Malou, Marietta, Maija, Maire, Maritza, Maricela, Marya, Marika, Isamar, My, Mariska, Maryse,\n\tMariela, Maira, Marita, Mariette,\n".replace(/\t|\n/g,"").split(",").map((function(A){return A.trim()}));var yA=function(){},kA=function(A){Object(pA.a)(n,A);var t=Object(BA.a)(n);function n(A,e){var i;Object(l.a)(this,n),(i=t.call(this,A,e)).$startedWalking=new lA,i.$stoppedWalking=new lA,i.$startedWalkStep=new lA,i.$stoppedWalkStep=new lA,i.passport=void 0,i.Component=function(){return Object(B.jsx)("circle",{cx:0,cy:0,r:"5",fill:"white",stroke:"black"})};var r=Math.random()<.5;return i.passport={firstName:r?QA[Math.floor(Math.random()*QA.length)]:wA[Math.floor(Math.random()*wA.length)]},i.$stoppedWalkStep.on((function(A){i.location=A})),i}return Object(h.a)(n,[{key:"walkTo",value:function(A){var t=this;if(!this.location.terrain)throw new Error('Entity "'.concat(this.id,'" is trying to path in a detached coordinate'));var n=new MA(this.location.terrain,{closest:!0}).find(this.location,A);if(!n.length)return console.warn("Path was zero steps long, finishing early.",this),void this.$stoppedWalking.emit();var e=this.$stoppedWalkStep.on((function(){var A=n.shift();A?t.doPathStep(A):(t.$stoppedWalking.emit(),e())}));this.doPathStep(n.shift())}},{key:"doPathStep",value:function(A){A.hasNaN(),this.$startedWalkStep.emit(A)}},{key:"label",get:function(){return this.passport.firstName}}]),n}(function(){function A(t,n){Object(l.a)(this,A),this.id=void 0,this.Component=function(){return null},this.location=void 0,this.job=void 0,this.id=t,this.location=n}return Object(h.a)(A,[{key:"label",get:function(){throw new Error("".concat(this.constructor.name," ").concat(this.id))}},{key:"play",value:function(){var A;return(null===(A=this.job)||void 0===A?void 0:A.start())||yA}},{key:"doJob",value:function(A){this.job=A}}]),A}()),EA=function(A){var t=A.entity,n=A.onClick,e=Object(i.useState)({destination:t.location,duration:0}),r=Object(g.a)(e,2),o=r[0],a=o.destination,c=o.duration,s=r[1];!function(A){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(i.useCallback)((function(){var t=A();return function(){return t.forEach((function(A){return A()}))}}),t);Object(i.useEffect)(n,[n])}((function(){return[t.$startedWalkStep.on((function(A){return s({destination:A,duration:500*t.location.euclideanDistanceTo(A)})}))]}),[t.$startedWalkStep]);var u=Object(i.useCallback)((function(){return t.$stoppedWalkStep.emit(a)}),[t.$stoppedWalkStep,a]);return Object(B.jsx)(w,{moveTo:a,moveSpeed:c,onRest:u,onClick:n,children:Object(B.jsx)(t.Component,{})})},FA=function(A){Object(pA.a)(n,A);var t=Object(BA.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"label",get:function(){return"".concat(this.passport.firstName)}}]),n}(kA),IA=function(){function A(t,n,e){Object(l.a)(this,A),this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=n,this.z=e}return Object(h.a)(A,[{key:"equals",value:function(A){return this===A||A&&this.x===A.x&&this.y===A.y&&this.z===A.z}},{key:"transform",value:function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.x+=A,this.y+=t,this.z+=n,this}},{key:"hasNaN",value:function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)}},{key:"manhattanDistanceTo",value:function(A){return Math.abs(this.x-A.x)+Math.abs(this.y-A.y)+Math.abs(this.z-A.z)}},{key:"euclideanDistanceTo",value:function(A){var t=Math.sqrt(Math.pow(this.x-A.x,2)+Math.pow(this.y-A.y,2));return Math.sqrt(Math.pow(t,2)+Math.pow(this.z-A.z,2))}},{key:"toString",value:function(){return[this.x,this.y,this.z].join(",")}}],[{key:"clone",value:function(t){return new A(t.x,t.y,t.z)}}]),A}(),PA=.25,UA=new IA(-.125,-.125,-.0625),GA=function(A){Object(pA.a)(n,A);var t=Object(BA.a)(n);function n(){var A;Object(l.a)(this,n);for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(A=t.call.apply(t,[this].concat(i))).Component=function(){return Object(B.jsx)(M,Object(s.a)(Object(s.a)({},UA),{},{children:Object(B.jsx)(q,{size:PA,fill:d()("#227d5e"),stroke:d()("#227d5e").mix(d()("#000"),.3),innerStroke:d()("#227d5e").mix(d()("#fff"),.3)})}))},A}return Object(h.a)(n,[{key:"label",get:function(){return"Guardsman ".concat(this.passport.firstName)}}]),n}(kA),YA=n(63),XA=n.n(YA),DA=function(){function A(){Object(l.a)(this,A)}return Object(h.a)(A,null,[{key:"float",value:function(){for(var A=arguments.length,t=new Array(A),n=0;n<A;n++)t[n]=arguments[n];return XA()(t.join("/")).double()}},{key:"arrayItem",value:function(A){for(var t=arguments.length,n=new Array(t>1?t-1:0),e=1;e<t;e++)n[e-1]=arguments[e];var i=Math.floor(this.float.apply(this,n)*A.length);return A[i]}}]),A}(),RA=function(){function A(t){Object(l.a)(this,A),this.entity=void 0,this.entity=t}return Object(h.a)(A,[{key:"label",get:function(){throw new Error("Not implemented for ".concat(this.constructor.name))}},{key:"start",value:function(){throw new Error("Not implemented for ".concat(this.constructor.name))}}]),A}(),HA=function(A){Object(pA.a)(n,A);var t=Object(BA.a)(n);function n(){var A;Object(l.a)(this,n);for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(A=t.call.apply(t,[this].concat(i))).walkMinWait=4e3,A.walkMaxWait=15e3,A.walkChanceOnRoll=.3,A.walkMaxDistance=3,A}return Object(h.a)(n,[{key:"label",get:function(){return"Loitering"}},{key:"start",value:function(){var A=this,t=0,n=function n(){return setTimeout((function(){var e,i;if(Math.random()>A.walkChanceOnRoll)n();else{t++;var r=(null===(e=A.entity.location)||void 0===e||null===(i=e.terrain)||void 0===i?void 0:i.selectClosestTiles(A.entity.location,A.walkMaxDistance))||[];A.entity.walkTo(DA.arrayItem(r,A.entity.id,"roam-destination",t))}}),A.walkMinWait+DA.float(A.entity.id,"roam-delay",t)*(A.walkMaxWait-A.walkMinWait))},e=[this.entity.$stoppedWalking.on(n)];return n(),function(){return e.forEach((function(A){return A()}))}}}]),n}(RA),KA=function(A){Object(pA.a)(n,A);var t=Object(BA.a)(n);function n(A,e){var i;if(Object(l.a)(this,n),(i=t.call(this,A)).waypoints=void 0,i.waypointIndex=void 0,e.length<2)throw new Error("A patrol must have at least 2 waypoints");return i.waypoints=e,i.waypointIndex=0,i}return Object(h.a)(n,[{key:"label",get:function(){return"Patrolling between ".concat(this.waypoints.length," waypoints")}},{key:"start",value:function(){var A=this,t=[this.entity.$stoppedWalking.on((function(){setTimeout((function(){A.waypointIndex+=1;var t=A.waypoints[A.waypointIndex%A.waypoints.length];A.entity.walkTo(t)}),3e3)}))];return this.entity.walkTo(this.waypoints[0]),function(){t.forEach((function(A){return A()}))}}}]),n}(RA);function ZA(A,t){return Array.from(new Array(A)).map((function(A,n){return t(n)}))}function qA(A,t){var n=t.tiles.filter((function(A){return A.isLand()}));return[].concat(Object(O.a)(ZA(5,(function(t){var e=A+"-guard-"+t,i=DA.arrayItem(n,e,"start"),r=new GA(e,i),o=function(A,t){var n,e=t.location,i=null===(n=e.terrain)||void 0===n?void 0:n.getIslands().find((function(A){return A.includes(e)}));if(!i)throw new Error("Got falsy start from none of the islands");return new KA(t,[].concat(Object(O.a)(ZA(2+Math.floor(4*DA.float(t.id,"job","waypoint_amount")),(function(A){return DA.arrayItem(i,t.id,"job","waypoint",A)}))),[e]))}(0,r);return r.doJob(o),r}))),Object(O.a)(ZA(10,(function(t){var e=A+"-person-"+t,i=DA.arrayItem(n,e,"start"),r=new FA(e,i);return r.doJob(new HA(r)),r}))))}var LA,VA,SA,JA,NA,TA=n(43),WA=n(25),_A=n(64),$A=n.n(_A),At=n(65),tt=n.n(At),nt=["tile"],et=k.terrain.string(),it=k.beach.string(),rt=k.terrainStroke.string(),ot=k.terrainStroke.opaquer(-.8).string(),at=function(A){var t=A.tile,n=Object(Q.a)(A,nt),e=Object(i.useState)(!1),r=Object(g.a)(e,2),o=r[0],a=r[1],c=Object(i.useMemo)((function(){var A;if(t.isLand()||(null===(A=t.neighbors)||void 0===A?void 0:A.some((function(A){return A.isLand()})))){if(!t.outlinePoints||t.outlinePoints.length<3)throw new Error("Not a polygon");var n=[].concat(Object(O.a)(t.outlinePoints),[t.outlinePoints[0]]).map((function(A){return x.toPixels(A.x,A.y,A.z).join(",")})).join(" ");return Object(B.jsx)("polygon",{points:n})}}),[t]);return c?Object(B.jsx)("g",Object(s.a)(Object(s.a)({className:"dual-mesh-tile",fill:t.isLand()?o?it:et:"transparent",stroke:t.isLand()?rt:ot},n),{},{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:c})):null},ct=function(A){var t=A.terrain,n=A.onTileClick,e=A.onTileContextMenu,r=Object(i.useMemo)((function(){return t.getTilesInRenderOrder().map((function(A){return Object(B.jsx)(at,{tile:A,onClick:n?function(t){t.preventDefault(),t.stopPropagation(),n(t,A)}:n,onContextMenu:e?function(t){t.preventDefault(),e(t,A)}:e},A.toString())}))}),[t,n,e]);return Object(B.jsx)("g",{className:"dual-mesh-terrain",children:r})},st=function(A){Object(pA.a)(n,A);var t=Object(BA.a)(n);function n(){var A;Object(l.a)(this,n);for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(A=t.call.apply(t,[this].concat(i))).terrain=void 0,A}return Object(h.a)(n,[{key:"equals",value:function(A){return this===A||A&&this.x===A.x&&this.y===A.y}},{key:"isLand",value:function(){return this.z>=0}},{key:"toString",value:function(){return"("+[this.x,this.y].map((function(A){return A.toFixed(2)})).join(",")+")"}}],[{key:"clone",value:function(A){var t=new n(A.x,A.y,A.z);return t.terrain=A.terrain,t}}]),n}(IA),ut=function(){function A(t){Object(l.a)(this,A),this._tilesInRenderOrder=null,this.tiles=[],this.islands=new Map,this.Component=function(){throw new Error("Not implemented")},this.tiles=t}return Object(h.a)(A,[{key:"selectContiguousTiles",value:function(A){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(A){return A.isLand()},n=[],e=[],i=[A];i.length;){var r=i.shift();n.push(r);var o=this.getNeighborTiles(r).filter((function(A){return!e.includes(A)}));e.splice.apply(e,[0,0,r].concat(Object(O.a)(o))),i.splice.apply(i,[0,0].concat(Object(O.a)(o.filter(t))))}return n}},{key:"selectClosestTiles",value:function(A,t){return this.selectContiguousTiles(A,(function(n){return n.isLand()&&A.euclideanDistanceTo(n)<=t}))}},{key:"getIslands",value:function(){var A=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(A){return A.isLand()},n=this.islands.get(t);if(n)return n;for(var e=this.tiles.slice(),i=[],r=function(){var n=e.shift();if(!t(n))return"continue";var r=A.selectContiguousTiles(n,t);e=e.filter((function(A){return!r.includes(A)})),i.push(r)};e.length;)r();return this.islands.set(t,i),i}},{key:"getTilesInRenderOrder",value:function(){return this._tilesInRenderOrder||(this._tilesInRenderOrder=this.tiles.slice().sort(C)),this._tilesInRenderOrder}}],[{key:"generateRandom",value:function(A,t){throw new Error("Not implemented")}}]),A}(),lt=function(A){Object(pA.a)(n,A);var t=Object(BA.a)(n);function n(){var A;Object(l.a)(this,n);for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(A=t.call.apply(t,[this].concat(i))).neighbors=void 0,A.outlinePoints=void 0,A.isGhost=void 0,A._isLand=void 0,A}return Object(h.a)(n,[{key:"isLand",value:function(){return void 0===this._isLand&&(this._isLand=this.z>=0&&!function A(t,n){var e;return!!t.isGhost||!(n<=0)&&(--n,(null===(e=t.neighbors)||void 0===e?void 0:e.some((function(t){return A(t,n)})))||!1)}(this,2)),this._isLand}}]),n}(st),ht=function(A){Object(pA.a)(n,A);var t=Object(BA.a)(n);function n(A,e){var i;return Object(l.a)(this,n),(i=t.call(this,A)).mesh=void 0,i.Component=function(A){return r.a.createElement(ct,Object(s.a)({terrain:Object(WA.a)(i)},A))},i.mesh=e,i.tiles.forEach((function(A,t){A.terrain=Object(WA.a)(i)})),i}return Object(h.a)(n,[{key:"getClosestToXy",value:function(A,t){var n=new IA(A,t,0),e=this.tiles.reduce((function(A,t){var e=n.euclideanDistanceTo(t);return e<A.distance?{distance:e,tile:t}:A}),{distance:1/0}).tile;if(!e)throw new Error("No tiles, "+this.tiles.length);return e}},{key:"getNeighborTiles",value:function(A){return A.neighbors||[]}}]),n}(ut);function ft(A,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,e=0,i=new tt.a({shape:[t,t],minDistance:1/n},(function(){return DA.float("".concat(A,"/").concat(++e))})),r=new $A.a({boundarySpacing:1});r.points.forEach((function(A){return i.addPoint(A)})),r.points=i.fill().map((function(t,n){return[].concat(Object(O.a)(t),[.2*(-.2+DA.float.apply(DA,[A].concat(Object(O.a)(t))))])}));var o=r.create();return new ht(r.points.map((function(A,t){return Object(TA.a)(lt,Object(O.a)(A))})).map((function(A,t){var n=o.r_circulate_t([],t);return A.outlinePoints=n.map((function(t){return new IA(o.t_x(t),o.t_y(t),A.z)})),A.isGhost=n.some((function(A){return o.t_ghost(A)})),A})).map((function(A,t,n){return A.neighbors=o.r_circulate_r([],t).map((function(A){return n[A]})).filter(Boolean),A})).filter(Boolean),o)}var vt,dt=L.a.div(LA||(LA=Object(y.a)(["\n\tbackdrop-filter: blur(2px);\n"]))),gt=L.a.div(VA||(VA=Object(y.a)(["\n\tborder: 1px solid rgba(255, 255, 255, 0.5);\n\tborder-radius: 3px;\n\tpadding: 1em;\n\tdisplay: flex;\n\tflex-direction: row;\n"]))),jt=L.a.div(SA||(SA=Object(y.a)(["\n\tborder: 1px solid rgba(255, 255, 255, 0.5);\n\tborder-radius: 50%;\n\twidth: 64px;\n\theight: 64px;\n\tjustify-content: center;\n\talign-items: center;\n\tdisplay: flex;\n\tmargin-right: 1em;\n"]))),bt=L.a.nav(JA||(JA=Object(y.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tfont-size: 60%;\n\ttext-transform: uppercase;\n"]))),Ot=L.a.a(NA||(NA=Object(y.a)(["\n\tflex: 0 0 auto;\n\tbackground-color: rgba(255, 255, 255, 0.1);\n\tmargin-right: 3px;\n\n\t// Same as ContextMenuItem\n\tpadding: 0.125em 0.5em;\n\twhite-space: nowrap;\n\ttransition: background-color 0.5s;\n\tcolor: white;\n\t/* background-color: transparent; */\n\t/* background-color: rgba(255, 255, 255, 0.05); */\n\t&:hover {\n\t\tbackground-color: rgba(255, 255, 255, 0.5);\n\t\tcursor: pointer;\n\t}\n"]))),xt=function(A){var t=A.entity;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("p",{children:Object(B.jsx)("b",{children:t.label})}),Object(B.jsx)("p",{children:(null===t||void 0===t?void 0:t.job)?t.job.label:"Jobless"}),Object(B.jsxs)(bt,{style:{marginTop:"1em"},children:[Object(B.jsx)(Ot,{onClick:function(){console.group("Selected entity"),console.log(t),console.groupEnd()},children:"LOG"}),Object(B.jsx)(Ot,{onClick:function(){console.warn("Following entity not implemented yet",t)},children:"FOLLOW"})]})]})},Ct=function(A){var t=A.entity,n=A.zoom,e=void 0===n?4:n;return Object(B.jsx)(dt,{children:Object(B.jsxs)(gt,{children:[Object(B.jsx)(jt,{children:t&&Object(B.jsx)("svg",{width:"1",height:"1",overflow:"visible",shapeRendering:"geometricPrecision",viewBox:[0,0,1/e,1/e].join(" "),children:Object(B.jsx)(t.Component,{})})}),Object(B.jsx)("div",{children:t?Object(B.jsx)(xt,{entity:t}):null})]})})},pt=L.a.section(vt||(vt=Object(y.a)(["\n\tposition: absolute;\n\tbottom: 2em;\n\tleft: 2em;\n\n\tfont-family: sans-serif;\n\tcolor: white;\n\n\ta {\n\t\tcolor: inherit;\n\t}\n"])));function Bt(A){return"".concat(~~(A%3600/60),"\u2032 ").concat(Math.floor(A%60),"\u2033")}var zt=function(A){var t=A.game,n=A.initialViewportCenter,e=t.scene,r=t.contextMenu,o=Object(i.useState)(n),a=Object(g.a)(o,2),c=a[0],s=a[1],u=Object(i.useState)(void 0),l=Object(g.a)(u,2),h=l[0],f=l[1],v=Object(i.useMemo)((function(){return Object(B.jsx)(e.terrain.Component,{onTileClick:function(A,t){var n,e;r.open(t,Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(dA,{onClick:function(){return s(t)},children:"Center camera"}),Object(B.jsx)(dA,{onClick:function(){console.group("Tile ".concat(t)),console.log(t),console.groupEnd()},children:"Show in console"}),Object(B.jsx)(gA,{children:(n=t.x,e=t.y,"40\xb0 ".concat(Bt(1e3-13*n)," N 79\xb0 ").concat(Bt(700-13*e)," W"))})]}))},onTileContextMenu:function(A,t){s(t)}})}),[e,r]),d=Object(i.useMemo)((function(){return e.entities.filter((function(A){return A instanceof kA})).map((function(A){return Object(B.jsx)(EA,{entity:A,onClick:function(t){t.preventDefault(),f(A)}},A.id)}))}),[e.entities]);return Object(i.useEffect)((function(){var A=function(){r.close()};return window.addEventListener("click",A),function(){return window.removeEventListener("click",A)}}),[r]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(nA,{center:c,zoom:1,overlay:Object(B.jsx)(bA,{zoom:1}),children:[Object(B.jsx)("g",{id:"scene__terrain",children:v}),Object(B.jsx)("g",{id:"scene__entities",children:d})]}),Object(B.jsxs)(pt,{children:[Object(B.jsx)(Ct,{entity:h}),Object(B.jsxs)("p",{style:{fontSize:"0.8em",opacity:"0.5"},children:[Object(B.jsx)("a",{href:"https://github.com/wvbe/kreuzzeug-im-nagelhosen",target:"_blank",rel:"noreferrer",children:"GitHub"}),"    ","Seed: ",e.seed]})]})]})};function mt(){var A=Object(i.useMemo)((function(){return function(){var A,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:String(Date.now()),n=24,e=1;if(window.game)A=window.game;else{var i=ft(t,n,e),r=qA(t,i),o=new f(t,i,r);A=new OA(o),window.game=A}var a=A.scene.terrain.getClosestToXy(Math.floor(n/2),Math.floor(n/2));return{game:A,initialViewportCenter:a}}()}),[]);return Object(i.useEffect)((function(){return A.game.scene.play()}),[A.game.scene]),Object(B.jsx)(xA.Provider,{value:A.game,children:Object(B.jsx)(zt,Object(s.a)({},A))})}function Mt(){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("ul",{children:Object(B.jsx)("li",{children:Object(B.jsx)(c.b,{to:"/tests",children:"Tests"})})}),Object(B.jsx)(u.a,{exact:!0,path:"/tests",component:uA})]})}var wt=function(){return Object(B.jsxs)(u.c,{children:[Object(B.jsx)(u.a,{exact:!0,path:"/",component:mt}),Object(B.jsx)(u.a,{component:Mt})]})};a.a.render(Object(B.jsxs)(r.a.StrictMode,{children:[Object(B.jsx)(e.a,{styles:E}),Object(B.jsx)(c.a,{hashType:"slash",children:Object(B.jsx)(wt,{})})]}),document.getElementById("root"))},90:function(A,t){}},[[105,1,2]]]);
//# sourceMappingURL=main.1e462765.chunk.js.map
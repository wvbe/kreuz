(this["webpackJsonpkruistocht-in-spijkerbroek"]=this["webpackJsonpkruistocht-in-spijkerbroek"]||[]).push([[0],{77:function(t,e,n){"use strict";n.r(e);var r=n(27),i=n(1),o=n.n(i),a=n(37),c=n.n(a),s=n(41),u=n(5),h=n(14),l=n.n(h),j=n(6),f=n(26),d=n(53),b=n(13);var v=function(t,e){var n=t*(Math.PI/180),r=Math.cos(n),i=Math.sin(n),o=Math.tan(n),a=e;return{degrees:t,radians:t*(Math.PI/180),tileSize:e,toPixels:function(t,n,o){return[(t+n)*r*e,(t-n)*i*e-a*o]},toCoords:function(t,n){var r=o*t+n;return[((n-r)/-i-r)/e,r/e]}}}(30,24);function x(t,e){var n=e.x-t.x;if(n)return-n;var r=t.y-e.y;if(r)return-r;var i=e.z-t.z;return i?-i:0}var O=n(2),m=function(t){var e=t.path,n=t.stroke,r=void 0===n?"black":n,i=t.strokeWidth,o=void 0===i?0:i,a=e.map((function(t){return v.toPixels.apply(v,Object(b.a)(t))})).map((function(t){return t.map((function(t){return t+0}))}));return Object(O.jsx)(O.Fragment,{children:a.reduce((function(t,e,n,i){return n?t.concat([Object(O.jsx)("line",{x1:e[0],y1:e[1],x2:i[n-1][0],y2:i[n-1][1],stroke:r,strokeWidth:String(o)},n)]):t}),[])})},p=function(t){var e=t.size,n=void 0===e?4:e,r=[[[-1*n,0,0],[n,0,0]],[[0,-1*n,0],[0,n,0]],[[0,0,-1*n],[0,0,n]]];return Object(O.jsx)(O.Fragment,{children:r.map((function(t,e){return Object(O.jsx)(m,{path:t,stroke:"rgba(0,0,0)",strokeWidth:.5},e)}))})},y=function(t){var e=t.x,n=void 0===e?0:e,r=t.y,o=void 0===r?0:r,a=t.z,c=void 0===a?0:a,s=t.children,u=t.crosshairSize,h=void 0===u?0:u,l=Object(i.useMemo)((function(){return v.toPixels(n,o,c)}),[n,o,c]);return Object(O.jsxs)("svg",{x:l[0],y:l[1],overflow:"visible",children:[h?Object(O.jsx)(p,{size:h}):null,s]})},g=function(t){var e=t.moveTo,n=t.moveSpeed,r=t.onRest,o=t.children,a=t.crosshairSize,c=void 0===a?0:a,s=Object(i.useMemo)((function(){return v.toPixels(e.x,e.y,e.z)}),[e]),u=Object(j.a)(s,2),h=u[0],l=u[1],b=Object(i.useMemo)((function(){return[h,l]}),[]),x=Object(j.a)(b,2),m=x[0],y=x[1],g=Object(f.useSpring)({to:{x:h,y:l},config:{duration:n},from:{x:m,y:y},onRest:r});return Object(O.jsxs)(d.animated.svg,{x:g.x,y:g.y,overflow:"visible",children:[c?Object(O.jsx)(p,{size:c}):null,o]})},k=n(10),z=n(24),w=["fill","strokeLinecap","stroke","strokeWidth","innerStroke","innerStrokeWidth"];function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map((function(t){return v.toPixels.apply(v,Object(b.a)(t))})).map((function(t){return t.map((function(t){return t+e}))}))}var S,W,C,A,E,P=v.toPixels(1,0,1).map((function(t){return t+0})),T=M([[1,1,0],[1,1,1],[0,1,1],[0,0,1],[0,0,0],[1,0,0]]),R=M([[0,0,0],[0,0,1],[1,0,1],[1,0,0]]),F=M([[1,0,0],[1,1,0],[1,1,1],[1,0,1]]),I=M([[0,0,1],[1,0,1],[1,1,1],[0,1,1]]),L=function(t){var e=t.fill,n=void 0===e?l()("#282c34"):e,r=t.strokeLinecap,i=void 0===r?"round":r,o=t.stroke,a=void 0===o?n.darken(.3).saturate(.3):o,c=t.strokeWidth,s=void 0===c?1:c,u=t.innerStroke,h=void 0===u?n.lighten(.4).desaturate(.8):u,j=t.innerStrokeWidth,f=void 0===j?s:j,d=Object(z.a)(t,w),b=h&&h.string(),v=a&&a.string(),x={};return(d.onClick||d.onContextMenu)&&(x.cursor="pointer"),Object(O.jsxs)("g",Object(k.a)(Object(k.a)({},d),{},{style:x,children:[n&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("polygon",{points:R.map((function(t){return t.join(",")})).join(" "),fill:n.string(),strokeWidth:0},"xz"),Object(O.jsx)("polygon",{points:I.map((function(t){return t.join(",")})).join(" "),fill:n.lighten(.2).string(),strokeWidth:0},"xy"),Object(O.jsx)("polygon",{points:F.map((function(t){return t.join(",")})).join(" "),fill:n.darken(.2).string(),strokeWidth:0},"yz")]}),h&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("line",{x1:P[0],y1:P[1],x2:T[3][0],y2:T[3][1],stroke:b,strokeWidth:f,strokeLinecap:i},"x-bar"),Object(O.jsx)("line",{x1:P[0],y1:P[1],x2:T[1][0],y2:T[1][1],stroke:b,strokeWidth:f,strokeLinecap:i},"y-bar"),Object(O.jsx)("line",{x1:P[0],y1:P[1],x2:T[5][0],y2:T[5][1],stroke:b,strokeWidth:f,strokeLinecap:i},"z-bar")]}),Object(O.jsx)("polygon",{points:T.map((function(t){return t.join(",")})).join(" "),stroke:v,fill:"transparent",strokeWidth:s,strokeLinecap:i},"outline")]}))},q=n(18),N=n(21),D=["zoom"],J=1/Math.pow(2,.5);function _(t){return Math.round(t)}var B,Y=N.a.div(S||(S=Object(q.a)(["\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 50%;\n\twidth: 0;\n\theight: 0;\n\ttransition: transform 0.5s;\n\t> * {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t}\n"]))),H=function(t){var e=t.overlay,n=t.center,r=void 0===n?{x:0,y:0,z:0}:n,o=t.zoom,a=void 0===o?1:o,c=t.children,s=Object(i.useMemo)((function(){return v.toPixels(r.x,r.y,r.z).map((function(t,e){return _(-t)+(e?0:.5)}))}),[r]),u=Object(j.a)(s,2),h=u[0],l=u[1],f={transform:"translate(\n\t\t\t\t".concat(h*a,"px,\n\t\t\t\t").concat(l*a,"px\n\t\t\t)")};return Object(O.jsxs)(Y,{style:f,children:[Object(O.jsx)(X,{zoom:a,children:c}),e]})},X=function(t){var e=t.zoom,n=void 0===e?1:e,r=Object(z.a)(t,D);return Object(O.jsx)("svg",Object(k.a)({width:"1px",height:"1px",overflow:"visible",shapeRendering:"geometricPrecision",viewBox:[0,0,1/n,1/n].join(" ")},r))},G=N.a.div(W||(W=Object(q.a)(["\n\t--scale-val: ",";\n\n\tposition: absolute;\n\ttransform-origin: top left;\n\ttransform: scale(var(--scale-val));\n"])),(function(t){var e=t.zoom;return void 0===e?1:e})),K=(Object(N.a)(G)(C||(C=Object(q.a)(["\n\ttransform: skewY(-","deg)\n\t\tscale(calc("," * var(--scale-val)), var(--scale-val));\n"])),v.degrees,J),Object(N.a)(G)(A||(A=Object(q.a)(["\n\ttransform: rotate(-","deg) skewX(","deg)\n\t\tscale(\n\t\t\tcalc("," * var(--scale-val)),\n\t\t\tcalc("," * var(--scale-val))\n\t\t);\n"])),v.degrees,v.degrees,Math.sqrt(J),J),Object(N.a)(G)(E||(E=Object(q.a)(["\n\ttransform: skewY(","deg)\n\t\tscale(calc("," * var(--scale-val)), var(--scale-val));\n"])),v.degrees,J),N.a.div(B||(B=Object(q.a)(["\n\tposition: relative;\n\theight: ",";\n\tbackground-image: linear-gradient(\n\t\t45deg,\n\t\trgba(255, 255, 255, 0.02) 25%,\n\t\trgba(0, 0, 0, 0.02) 25%,\n\t\trgba(0, 0, 0, 0.02) 50%,\n\t\trgba(255, 255, 255, 0.02) 50%,\n\t\trgba(255, 255, 255, 0.02) 75%,\n\t\trgba(0, 0, 0, 0.02) 75%,\n\t\trgba(0, 0, 0, 0.02) 100%\n\t);\n\tbackground-size: 56.57px 56.57px;\n\tmargin-bottom: 1em;\n"])),(function(t){var e=t.height;return"".concat(void 0===e?180:e,"px")}))),Q=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K,{children:Object(O.jsxs)(H,{zoom:1,center:{x:.5,y:.5,z:.5},children:[Object(O.jsx)(y,{x:-2,y:-2,z:0,children:Object(O.jsx)(L,{})}),Object(O.jsx)(y,{x:0,y:0,z:0,children:Object(O.jsx)(L,{innerStroke:l()("#630a0a7d"),fill:l()("#960202")})}),Object(O.jsx)(y,{x:2,y:2,z:0,children:Object(O.jsx)(L,{fill:l()("#ffffff7f"),onClick:function(){return window.alert("Clicky click!")}})})]})}),Object(O.jsx)(K,{children:Object(O.jsxs)(H,{center:{x:1,y:0,z:.5},children:[Object(O.jsx)(y,{x:0,y:0,z:0,children:Object(O.jsx)(L,{})}),Object(O.jsx)(y,{x:1,y:0,z:0,children:Object(O.jsx)(L,{})}),Object(O.jsx)(y,{x:2,y:0,z:0,children:Object(O.jsx)(L,{})}),Object(O.jsx)(y,{x:2,y:-1,z:0,children:Object(O.jsx)(L,{})})]})})]})},U=n(3),V=n(4),Z=function(){function t(){Object(U.a)(this,t),this.listeners=[]}return Object(V.a)(t,[{key:"on",value:function(t){var e=this;return this.listeners.push(t),function(){e.listeners.splice(e.listeners.indexOf(t))}}},{key:"emit",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.listeners.forEach((function(t){return t.apply(void 0,e)}))}},{key:"clear",value:function(){this.listeners=[]}}]),t}(),$=function(){},tt=function(){function t(e,n){var r=this;Object(U.a)(this,t),this.id=void 0,this.moveStart=new Z,this.moveRest=new Z,this.Component=function(){return null},this.location=void 0,this.job=void 0,this.id=e,this.location=n,this.moveRest.on((function(t){r.location=t}))}return Object(V.a)(t,[{key:"play",value:function(){var t;return(null===(t=this.job)||void 0===t?void 0:t.start())||$}},{key:"doJob",value:function(t){this.job=t}},{key:"moveTo",value:function(t){this.moveStart.emit(t)}}]),t}(),et=function(t){var e=t.entity,n=Object(i.useState)({destination:e.location,duration:0}),r=Object(j.a)(n,2),o=r[0],a=o.destination,c=o.duration,s=r[1];!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(i.useCallback)((function(){var e=t();return function(){return e.forEach((function(t){return t()}))}}),e);Object(i.useEffect)(n,[n])}((function(){return[e.moveStart.on((function(t){return s({destination:t,duration:100*e.location.euclideanDistanceTo(t)})}))]}),[e.moveStart]);var u=Object(i.useCallback)((function(){return e.moveRest.emit(a)}),[e.moveRest,a]);return Object(O.jsx)(g,{moveTo:a,moveSpeed:c,onRest:u,children:Object(O.jsx)(e.Component,{})})},nt=n(8),rt=n(9),it=function(){function t(e,n,r){Object(U.a)(this,t),this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=n,this.z=r}return Object(V.a)(t,[{key:"equals",value:function(t){return this===t||t&&this.x===t.x&&this.y===t.y&&this.z===t.z}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.x+=t,this.y+=e,this.z+=n,this}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"euclideanDistanceTo",value:function(t){var e=Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2));return Math.sqrt(Math.pow(e,2)+Math.pow(this.z-t.z,2))}},{key:"toString",value:function(){return[this.x,this.y,this.z].join(",")}}],[{key:"clone",value:function(e){return new t(e.x,e.y,e.z)}}]),t}(),ot=["fill","stroke","strokeWidth","zoom"],at=[[1,0,0],[1,1,0],[0,1,0],[0,0,0]].map((function(t){return v.toPixels.apply(v,Object(b.a)(t))})).map((function(t){return t.map((function(t){return t+1}))})),ct=function(t){var e=t.fill,n=void 0===e?l()("#282c34"):e,r=t.stroke,i=void 0===r?n.darken(.3).saturate(.3):r,o=t.strokeWidth,a=void 0===o?1:o,c=t.zoom,s=void 0===c?1:c,u=Object(z.a)(t,ot);return Object(O.jsx)("polygon",Object(k.a)({points:at.map((function(t){return t.map((function(t){return t*s})).join(",")})).join(" "),stroke:i.string(),fill:n.string(),strokeWidth:a},u))},st=new it(-.25,-.25,0),ut=function(t){Object(nt.a)(n,t);var e=Object(rt.a)(n);function n(){var t;Object(U.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).Component=function(){return Object(O.jsx)(y,Object(k.a)(Object(k.a)({},st),{},{children:Object(O.jsx)(ct,{zoom:.5,fill:l()("#ff0000")})}))},t}return n}(tt),ht=function(t){Object(nt.a)(n,t);var e=Object(rt.a)(n);function n(t,r){var i;if(Object(U.a)(this,n),(i=e.call(this,t)).waypoints=void 0,i.waypointIndex=void 0,r.length<2)throw new Error("A patrol must have at least 2 waypoints");return i.waypoints=r,i.waypointIndex=0,i}return Object(V.a)(n,[{key:"start",value:function(){var t=this,e=[this.entity.moveRest.on((function(){t.waypointIndex=(t.waypointIndex+1)%t.waypoints.length,t.entity.moveTo(t.waypoints[t.waypointIndex])}))];return this.entity.moveTo(this.waypoints[0]),function(){return e.forEach((function(t){return t()}))}}}]),n}(function(){function t(e){Object(U.a)(this,t),this.entity=void 0,this.entity=e}return Object(V.a)(t,[{key:"start",value:function(){throw new Error("Not implemented for ".concat(this.constructor.name))}}]),t}()),lt=new it(-.25,-.25,0),jt=function(t){Object(nt.a)(n,t);var e=Object(rt.a)(n);function n(){var t;Object(U.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).Component=function(){return Object(O.jsx)(y,Object(k.a)(Object(k.a)({},lt),{},{children:Object(O.jsx)(ct,{zoom:.5})}))},t}return n}(tt),ft=Symbol();function dt(t){var e=t.filter((function(t){return"number"===typeof t}));return e.reduce((function(t,e){return t+e}),0)/e.length}var bt,vt=function(){function t(e){Object(U.a)(this,t),this.size=void 0,this.max=void 0,this.map=void 0,this.size=Math.pow(2,e)+1,this.max=this.size-1,this.map=new Float32Array(this.size*this.size)}return Object(V.a)(t,[{key:"generate",value:function(t){this.set(0,0,this.max),this.set(this.max,0,this.max/2),this.set(this.max,this.max,0),this.set(0,this.max,this.max/2),this.divide(this.max,t)}},{key:"get",value:function(t,e){return t<0||t>this.max||e<0||e>this.max?ft:this.map[t+this.size*e]}},{key:"set",value:function(t,e,n){this.map[t+this.size*e]=n}},{key:"divide",value:function(t,e){var n,r,i=t/2,o=e*t;if(!(i<1)){for(r=i;r<this.max;r+=t)for(n=i;n<this.max;n+=t)this.square(n,r,i,Math.random()*o*2-o);for(r=0;r<=this.max;r+=i)for(n=(r+i)%t;n<=this.max;n+=t)this.diamond(n,r,i,Math.random()*o*2-o);this.divide(t/2,e)}}},{key:"square",value:function(t,e,n,r){var i=dt([this.get(t-n,e-n),this.get(t+n,e-n),this.get(t+n,e+n),this.get(t-n,e+n)]);this.set(t,e,i+r)}},{key:"diamond",value:function(t,e,n,r){var i=dt([this.get(t,e-n),this.get(t+n,e),this.get(t,e+n),this.get(t-n,e)]);this.set(t,e,i+r)}}]),t}(),xt=function(t){Object(nt.a)(n,t);var e=Object(rt.a)(n);function n(t,r){var i;return Object(U.a)(this,n),(i=e.call(this))._terrainNoise=void 0,i._terrainNoise=new vt(9),i._terrainNoise.generate(1),i.terrain=Array.from(new Array(t*r)).map((function(e,n){var r=n%t,o=Math.floor(n/t),a=i.terrainAt(r,o);return new it(r,o,(a-512)/20)})),i.entities=Array.from(new Array(10)).map((function(e,n){var o={x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*r)},a=o.y*t+o.x;return new jt("entity-"+n,it.clone(Object(k.a)(Object(k.a)({},o),{},{z:i.terrain[a].z})))})),i}return Object(V.a)(n,[{key:"terrainAt",value:function(t,e){var n=this._terrainNoise.get(t,e);if(n===ft)throw new Error("Coordinate (".concat(t,", ").concat(e,") is out of bounds."));return n}}]),n}(function(){function t(){Object(U.a)(this,t),this.terrain=[],this.entities=[]}return Object(V.a)(t,[{key:"play",value:function(){var t=this.entities.map((function(t){return t.play()}));return function(){return t.forEach((function(t){return t()}))}}}]),t}()),Ot=N.a.section(bt||(bt=Object(q.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n"]))),mt=function(){return Object(O.jsx)(Ot,{children:Object(O.jsx)("p",{children:"Heyyoo"})})},pt=["coordinate"],yt=function(t){var e=t.coordinate,n=Object(z.a)(t,pt),r=Object(i.useState)(!1),o=Object(j.a)(r,2),a=o[0],c=o[1],s=it.clone(e).transform(-.5,-.5,-1);return Object(O.jsx)(y,{x:s.x,y:s.y,z:s.z,children:Object(O.jsx)(L,Object(k.a)(Object(k.a)({},n),{},{fill:a?l()("#282c34").lighten(1):void 0,stroke:a?l()("#fff"):void 0,innerStroke:a?l()("#ccd1dd"):void 0,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}}))},s.toString())},gt=function(){var t=Object(i.useMemo)((function(){var t=new xt(40,40),e=t.terrain[Math.floor(Math.random()*t.terrain.length)],n=new ut("garrd",e);return n.doJob(new ht(n,[t.terrain[Math.floor(Math.random()*t.terrain.length)],t.terrain[Math.floor(Math.random()*t.terrain.length)],t.terrain[Math.floor(Math.random()*t.terrain.length)],t.terrain[Math.floor(Math.random()*t.terrain.length)]])),t.entities.push(n),t}),[]);Object(i.useEffect)((function(){return console.log("--- Scene#play ---"),t.play()}),[t]);var e=Math.floor(820),n=Object(i.useState)(t.terrain[e]),r=Object(j.a)(n,2),o=r[0],a=r[1],c=Object(i.useMemo)((function(){return t.terrain.slice().sort(x).map((function(t){return Object(O.jsx)(yt,{coordinate:t,onClick:function(e){e.preventDefault(),a(t)}},t.toString())}))}),[t.terrain]),s=Object(i.useMemo)((function(){return t.entities.slice().sort((function(t,e){return x(t.location,e.location)})).map((function(t){return Object(O.jsx)(et,{entity:t},t.id)}))}),[t.entities]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(H,{center:o,zoom:1,children:[Object(O.jsx)("g",{id:"scene-terrain",children:c}),Object(O.jsx)("g",{id:"scene-entities",children:s})]}),Object(O.jsx)(mt,{})]})};function kt(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("ul",{children:Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/tests",children:"Tests"})})}),Object(O.jsx)(u.a,{exact:!0,path:"/tests",component:Q})]})}var zt,wt=function(){return Object(O.jsxs)(u.c,{children:[Object(O.jsx)(u.a,{exact:!0,path:"/",component:gt}),Object(O.jsx)(u.a,{component:kt})]})},Mt=n.p+"static/media/nebula-282c34.dda754f6.png",St=Object(r.b)(zt||(zt=Object(q.a)(["\n\tbody {\n\t\tbackground: url(",");\n\t}\n"])),Mt);c.a.render(Object(O.jsxs)(o.a.StrictMode,{children:[Object(O.jsx)(r.a,{styles:St}),Object(O.jsx)(s.a,{hashType:"slash",children:Object(O.jsx)(wt,{})})]}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.e5c10dae.chunk.js.map